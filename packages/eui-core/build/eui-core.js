Ext.define("Override.Ajax",{override:"Ext.Ajax",_defaultHeaders:{"Content-Type":"application/json;charset=utf-8"},_method:"POST"});Ext.define("Override.Component",{override:"Ext.Component",localeProperties:"html",_localeRe:/^{(.+)}$/,initComponent:function(){this.doLocale();this.callParent(arguments)},_createLocaleSetter:function(f){var c=this.self.getConfigurator(),d=c.configs[f],b=Ext.getStore("i18n"),e=this._localeRe,g,h,a;if(Ext.isEmpty(b)){console.log("다국어 지원을 위한 데이터를 제공받지 못했습니다...",arguments);return null}if(!d){d=c.configs[f]=new Ext.Config(f)}g=d.names.set;h=this[g];if(h.isLocaleSetter){a=h}else{a=this[g]=function(s){var l,j,r,o;if(s&&Ext.typeOf(s)=="string"&&(s.indexOf("#")!=-1)){var m=s.split("#"),q=m.length;for(var n=1;n<q;n++){var k;if(m[n].split("}").length==2){k=m[n].split("}")[0]+"}"}l=e.exec(k);if(l){if(n===1){s=m[0]}j=l[1];o=j&&b.findRecord("MSG_ID",j,0,false,false,true);s+=(o?o.get("MSG_LABEL"):j)+m[n].split("}")[1]}else{s=m[n]}}}return h.call(this,s)};a.isLocaleSetter=true}return a},doLocale:function(){var d=this,b=Ext.Array.from(d.localeProperties),a=0,c=b.length,f,e,g;for(;a<c;a++){f=b[a];e=d[f];if(e&&Ext.typeOf(e)=="string"&&(e.indexOf("#")!=-1)){g=d._createLocaleSetter(f);if(e&&!Ext.isEmpty(g)){g.call(d,e)}}}}});Ext.define("Override.data.field.Date",{override:"Ext.data.field.Date",convert:function(c){if(!c){return null}if(c instanceof Date){return c}var a=this.dateReadFormat||this.dateFormat,b;if(a){console.log(Ext.Date.parse(c,a));return Ext.Date.parse(c,a,this.useStrict)}b=Date.parse(c);if(!b){b=Ext.Date.parse(c,"Ymd")}return b?new Date(b):c}});Ext.define("Override.data.Model",{override:"Ext.data.Model",recordValidationCheck:function(){if(!this.isValid()){var a=this.getValidation(),b=a.modified;for(var d in b){var c=b[d];if(c){if(!Ext.isBoolean(a.get(d))){Ext.Msg.alert("확인",a.get(d))}}}return false}return true},getData:function(b){var q=this,s={},g=(b===true)?q._getAssociatedOptions:(b||s),t=q.data,f=g.associated,r=g.changes,i=r&&g.critical,l=r?q.modified:t,c=q.fieldsMap,e=g.persist,h=g.serialize,d,a,j,v,k;if(l){for(v in l){k=t[v];a=c[v];if(a){if(e&&!a.persist){continue}if(h&&a.serialize){k=a.serialize(k,q)}if(a.type==="date"){if(a.dateFormat){k=Ext.Date.format(k,a.dateFormat)}else{k=Ext.Date.format(k,eui.Config.modelGetDataDateFormat)}console.log("value : ",k)}}else{if(Ext.isDate(k)){k=Ext.Date.format(k,eui.Config.modelGetDataDateFormat)}}var u="";if(k instanceof Object){for(var o in k){u=o}}if(k&&!Ext.isEmpty(k[v])){s[v]=k[v]}else{if(u.indexOf("euicheckboxgroup")!=-1){s[v]=k[u]}else{s[v]=k}}}}if(i){d=q.self.criticalFields||q.getCriticalFields();for(j=d.length;j-->0;){v=(a=d[j]).name;if(!(v in s)){k=t[v];if(h&&a.serialize){k=a.serialize(k,q)}s[v]=k}}}if(f){q.getAssociatedData(s,g)}if(Ext.isEmpty(s.__rowStatus)){var m=q.crudState;if(m=="C"){m="I"}s.__rowStatus=m}return s}});Ext.define("Override.data.ProxyStore",{override:"Ext.data.ProxyStore",recordsValidationCheck:function(){var d=this,e=d.getDataSource(),b=e.items,a=b.length,c,f=true;for(c=0;c<a;c++){if(!b[c].recordValidationCheck()){d.fireEvent("focusgridrecord",b[c]);f=false;break}}return f},checkSync:function(a){if(this.recordsValidationCheck()){this.sync(a);if(!this.isSyncing){Ext.Msg.alert("확인","저장 할 레코드가 없습니다.")}}return this}});Ext.define("Override.data.proxy.Server",{override:"Ext.data.proxy.Server",buildUrl:function(c){var b=this,a=b.getUrl(c);if(b.getNoCache()){a=Ext.urlAppend(a,Ext.String.format("{0}={1}",b.getCacheString(),Ext.Date.now()))}if(!Ext.isEmpty(Config.subUrlPrifix)){a=Config.subUrlPrifix+a}if(!Ext.isEmpty(Config.baseUrlPrifix)){if(a.substring(0,1)=="/"){a=Config.baseUrlPrifix+a}}return a}});Ext.define("Override.Ext.data.TreeModel",{override:"Ext.data.TreeModel",listeners:{recusivechildcheck:function(a,b){Ext.each(a.childNodes,function(d){var c=a.get(b);if(a.get(b)==="Y"){c="N"}d.set(b,c);d.fireEvent("recusivechildcheck",d,b)})}}});Ext.define("Override.data.proxy.Rest",{override:"Ext.data.proxy.Rest",config:{actionMethods:{create:"POST",read:"POST",update:"POST",destroy:"POST"},headers:{"Content-Type":"application/json;charset=utf-8"},paramsAsJson:true}});Ext.define("Override.container.Container",{override:"Ext.container.Container"});Ext.define("Override.panel.Panel",{override:"Ext.panel.Panel",localeProperties:["title"]});Ext.define("Override.window.Window",{override:"Ext.window.Window",localeProperties:["title"],initComponent:function(){this.callParent(arguments)}});Ext.define("eui.mixin.FormField",{extend:"Ext.Mixin",mixinConfig:{},setAllowBlank:function(){if(this.allowBlank!==undefined&&!this.allowBlank){if(this.fieldLabel){this.fieldLabel='<span style="color:red">*</span>'+this.fieldLabel}}},setCheckboxGroupRadioGroupBindVar:function(){if(!this.getBind()){return}var b=this,e=this.getBind(),a=e.value.stub.name,c=e.value.stub.path,d=c.split(".")[0];this.name=a;this.setViewModel({formulas:{radioValue:{bind:"{"+c+"}",get:function(h){var g=this.get(d);if(g.isModel&&this.get(d).getFields().length>0&&(this.get(d).validate().map[a])){b.allowBlank=false}var f={};f[a]=h;return f},set:function(f){this.set(c,f[a])}}}});this.setBind({value:"{radioValue}"})},setCustomDefaultValue:function(c){if(!c.getBind()){return}var b=this,a=c.getBind().value.stub.path;if(c.getBind()&&c.getBind()["value"]&&(c.getBind().value.stub.hadValue==undefined)){b.getViewModel().set(a,c.getValue())}}});Ext.define("Override.form.field.Base",{override:"Ext.form.field.Base",mixins:["eui.mixin.FormField"],initComponent:function(){this.setAllowBlank();this.callParent(arguments);this.on("render",function(){if(this.previousSibling()&&this.previousSibling().xtype=="euilabel"&&!this.allowBlank){this.previousSibling().addCls("fo-required")}})}});Ext.define("Override.grid.column.Column",{override:"Ext.grid.column.Column",localeProperties:["text"],style:"text-align:center",initComponent:function(){this.callParent(arguments)}});Ext.define("Ext.ux.statusbar.StatusBar",{extend:"Ext.toolbar.Toolbar",alternateClassName:"Ext.ux.StatusBar",alias:"widget.statusbar",requires:["Ext.toolbar.TextItem"],cls:"x-statusbar",busyIconCls:"x-status-busy",busyText:"Loading...",autoClear:5000,emptyText:"&#160;",activeThreadId:0,initComponent:function(){var a=this.statusAlign==="right";this.callParent(arguments);this.currIconCls=this.iconCls||this.defaultIconCls;this.statusEl=Ext.create("Ext.toolbar.TextItem",{cls:"x-status-text "+(this.currIconCls||""),text:this.text||this.defaultText||""});if(a){this.cls+=" x-status-right";this.add("->");this.add(this.statusEl)}else{this.insert(0,this.statusEl);this.insert(1,"->")}},setStatus:function(e){var a=this;e=e||{};Ext.suspendLayouts();if(Ext.isString(e)){e={text:e}}if(e.text!==undefined){a.setText(e.text)}if(e.iconCls!==undefined){a.setIcon(e.iconCls)}if(e.clear){var f=e.clear,d=a.autoClear,b={useDefaults:true,anim:true};if(Ext.isObject(f)){f=Ext.applyIf(f,b);if(f.wait){d=f.wait}}else{if(Ext.isNumber(f)){d=f;f=b}else{if(Ext.isBoolean(f)){f=b}}}f.threadId=this.activeThreadId;Ext.defer(a.clearStatus,d,a,[f])}Ext.resumeLayouts(true);return a},clearStatus:function(e){e=e||{};var c=this,b=c.statusEl;if(c.destroyed||e.threadId&&e.threadId!==c.activeThreadId){return c}var d=e.useDefaults?c.defaultText:c.emptyText,a=e.useDefaults?(c.defaultIconCls?c.defaultIconCls:""):"";if(e.anim){b.el.puff({remove:false,useDisplay:true,callback:function(){b.el.show();c.setStatus({text:d,iconCls:a})}})}else{c.setStatus({text:d,iconCls:a})}return c},setText:function(b){var a=this;a.activeThreadId++;a.text=b||"";if(a.rendered){a.statusEl.setText(a.text)}return a},getText:function(){return this.text},setIcon:function(a){var b=this;b.activeThreadId++;a=a||"";if(b.rendered){if(b.currIconCls){b.statusEl.removeCls(b.currIconCls);b.currIconCls=null}if(a.length>0){b.statusEl.addCls(a);b.currIconCls=a}}else{b.currIconCls=a}return b},showBusy:function(a){if(Ext.isString(a)){a={text:a}}a=Ext.applyIf(a||{},{text:this.busyText,iconCls:this.busyIconCls});return this.setStatus(a)}});Ext.define("eui.Config",{singleton:true,alternateClassName:["Config"],localeCode:"kr",localeValueField:"MSG_ID",localeDisplayField:"MSG_LABEL",defaultDateFormat:"Y-m-d",defaultDateTimeFormat:"Y-m-d H:i:s",baseUrlPrifix:null,subUrlPrifix:null,commandButtonControllerUrl:null,fileuploadListUrl:"",filedeleteUrl:"",fileuploadUrl:"",fileDownloadUrl:"",modelGetDataDateFormat:"Ymd",localeUrl:null,initLocaleMessage:function(d){var c=this,b=Ext.create("Ext.data.Store",{fields:[],storeId:"i18n"});var a={pMethod:"GET",url:Config.localeUrl,params:{locale:Config.localeCode},pSync:false,pCallback:function(e,f,g){b.loadData(g.data);b.add(Config.data.message);c.mergeMessageData();if(Ext.isFunction(d)){d()}}};if(Config.localeUrl){Util.CommonAjax(a)}else{b.add(Config.data.message);c.mergeMessageData();if(Ext.isFunction(d)){d()}}},mergeMessageData:function(){var a=Ext.getStore("i18n");if(!Ext.isArray(Config.message)){return}Ext.each(Config.message,function(c){var b=a.findRecord(Config.localeValueField,c[Config.localeValueField],0,false,false,true);if(b){b.set(Config.localeDisplayField,c[Config.localeDisplayField])}else{a.add(c)}})},data:{message:[{MSG_ID:"엑셀다운로드",MSG_LABEL:"엑셀다운로드"},{MSG_ID:"엑셀다운로드아이콘",MSG_LABEL:"x-fa fa-download"},{MSG_ID:"행추가",MSG_LABEL:"추가"},{MSG_ID:"행추가아이콘",MSG_LABEL:"x-fa fa-plus-square"},{MSG_ID:"행삭제",MSG_LABEL:"삭제"},{MSG_ID:"행삭제아이콘",MSG_LABEL:"x-fa fa-minus-square"},{MSG_ID:"등록",MSG_LABEL:"등록"},{MSG_ID:"등록아이콘",MSG_LABEL:"x-fa fa-table"},{MSG_ID:"수정",MSG_LABEL:"수정"},{MSG_ID:"수정아이콘",MSG_LABEL:"x-fa fa-th"},{MSG_ID:"저장",MSG_LABEL:"저장"},{MSG_ID:"저장아이콘",MSG_LABEL:"x-fa fa-save"},{MSG_ID:"조회",MSG_LABEL:"조회"},{MSG_ID:"조회아이콘",MSG_LABEL:"x-fa fa-search"},{MSG_ID:"인쇄",MSG_LABEL:"인쇄"},{MSG_ID:"인쇄아이콘",MSG_LABEL:"x-fa fa-print"},{MSG_ID:"CONFIRM",MSG_LABEL:"확인"},{MSG_ID:"RECORD_DIRTY",MSG_LABEL:"레코드가 수정중 입니다"},{MSG_ID:"RECORD_DELETE",MSG_LABEL:"레코드를 삭제하시겠습니까.?"},{MSG_ID:"RECORD_DELETED",MSG_LABEL:"레코드가 삭제되었습니다"}]}});Ext.define("sprr.DummyClass",{});Ext.define("eui.Util",{singleton:true,alternateClassName:["Util"],localeStoreValueField:"MSG_ID",localeStoreDisplayField:"MSG_CONTENTS",fileDownloadUrl:"api/file/download",UrlPrefix:null,localeLang:"ko",webosShowWindowId:null,currentAjaxButtonId:null,captureEvents:function(a){Ext.util.Observable.capture(a,function(b){console.info(Ext.Date.format(new Date(),"Y년m월d일 A g시i분 s초 u"),a.id,a.xtype||a.storeId,"event :",b)},this)},ajaxButtonDisabled:function(a){if(a){}var b=Ext.getCmp(Util.currentAjaxButtonId);if(b){b.setDisabled(a)}if(!a){Util.currentAjaxButtonId=null}},global_setOverride:function(){Ext.override(Ext.data.Store,{});Ext.require("Util",function(){Ext.Ajax.on("beforerequest",function(c,a,b){Util.ajaxButtonDisabled(true)});Ext.Ajax.on("requestexception",function(f,b,c){var a=Ext.JSON.decode(b.responseText,true);if(Util.webosShowWindowId){var e=Ext.getCmp(Util.webosShowWindowId);if(e){var g=Ext.getCmp(Util.webosShowWindowId).down("statusbar");g.setStatus({text:a.MSG,clear:false})}}if(a&&parseInt(a.TYPE)===-1){if(a.STATUS===200){Util.showGlobalMsg(a,"INFO")}else{Util.showGlobalMsg(a,"WARNING")}}if(b.status===0){Ext.Msg.show({title:"WARNING",icon:Ext.Msg.ERROR,buttons:Ext.Msg.OK,message:"서버가 응답하지 않습니다. 관리자에게 문의하세요."})}var d="관리자에게 문의하세요.";if(b.status==404){d="페이지가 존재하지 않습니다.";Ext.Msg.show({title:"WARNING",icon:Ext.Msg.ERROR,buttons:Ext.Msg.OK,message:d})}Util.ajaxButtonDisabled(false)});Ext.Ajax.on("requestcomplete",function(e,b,c){var a=Ext.JSON.decode(b.responseText,true);if(Util.webosShowWindowId){var d=Ext.getCmp(Util.webosShowWindowId);if(d){var f=Ext.getCmp(Util.webosShowWindowId).down("statusbar");f.setStatus({text:a.MSG,iconCls:"ok-icon",clear:true})}}if(a&&parseInt(a.TYPE)===0){Util.showGlobalMsg(a,"INFO")}Util.ajaxButtonDisabled(false)})})},global_InitialProcess:function(h){var g=h.data.session,d=h.data.message,f=h.data.dept,c=h.data.cmpsetting;var b=Ext.create("Ext.data.Model",g);var a=Ext.create("Ext.data.Model",f);var e=Ext.create("Ext.data.Store",{fields:[],storeId:"cmpsettingStore"});e.loadData(c);Util.global_setOverride();Util.global_setLocale(d)},global_setLocale:function(b){var a=Ext.create("Ext.data.Store",{fields:[],storeId:"i18n"});a.loadData(b)},globalCheckLogin:function(){Ext.require("Util",function(){var a={url:"api/service/getInit",params:{},pSync:false,pCallback:function(b,c,d){if(d.TYPE===1){Util.global_InitialProcess(d)}else{Util.globalLoginForm()}}};Util.CommonAjax(a)})},globalLoginForm:function(){Ext.create("com.view.layout.login.HLogin")},globalLoadLocaleScript:function(b){var a;if(location.pathname.indexOf("webos")!=-1){a=Ext.util.Format.format("resources/js/ext-locale/ext-locale-{0}.js",b)}else{a=Ext.util.Format.format("../webos/resources/js/ext-locale/ext-locale-{0}.js",b)}Ext.Loader.loadScript({url:a})},getOwnerCt:function(a){if(!a.rendered){Ext.Error.raise({msg:"전달된 컴포넌트는 렌더링이 완료되지 않았습니다.렌더 이후에 호출하세요."});return null}if(a.up("window")){return a.up("window")}var b=a.up("container")||a.up("panel");if(Ext.isEmpty(b)){Ext.Error.raise({msg:"HBasePanel 또는 HBaseContainer를 찾을 수 없습니다."})}return b},createStore:function(c,b){var a=Ext.create("Ext.data.Store",{autoDestroy:true,autoLoad:this.autoMaticLoad,storeId:this.generateUUID(),fields:b.fields,proxy:{type:"rest",noCache:false,pageParam:false,startParam:false,limitParam:false,headers:{"Content-Type":"application/json;charset=utf-8"},paramsAsJson:true,actionMethods:{create:"POST",read:"POST",update:"POST",destroy:"POST"},url:b.url,reader:{type:"json",rootProperty:"data",transform:b.transform||false},extraParams:b.params}});if(Ext.isDefined(c.bindStore)){c.bindStore(a)}else{c._store=a}return a},commonPopup:function(c,l,j,a,q,d,g,k){var o=function(t,x,s,v){var r=null;if(s){try{r=Ext.create(s,{__PARAMS:v,__PARENT:t})}catch(u){console.log(u.message)}}return r};var i=o(c,l,j,d);var b={title:l,header:true,padding:0,closable:true,constrainHeader:true,maximizable:true,layout:"fit",height:q,width:a,options:d};b.items=null;if(!Ext.isEmpty(g)){for(var h in g){var m=g[h];b[h]=m}}b.items=[i];if(c&&k){var n=c.down("commandtoolbar"),e=c.down("pagingtoolbar"),f=Ext.create("Ext.window.Window",b);return c.add(f)}return Ext.create("Ext.window.Window",b)},generateUUID:function(){var b=new Date().getTime();var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d=(b+Math.random()*16)%16|0;b=Math.floor(b/16);return(e=="x"?d:(d&7|8)).toString(16)});return a},commonTreeItem:function(){var a=[];Ext.Ajax.request({async:false,url:"resources/data/treesmpl.json",failure:function(e,b,c,d){Ext.Msg.show({title:"Error!",msg:e.responseText,icon:Ext.Msg.ERROR,buttons:Ext.Msg.OK})},success:function(g,c,d,e){var f=this;var b=Ext.JSON.decode(g.responseText,true);a=b}});return a},CommonAjax:function(j){var i=j.svcId||"CMAJAX",e=j.url,f=j.inDs,g=j.outDs,m=j.params,h=j.pCallback,d=j.pSync,a=j.pScope,q=j.method,n=j.timeoutSeq,c=null;if(m){c=m.__scopeGrid;delete m.__scopeGrid}var b=function(s,r,u){if(!Ext.isEmpty(r)){if(Ext.isString(r)){try{s.params=Ext.applyIf(s.params,Ext.Object.fromQueryString(r))}catch(t){console.log(t.message)}return s}else{if(Ext.isObject(r)){s.params=Ext.applyIf(s.params,r)}return s}}return s};var l=function(u,t,s,v,r){u.params={};u.jsonData={};if(!Ext.isEmpty(s)){u.jsonData=Ext.applyIf(u.jsonData,s)}if(!Ext.isEmpty(t)){u=b(u,t,v)}if(!Ext.isEmpty(u.params)){u.jsonData=Ext.applyIf(u.jsonData,u.params)}delete u.params;return u};if(!!n){n=n*1000}else{n=30000}if(!Ext.isEmpty(Config.subUrlPrifix)){e=Config.subUrlPrifix+e}if(!Ext.isEmpty(Config.baseUrlPrifix)){if(e.substring(0,1)=="/"){e=Config.baseUrlPrifix+e}}var k="";var o={async:(d==null?true:d),method:(q?q:"POST"),timeout:n,disableCaching:false,url:e,success:function(r,v){var t=Ext.decode(r.responseText);if(!d){k=t}if(g){var u=Object.keys(g);for(var s=0;s<u.length;s++){g[u[s]].loadData(t[u[s]]);g[u[s]].commitChanges()}}if(Ext.isFunction(h)){if(c){Ext.callback(h,a||this,[c,m,t])}else{Ext.callback(h,a||this,[a||this,m,t,i])}}},failure:function(r,s){}};o=l(o,m,f,g,a);Ext.Ajax.request(o);if(!d){return k}},showGlobalMsg:function(a,b){Ext.require("Ext.window.MessageBox",function(){if(a.DESC){Ext.Msg.show({icon:Ext.Msg[b],title:b,width:400,resizable:true,height:400,defaultTextHeight:300,value:a.DESC,textAreaReadOnly:true,message:a.MSG,buttons:Ext.Msg.OK,multiline:true})}else{Ext.Msg.show({title:b,icon:Ext.Msg[b],buttons:Ext.Msg.OK,message:a.MSG})}})},getDatasetParam:function(h){var g=h;var a={data:[]};function j(l,m,i){var k=i.get(m.name);if(m.type==="date"&&m.dateFormat&&Ext.isDate(k)){l[m.name]=Ext.Date.format(k,m.dateFormat)}else{if(m.type==="boolean"){l[m.name]=k?"1":"0"}else{l[m.name]=k}}}function f(i){return i.getData()}var b=g.getNewRecords();var e=b.length;for(var d=0;d<e;d++){var c=f(b[d]);c=Ext.apply(c,{__rowStatus:"I"});a.data.push(c)}b=g.getUpdatedRecords(),e=b.length;for(var d=0;d<e;d++){var c=f(b[d]);c=Ext.apply(c,{__rowStatus:"U"});a.data.push(c)}b=g.getRemovedRecords(),e=b.length;for(var d=0;d<e;d++){var c=f(b[d]);c=Ext.apply(c,{__rowStatus:"D"});a.data.push(c)}return a},getAllDatasetParam:function(){var f=this;var b={deletedData:[],data:[]};function c(k,l,i){var j=i.get(l.name);if(l.type===Ext.data.Types.DATE&&l.dateFormat&&Ext.isDate(j)){k[l.name]=Ext.Date.format(j,l.dateFormat)}else{if(l.type===Ext.data.Types.BOOL){k[l.name]=j?"1":"0"}else{k[l.name]=j}}}function g(l){var o={},k=l.fields,m=k.items,q,j=m.length;for(var n=0;n<j;n++){q=m[n];c(o,q,l)}return o}var d=f.getRange();var a=d.length;for(var e=0;e<a;e++){var h=g(d[e]);h=Ext.apply(h,{__rowStatus:""});b.data.push(h)}return b},getIsDirty:function(){return(this.getNewRecords().length>0||this.getUpdatedRecords().length>0||this.getRemovedRecords().length>0)},getLocaleValue:function(c){var b=Ext.getStore("i18n");var a=id&&b.findRecord("MSG_ID",c,0,false,false,true);if(a){return a.get("MSG_LABEL")}return""},config:{contextPath:"eui",baseUrl:"controller/router"},constructor:function(a){this.initConfig(a);this.init()},init:function(){Ext.getDoc().on("contextmenu",function(a){a.preventDefault()})},sessionValidation:function(){var a={url:Ext.util.Format.format("/{0}/{1}/",this.getContextPath(),this.getBaseUrl()),async:true,method:"POST",success:function(c,d){if(!Ext.isEmpty(c.responseText)){var e=Ext.decode(c.responseText),b=e[0].result;this.sessionValidationCallback(b)}},failure:function(c,d){if(!Ext.isEmpty(c.responseText)){var e=Ext.decode(c.responseText),b=e[0].result;this.sessionValidationCallback(b)}},jsonData:{action:"",method:"",tid:Ext.id(),type:"rpc",data:{}},scope:this,timeout:30000,disableCaching:false};Ext.Ajax.request(a)},sessionValidationCallback:function(a){},createDirectStore:function(c,b,a){return{xclass:"eui.data.DirectStore",storeId:Ext.util.Format.format("{0}-{1}",b,Ext.id()),fields:a,proxy:{type:"direct",directFn:c,reader:{type:"json",rootProperty:b,totalProperty:"totalCount"}}}},pluck:function(f,a){var b=[],c,e,d;for(c=0,e=f.length;c<e;c++){if(f[c].isModel){d=f[c].getData();delete d.id}else{d=f[c]}if(a){b.push(d[a])}else{b.push(d)}}return b},loadNodeData:function(b){var j=this;j.keyNameOfChildNode="CODE";j.keyNameOfNodeLevel="LEVEL";j.keyNameOfParentNode="PCODE";var k=function(e){var i=j.app.getDesktop();i.createCustomWindow(e.config.data)};var m=Ext.Array.map(b.getRange(),function(e){var i={data:{}};Ext.each(b.config.fields,function(n){if(Ext.isObject(n)){i[n.name]=e.get(n.name)}else{if(n==="PCODE"&&(e.get(n)==="*")){i.data[n]=e.get("CODE")}else{if(n==="TEXT"){i.data[n]=e.get(n);i[Ext.util.Format.lowercase(n)]=e.get(n)}else{i.data[n]=e.get(n)}}}});return i},j);var l={},c=[];for(var d=0;d<m.length;d++){var g=m[d];var a=g.data[j.keyNameOfChildNode];var f=g.data[j.keyNameOfNodeLevel]===1?"root":g.data[j.keyNameOfParentNode];l[a]=g;if(!Ext.isEmpty(l[f])){if(!l[f].menu){l[f].menu={items:[]}}l[f].menu.items.push(g)}else{c.push(g)}}function h(n){if(n.menu&&n.menu.items.length>0){n.expanded=true;for(var e=0;e<n.menu.items.length;e++){arguments.callee(n.menu.items[e])}}else{n.cls="arrow-none";n.leaf=true;n.handler=k;delete n.children}}for(var d=0;d<c.length;d++){h(c[d])}return c},callExcelUploader:function(b){var a="eui.ux.grid.CsvUploader";return Util.commonPopup(null,"Excel Uploader",a,500,400,b,{},false).show()},callFileManager:function(a,b){var c=this;var e=Ext.create("Ext.ux.upload.Panel",{uploader:"Ext.ux.upload.uploader.FormDataUploader",uploaderOptions:{params:a,url:Config.fileuploadUrl},synchronous:true});var d=function(h,k){k.up("window").close();var j=0;var g={run:function(){if(h.length<=(j+1)){Ext.TaskManager.stop(g)}var i=h[j];j++},interval:1000};if(Ext.isBoolean(b)&&b==true){Ext.TaskManager.start(g)}};var f=Ext.create("Ext.window.Window",{height:330,width:560,layout:"fit",title:"File Manager",scrollable:false,maximizable:true,buttons:[{xtype:"button",text:"Close",handler:function(){this.up("window").close()}}],items:[{xtype:"tabpanel",items:[{xtype:"filemanager",title:"File List",fileParams:a},{title:"File Add",xtype:"uploaddialog",panel:e,listeners:{uploadcomplete:function(i,h,g,j){d(g,this)}}}]}]}).show();return f},fileClick:function(d,b,a){var c=new FormData();c.append("S_FUNC_CODE",d);c.append("FILE_MGT_CODE",b);this.fileClickApi(c,a,Util.fileDownloadUrl)},fileClickApi:function(c,a,b){var d=new XMLHttpRequest();d.open("POST",encodeURI(b));d.responseType="arraybuffer";d.onload=function(){if(this.status===200){var h=d.getResponseHeader("Content-Type");var g=new Blob([this.response],{type:h});if(typeof window.navigator.msSaveBlob!=="undefined"){window.navigator.msSaveBlob(g,filename)}else{var e=window.URL||window.webkitURL;var i=e.createObjectURL(g);if(a){var f=document.createElement("a");if(typeof f.download==="undefined"){window.location=i}else{f.href=i;f.download=a;document.body.appendChild(f);f.click()}}else{window.location=i}setTimeout(function(){e.revokeObjectURL(i)},100)}}};d.send(c)}});Ext.define("eui.button.Button",{extend:"Ext.button.Button",xtype:"euibutton",config:{iconCls:null,showText:true},localeProperties:["text","iconCls"],margin:"0 5 2 0",initComponent:function(){var a=this;if(!a.getShowText()){delete a.text}a.callParent(arguments)}});Ext.define("eui.container.BaseContainer",{extend:"Ext.container.Container",alias:"widget.euibasecontainer",mixins:[],scrollable:"y",layout:{type:"vbox",align:"stretch"},initComponent:function(){var a=this;a.callParent(arguments)}});Ext.define("eui.container.PopupContainer",{extend:"Ext.container.Container",alias:"widget.euipopupcontainer",parentCallBack:function(a,c,d){var b=this.__PARENT;if(!Ext.isEmpty(b)&&!Ext.isEmpty(b.callBack)){Ext.callback(b.callBack,b,[b,a,c||b.valueField,d||b.displayField]);b.fireEvent("popupsetvalues",b,a,c||b.valueField,d||b.displayField)}else{if(Ext.isFunction(this.__PARENT.popupCallback)){this.__PARENT.popupCallback([a,c,d])}}}});Ext.define("eui.container.Popup",{extend:"eui.container.PopupContainer",alias:"widget.euipopup",defaultListenerScope:true,listeners:{enterdblclick:function(){var c=this.down("grid");var a=c.getSelectionModel(),b=a.getSelection()[0],d=c.store.indexOf(b);c.fireEvent("itemdblclick",c,b)},keydown:function(b){var e=this.down("grid");var a=e.getSelectionModel(),c=a.getSelection()[0],f=e.store.indexOf(c),d=(b==40?1:-1);console.log(f+d);a.select(f+d);e.getView().focusRow(f+d);this.trigger.focus()},render:function(){var b=this,a=this.ownerCt;a.addListener("show","transform",b)}},transform:function(){var d=this,b=this.down("euigrid"),c=d.popupConfig.searchKeyField;var a=this.ownerCt.simpleMode;if(a){b.setMargin(0);d.down("euiform").setHidden(true);b.reconfigure(b.store,d.popupConfig.simpleColumns);b.hideHeaders=true;b.updateHideHeaders();b.store.getProxy().extraParams[c]=d.trigger.getValue();b.store.load();if(!d.popupConfig.multiSelect){d.down("toolbar").setHidden(true)}}else{b.setMargin(5);d.down("euiform").setHidden(false);if(!d.popupConfig.multiSelect){d.down("toolbar").setHidden(false)}b.reconfigure(b.store,d.popupConfig.normalColumns);b.hideHeaders=false;b.updateHideHeaders();b.store.getProxy().extraParams[c]=d.trigger.previousSibling().getValue();b.store.load();d.ownerCt.setHeight(d.popupConfig.height)}},parentCallBack:function(b,a){this.callParent([a]);this.fireEvent("popupclose")},onMultiRecordSet:function(){var a=this.down("grid"),c=a.getSelectionModel(),b=c.getSelection();if(b.length==0){return}this.parentCallBack(a,b)},onFormSend:function(c){var d=c.up("form"),b=d.getForm().getValues(),a=Ext.create("Ext.data.Model",b);this.parentCallBack(this,a)},defaults:{margin:5},layout:{type:"vbox",align:"stretch"},onSearch:function(){var c=this.down("form"),a=c.getForm().getValues(),b=this.down("grid"),d=b.store.getProxy().getExtraParams();d.page=1;d.start=0;Ext.apply(d,a);b.store.load()},initComponent:function(){var e=this,c=e.popupConfig,b=[],a={type:"buffered",remoteSort:true,fields:[],leadingBufferZone:50,pageSize:50,proxy:{type:"rest",url:c.proxyUrl,reader:{type:"json",rootProperty:"data"}}};var d={xtype:"euigrid",flex:1,selModel:{pruneRemoved:false},store:a,listeners:{itemdblclick:"parentCallBack"},forceFit:true,columns:{defaults:{width:120},items:[{text:"-",dataIndex:"temp"}]}};if(e.popupConfig.formConfig){Ext.apply(e.popupConfig.formConfig,{header:{xtype:"header",titlePosition:0,items:[{xtype:"button",handler:"onSearch",iconCls:"fa fa-search",text:"검색"}]},defaults:{listeners:{specialkey:function(g,f){if(f.getKey()==f.ENTER){e.onSearch(g)}}}}});b.push(e.popupConfig.formConfig)}if(e.popupConfig.multiSelect){Ext.apply(d,{selModel:{mode:"SIMPLE",selType:"checkboxmodel"}})}b.push(d);b.push({ui:"plain",xtype:"toolbar",items:["->",{width:100,iconCls:"fa fa-thumb-tack",xtype:"euibutton",handler:"onMultiRecordSet",text:"확인"},"->"]});Ext.apply(e,{items:b});this.callParent(arguments)}});Ext.define("eui.controller.InitController",{extend:"Ext.app.Controller",alias:"controller.spinit",constructor:function(a){a=a||{};if(this.globalUrlPrefix){Util.HurlPrefix=this.globalUrlPrefix}Util.localeStoreDisplayField=this.localeStoreDisplayField;Util.localeStoreValueField=this.localeStoreValueField;var b=Ext.create("Ext.data.Store",{fields:[],storeId:"i18n"});Ext.apply(a,{url:Util.HurlPrefix+this.localeStoreUrl,pSync:false,outDs:{data:Ext.getStore("i18n")}});if(this.localeStoreUrl){Util.CommonAjax(a)}Util.globalCheckLogin();this.callParent(this.processInitialController(a))},processInitialController:function(a){return a},init:function(a){console.log("init",this.localeUrl)}});Ext.define("eui.data.DirectStore",{extend:"Ext.data.DirectStore",constructor:function(a){var b=this;b.callParent([a]);if(b.proxy){var d=Ext.direct.Manager.getProvider("euiprovider");if(b.proxy.api){for(p in b.proxy.api){var c=b.proxy.api[p].substring(0,b.proxy.api[p].lastIndexOf("."));var e=b.proxy.api[p].substring(b.proxy.api[p].lastIndexOf(".")+1,b.proxy.api[p].length);if(!d.actions[c]){d.actions[c]=[{name:e,len:1}]}else{d.actions[c].push({name:e,len:1})}}d.initAPI()}if(b.proxy.directFn){var c=b.proxy.directFn.substring(0,b.proxy.directFn.lastIndexOf("."));var e=b.proxy.directFn.substring(b.proxy.directFn.lastIndexOf(".")+1,b.proxy.directFn.length);if(!d.actions[c]){d.actions[c]=[{name:e,len:1}]}else{d.actions[c].push({name:e,len:1})}d.initAPI()}}},getPostData:function(k,e,a){var j=this,b={deletedData:[],data:[]},k=k||false,c,g;function l(n,o,i){if(o.name==="id"){return}var m=i.get(o.name);if(o.type===Ext.data.Types.DATE&&o.dateFormat&&Ext.isDate(m)){n[o.name]=Ext.Date.format(m,o.dateFormat)}else{if(o.type===Ext.data.Types.BOOL.type){n[o.name]=m?e||"1":a||"0"}else{n[o.name]=m}}}function h(o){var s={},n=o.fields,q=n.items,t,m=q.length;for(var r=0;r<m;r++){t=q[r];l(s,t,o)}return s}if(k){c=j.getRange();g=c.length;for(var f=0;f<g;f++){var d=h(c[f]);d=Ext.apply(d,{__rowStatus:""});b.data.push(d)}}else{c=j.getNewRecords();g=c.length;for(var f=0;f<g;f++){var d=h(c[f]);d=Ext.apply(d,{__rowStatus:"I"});b.data.push(d)}c=j.getUpdatedRecords(),g=c.length;for(var f=0;f<g;f++){var d=h(c[f]);d=Ext.apply(d,{__rowStatus:"U"});b.data.push(d)}c=j.getRemovedRecords(),g=c.length;for(var f=0;f<g;f++){b.deletedData.push(h(c[f]))}}return b},getIsDirty:function(){return(this.getNewRecords().length>0||this.getUpdatedRecords().length>0||this.getRemovedRecords().length>0)}});Ext.define("eui.store.LocaleStore",{extend:"Ext.data.Store"});Ext.define("eui.data.validator.Format",{extend:"Ext.data.validator.Validator",alias:"data.validator.euiformat",type:"euiformat",config:{chkType:null,chkString:{K:/[ㄱ-ㅎ|ㅏ-ㅣ|가-힝]/,K_MSG:"한글만 허용합니다",E:/^[A-Z]*$/,E_MSG:"영문 대문자만 허용합니다",e:/^[a-z]*$/,e_MSG:"영문 소문자만 허용합니다",Ee:/^[A-Za-z]*$/,Ee_MSG:"영문 대소문자만 허용합니다",N:/^[0-9+]*$/,N_MSG:"숫자만 허용합니다",C:/[A-Za-z|ㄱ-ㅎ|ㅏ-ㅣ|가-힝]/,C_MSG:"일반문자(한글&알파벳)만 허용합니다"},message:null,matcher:undefined},validate:function(d){var c=this,f=this.getMatcher(),a=f&&f.test(d),g=c.getChkString()[c.getChkType()],e=c.getChkString()[c.getChkType()+"_MSG"];if(this.getChkType()){if(!Ext.isNumber(d)){d=d.replace(/(\s*)/g,"")}for(var b=0;b<d.length;b++){a=c.getChkString()[c.getChkType()].test(d.substring(b,b+1));if(!a){break}}}return a?a:this.getMessage()||e}});Ext.define("eui.form.CheckboxGroup",{extend:"Ext.form.CheckboxGroup",xtype:"euicheckboxgroup",mixins:["eui.mixin.FormField"],cellCls:"fo-table-row-td",width:"100%",setValue:function(k){var i=this,g=i.getBoxes(),j,a=g.length,f,c,e,d;if(!Ext.isArray(k)){for(var h in k){d=k[h]}if(!Ext.isArray(d)){d=[d]}k=d}i.batchChanges(function(){Ext.suspendLayouts();for(j=0;j<a;j++){f=g[j];c=f.getName();e=false;if(k){if(Ext.isArray(k)){e=Ext.Array.contains(k,f.inputValue)}else{e=k[c]}}f.setValue(e)}Ext.resumeLayouts(true)});return i},initComponent:function(){this.setAllowBlank();this.callParent(arguments)}});Ext.define("eui.form.FieldContainer",{extend:"Ext.form.FieldContainer",alias:"widget.euifieldcontainer",cellCls:"fo-table-row-td",width:"100%",layout:"column",defaults:{width:"50%"},initComponent:function(){var a=this;a.callParent(arguments)}});Ext.define("eui.form.Label",{extend:"Ext.form.Label",alias:"widget.euilabel",cellCls:"fo-table-row-th",allowBlank:true,width:"100%",localeProperties:["html","text"],initComponent:function(){var a=this;if(a.allowBlank===false){Ext.apply(a,{cls:"fo-required"})}a.callParent(arguments)}});Ext.define("eui.mixin.Panel",{extend:"Ext.Mixin",mixinConfig:{},config:{hiddenBtmTbar:false,defaultToolbarPosition:"top",defaultToolbarUi:"default"},applyButtonToolBar:function(a,b){var c=this;if(c.bbar||c.hiddenBtmTbar){return}if(b){Ext.each(b,function(e){if(e.insertBefore){a.unshift(e)}else{a.push(e)}})}a.unshift("->");var d=0;Ext.each(a,function(f,e){if(e>0&&(f.hidden==false||f.hidden===undefined)){d++}});if(d>0){if(Ext.isEmpty(c.dockedItems)){c.dockedItems=[]}console.log("me.getDefaultUi():",c.getDefaultToolbarUi());c.dockedItems.push({xtype:"toolbar",ui:c.getDefaultToolbarUi(),dock:c.getDefaultToolbarPosition(),items:a})}return a}});Ext.define("eui.form.Panel",{extend:"Ext.form.Panel",alias:"widget.euiform",localeProperties:["title"],requires:["eui.button.Button","Ext.layout.container.Column","eui.button.Button","Ext.layout.container.Table"],mixins:["eui.mixin.Panel"],cls:"eui-form-table",collapsed:false,collapsible:false,modelValidation:true,config:{hiddenBtmTbar:false,hiddenCloseBtn:true,hiddenHeader:false,hiddenSearchBtn:true,hiddenPrintBtn:true,hiddenDeleteBtn:true,hiddenSaveBtn:true,hiddenClearBtn:true,useTableLayout:true,tableColumns:4,hbuttons:null,useRespColumn:true,usePagingToolbar:false},initComponent:function(){var a=this;a.setTableLayout();if(a.iconCls){a.setHideHeaderICon(false)}if(a.title&&!a.hideHeaderICon){Ext.apply(a,{iconCls:"x-fa fa-pencil-square"})}a.callParent(arguments);a.on("afterrender",function(){a.isValid()},a,{delay:500});if(a.useRespColumn){a.on("resize",a.responsiveColumn)}},responsiveColumn:function(b,c,a){if(b.tableColumns==1){return}if(window.innerWidth<992){if(b.getLayout().columns!==1){b.beforeColumn=b.getLayout().columns;b.getLayout().columns=1;b.updateLayout()}}else{if(b.getLayout().columns==1){b.getLayout().columns=b.beforeColumn;b.updateLayout()}}},setBottomToolbar:function(){var b=this;var a=[{xtype:"euibutton",formBind:true,disabled:true,code:"search",iconCls:"x-fa fa-search-plus",text:"검색",hidden:b.getHiddenSearchBtn(),listeners:{click:{fn:function(d,f,c){b.fireEvent("baseformsearch",b)}}}},{xtype:"euibutton",formBind:true,code:"save",iconCls:"x-fa fa-save",text:"저장",hidden:b.getHiddenSaveBtn(),listeners:{click:{fn:function(d,f,c){b.fireEvent("baseformsave",b)}}}},{xtype:"euibutton",formBind:true,disabled:true,code:"delete",iconCls:"x-fa fa-eraser",text:"삭제",hidden:b.getHiddenDeleteBtn(),listeners:{click:{fn:function(d,f,c){b.fireEvent("baseformdelete",b)}}}},{xtype:"euibutton",code:"delete",text:"닫기",iconCls:"x-fa fa-sign-out",hidden:b.getHiddenCloseBtn(),handler:function(){var c=Util.getOwnerCt(this);if(Util.getOwnerCt(this).xtype==="window"){c.close()}else{Ext.Error.raise({msg:"닫기 버튼은 팝업에서만 사용가능합니다."})}}},{xtype:"euibutton",code:"delete",text:"출력",iconCls:"x-fa fa-print",hidden:b.getHiddenPrintBtn(),handler:function(){var c=Util.getOwnerCt(this);if(Util.getOwnerCt(this).xtype==="window"){c.close()}else{Ext.Error.raise({msg:"닫기 버튼은 팝업에서만 사용가능합니다."})}}},{xtype:"euibutton",code:"clear",text:"취소",iconCls:"x-fa fa-retweet",hidden:b.getHiddenClearBtn(),handler:function(){var c=Util.getOwnerCt(this);if(Util.getOwnerCt(this).xtype==="window"){c.close()}else{Ext.Error.raise({msg:"닫기 버튼은 팝업에서만 사용가능합니다."})}}}];this.applyButtonToolBar(a,b.otherButtons)},setTableLayout:function(){var a=this;if(a.getUseTableLayout()){Ext.apply(a,{layout:{type:"table",columns:a.getTableColumns(),tableAttrs:{style:{width:"100%"}}}})}},setHeader:function(){var a=this;var b={titlePosition:0,hidden:a.getHiddenHeader(),items:[{xtype:"euibutton",iconCls:"x-fa fa-print"},{xtype:"euibutton",iconCls:"x-fa fa-sign-out",listeners:{click:{fn:function(f,g,d){var c=a.getForm().getValues();Ext.iterate(c,function(e,h){c[e]=null});a.getForm().setValues(c);a.fireEvent("baseformreset",a)}}}}]};Ext.apply(a,{header:b})}});Ext.define("eui.form.PopUpFieldContainer",{extend:"eui.form.FieldContainer",alias:"widget.euipopupfieldcontainer",bindVar:{FIELD1:null,FIELD2:null},firstReadOnly:false,secondReadOnly:false,setPopupValues:Ext.emptyFn,listeners:{specialkey:"setSpecialKey",blur:"onBlur"},setSpecialKey:function(g,f,b){var d=this,c=this.down("#firstField"),a=this.down("#secondField");if(f.getKey()===Ext.EventObject.ENTER){if(!d.checkSingleResult(g)){c.suspendEvent("blur");if(g.simpleMode){if(a.isExpanded){if(a.getValue()!=a._tmpValue){a.fireEvent("load",{params:{key:a.getValue()}});a._tmpValue=a.getValue();a.picker.down("grid").store.getProxy().extraParams[d.searchKeyField]=a.getValue();a.picker.down("grid").store.load({})}else{a.picker.items.items[0].fireEvent("enterdblclick")}}else{a._tmpValue=a.getValue();a.expand(g.simpleMode)}}else{a.expand(g.simpleMode)}a.picker.on("hide",function(){c.resumeEvent("blur")})}}if(f.getKey()==40||f.getKey()==38){console.log("key... ",f.getKey());if(a.picker){a.expand(g.simpleMode);a.picker.items.items[0].fireEvent("keydown",f.getKey())}}},checkBlur:function(c){var b=this.down("#firstField"),a=this.down("#secondField");if(c.isFormField){if(c.originalValue!=c.getValue()){b.setValue("");a.setValue("")}}},checkSingleResult:function(b){var a=this;if(b.simpleMode){return false}if(Ext.isEmpty(b.getValue())){return false}var d={},c=false;d.page=1;d.start=0;d.limit=2;d[a.searchKeyField]=b.getValue();Util.CommonAjax({method:"POST",url:a.popupConfig.proxyUrl,params:d,pSync:false,pCallback:function(f,g,e){if(e.success&&e.total==1){c=true;a.setPopupValues(b,Ext.create("Ext.data.Model",e.data[0]));a.setOriginValues()}}});return c},setOriginValues:function(){var b=this.down("#firstField"),a=this.down("#secondField");b.resetOriginalValue();a.resetOriginalValue()},setPopupConfig:function(){var a=this;if(!a.popupConfig){a.popupConfig={}}Ext.applyIf(a.popupConfig,{searchKeyField:a.searchKeyField,multiSelect:a.multiSelect,proxyUrl:a.proxyUrl,simpleColumns:a.simpleColumns,normalColumns:a.normalColumns,formConfig:a.formConfig,width:a.popupWidth,height:a.popupHeight})},initComponent:function(){var a=this;a.setPopupConfig();Ext.apply(this,{items:[{bind:a.bindVar.FIELD1,hideLabel:true,itemId:"firstField",readOnly:a.firstReadOnly,xtype:"euitext",simpleMode:false,listeners:{blur:"checkBlur",afterrender:{delay:1000,fn:function(b){b.resetOriginalValue()}},render:function(){a.relayEvents(this,["specialkey"])}}},{xtype:"euipopuppicker",hideLabel:true,simpleMode:true,readOnly:a.secondReadOnly,triggerCls:"x-form-arrow-trigger",itemId:"secondField",bind:a.bindVar.FIELD2,valueField:"CUSTOMER_NAME",expand:a.expand,doAlign:a.doAlign,listeners:{blur:function(){a.checkBlur(this)},render:function(){a.relayEvents(this,["blur","specialkey"])},popupsetvalues:"setPopupValues"},popupConfig:a.popupConfig}]});this.callParent(arguments)},doAlign:function(){var e=this,c=e.picker,a="-above",d,b;if(e.picker.simpleMode){c.el.alignTo(e.triggerWrap,e.pickerAlign,e.pickerOffset)}else{c.el.alignTo(e.triggerWrap,e.pickerAlign,[-120,0])}d=c.floatParent?c.getOffsetsTo(c.floatParent.getTargetEl()):c.getXY();c.x=d[0];c.y=d[1];b=c.el.getY()<e.inputEl.getY();e.bodyEl[b?"addCls":"removeCls"](e.openCls+a);c[b?"addCls":"removeCls"](c.baseCls+a)},expand:function(a){var d=this,b,c,e;if(d.rendered&&!d.isExpanded&&!d.destroyed){b=d.bodyEl;c=d.getPicker();e=Ext.getDoc();c.setMaxHeight(c.initialConfig.maxHeight);c.simpleMode=(Ext.isEmpty(a)?d.simpleMode:a);if(c.simpleMode){d.matchFieldWidth=true;c.setWidth(d.bodyEl.getWidth());c.setHeight(100)}else{d.matchFieldWidth=false;c.setWidth(d.popupConfig.width);c.setHeight(d.popupConfig.height)}c.show();if(c.simpleMode){c.down("header").hide()}else{c.down("header").show()}d.isExpanded=true;d.alignPicker();b.addCls(d.openCls);if(!d.ariaStaticRoles[d.ariaRole]){if(!d.ariaEl.dom.hasAttribute("aria-owns")){d.ariaEl.dom.setAttribute("aria-owns",c.listEl?c.listEl.id:c.el.id)}d.ariaEl.dom.setAttribute("aria-expanded",true)}d.touchListeners=e.on({translate:false,touchstart:d.collapseIf,scope:d,delegated:false,destroyable:true});d.scrollListeners=Ext.on({scroll:d.onGlobalScroll,scope:d,destroyable:true});Ext.on("resize",d.alignPicker,d,{buffer:1});d.fireEvent("expand",d);d.onExpand()}}});Ext.define("eui.form.RadioGroup",{extend:"Ext.form.RadioGroup",xtype:"euiradiogroup",mixins:["eui.mixin.FormField"],cellCls:"fo-table-row-td",width:"100%",simpleValue:true,initComponent:function(){this.setAllowBlank();this.callParent(arguments)}});Ext.define("eui.form.field.Checkbox",{extend:"Ext.form.field.Checkbox",alias:"widget.euicheckbox",inputValue:"Y",uncheckedValue:"N",cellCls:"fo-table-row-td",width:"100%",initComponent:function(){var a=this;a.suspendEvent("change");a.callParent(arguments);a.on("beforerender",function(){a.resumeEvent("change")})},getValue:function(){var a=this.uncheckedValue,b=Ext.isDefined(a)?a:null;return this.checked?this.inputValue:b}});Ext.define("eui.form.field.ComboBoxController",{extend:"Ext.app.ViewController",alias:"controller.spcombo",onSelect:function(c,a){var b=this;if(c.column&&c.valueColumnDataIndex){b.getView().selectedRecord.set(c.valueColumnDataIndex,a.get(c.originalValueField))}b.nextBindFields(a)},beforeCheckParamValue:function(d){var j=this,c=this.getView(),i=c.store.getProxy().extraParams,h=this.getComboData();var e=c.checkAutoLoad();if(c.column){e=true}if(c.queryMode=="remote"&&(d.combo.lastQuery==undefined)&&e){d.combo.lastQuery=""}var b=Ext.getCmp(c.ownerNextBindFieldId);if(c.ownerNextBindVar&&c.column){if(b.column){var a=b.column.up("tablepanel"),g=a.getSelectionModel(),f=g.getLastSelected(),k=(b.valueColumnDataIndex?b.valueColumnDataIndex:b.column.dataIndex);console.log("이 콤보를 연계해 사용중인 콤보가 존재함.:",c.ownerNextBindFieldId,c.ownerNextBindParam,"변경전값:",b.getValue(),"변경후:",f.get(k));b.setValue(f.get(k))}h[c.ownerNextBindParam]=b.getValue()}if(Ext.Object.toQueryString(i)!=Ext.Object.toQueryString(h)){console.log("조건이 변경되었음.: ",Ext.Object.toQueryString(i),"||",Ext.Object.toQueryString(h));Ext.apply(c.store.getProxy().extraParams,h);delete d.combo.lastQuery;if(d.combo.useLocalFilter){d.combo.store.load()}}},enableEditor:function(c){var f=this.getView();var b=c.up("tablepanel");var e=b.findPlugin("cellediting");var a=b.getSelectionModel();var h=a.getLastSelected();var g=b.store.indexOf(h);var d=b.view.getNode(h);if(h){if(e){if(e.clicksToEdit==1){Ext.get(d).select(".x-grid-cell-"+c.getId()).elements[0].click()}else{b.editingPlugin.startEditByPosition({row:g,column:c.fullColumnIndex})}}return true}return false},nextBindFields:function(c){var d=this,e=this.getView();if(!e.nextBindFields){return}var b=Ext.Array.filter(Ext.ComponentQuery.query("[bind][isFormField]"),function(f){var g=true;if(e.getId()==f.getId()){g=false}return g});var a=Ext.Array.filter(Ext.ComponentQuery.query("gridcolumn"),function(f){var g=false;if(e.column&&e.column.up("tablepanel").getId()==f.ownerCt.grid.getId()&&f.config.editor){g=true}return g});Ext.each(a,function(f){b.push(f)});Ext.each(e.nextBindFields,function(f){var g=f.split("|"),h=(g.length==1?g[0]:g[1]);Ext.each(b,function(m){var k=Ext.ClassManager.getNameByAlias("widget."+m.xtype);var l=Ext.ClassManager.get(k);if(m.isFormField&&m.getBind()){if(m.getBind().hasOwnProperty("value")&&g[0]==m.getBind().value.stub.path){if(l.prototype.xtypesMap.euicombo){m.setValue(null);if(c){m.ownerNextBindVar=g[0];m.ownerNextBindParam=h;m.ownerNextBindFieldId=e.getId();m.proxyParams[h]=c.get((m.column?e.originalValueField:e.valueField));var n=true;if(m.column){n=d.enableEditor(m.column)}if(e.nextBindComboExpand&&n){Ext.defer(function(){Ext.get(m.getId()+"-triggerWrap").select("#"+m.getId()+"-trigger-picker").elements[0].click()},500)}}else{if(m.column){d.enableEditor(m.column);Ext.defer(function(){m.column.up("tablepanel").editingPlugin.completeEdit()},100)}m.clearValue()}}else{m.setValue(null)}}}else{if("Ext.grid.column.Column"==k){if(m.config.editor.bind=="{"+g[0]+"}"){console.log("editor render 여부.",m.hasEditor());var j=m.config.editor;if(!m.hasEditor()){console.log("editor 존재하지 않아 obj에 설정함. :",h,e.getId());var i=j.getProxyParams();i[h]=(c?c.get(e.originalValueField):null);j.setProxyParams=function(){return i};j.ownerNextBindVar=g[0];j.ownerNextBindParam=h;j.ownerNextBindFieldId=e.getId();d.enableEditor(m);if(e.nextBindComboExpand){Ext.defer(function(){var o=m.getEditor().getId();Ext.get(o+"-triggerWrap").select("#"+o+"-trigger-picker").elements[0].click()},500)}}}}}})})},clearValue:function(){var c=this,d=this.getView();if(d.column&&d.valueColumnDataIndex){var b=d.column.up("tablepanel");var a=b.getSelectionModel();var e=a.getLastSelected();e.set(d.valueColumnDataIndex,null)}c.nextBindFields(null)},getComboData:function(){var a=this,c={},b=this.getView();c[b.defaultParam]=b[b.defaultParam];Ext.each(b.relBindVars,function(d){var e=d.split("|"),g=(e.length==1?e[0]:e[1]),g=g.split("@")[0],f=d.split("@");c[g]=(f.length==2?f[1]:a.getViewModel().get(e[0]))});Ext.apply(c,b.getProxyParams());return c},createStore:function(d,c){var e=this,a=this.getView(),b=Ext.create("Ext.data.Store",{autoDestroy:true,autoLoad:a.checkAutoLoad(),storeId:a.generateUUID(),fields:c.fields,proxy:{type:a.proxyType,noCache:false,pageParam:false,startParam:false,limitParam:false,headers:{"Content-Type":"application/json;charset=utf-8"},paramsAsJson:true,actionMethods:{create:"POST",read:"POST",update:"POST",destroy:"POST"},url:c.url,reader:{type:"json",rootProperty:"data",transform:c.transform||false},extraParams:c.params}});d.bindStore(b);return b},init:function(){var b=this,a=this.getView();if(a.store.storeId!="ext-empty-store"){return}if(a.useLocalFilter){a.queryMode="local"}b.createStore(a,{url:a.proxyUrl,fields:[],params:b.getComboData()});b.getView().store.on("load",function(c){console.log("store load ::",c.getProxy().extraParams)})}});Ext.define("eui.form.field.ComboBox",{extend:"Ext.form.field.ComboBox",alias:"widget.euicombo",requires:["Util","eui.form.field.ComboBoxController"],controller:"spcombo",minChars:1,editable:false,emptyText:"선택하세요",cellCls:"fo-table-row-td",displayField:"NM",valueField:"CD",autoLoadOnValue:true,width:"100%",config:{nextBindComboExpand:true,proxyUrl:{},defaultParam:"groupCode",useLocalFilter:false,proxyParams:null,proxyType:"ajax",valueColumnDataIndex:null,relBindVars:null},valueNotFoundText:"검색결과가 존재하지 않습니다.",listeners:{select:"onSelect",beforequery:"beforeCheckParamValue"},initComponent:function(){var a=this;if(a.column&&a.valueColumnDataIndex){a.column.getView().ownerGrid.getCellEditor().on("beforeedit",function(c,b){a.selectedRecord=b.record});Ext.apply(a,{originalValueField:a.valueField,valueField:a.displayField})}a.callParent(arguments)},clearValue:function(){this.callParent(arguments);this.getController().clearValue()},generateUUID:function(){var b=new Date().getTime();var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d=(b+Math.random()*16)%16|0;b=Math.floor(b/16);return(e=="x"?d:(d&7|8)).toString(16)});return a},checkAutoLoad:function(){if(this.value){return true}if(this.getBind()&&this.getBind()["value"]&&this.getBind().value.stub.hadValue){return true}if(this.column&&!this.value){return true}return false}});Ext.define("eui.form.field.ComboBoxController_",{extend:"Ext.app.ViewController",alias:"controller.spcombo_",getLastSelectedRecord:function(c){if(!c){c=this.getView()}var b=c.column.up("tablepanel"),a=b.getSelectionModel(),d=a.getLastSelected();return d},onSelect:function(c,a){var b=this;if(c.column&&c.valueColumnDataIndex){var d=b.getLastSelectedRecord();d.set(c.valueColumnDataIndex,a.get(c.originalValueField))}b.nextBindFields(a)},beforeCheckParamValue:function(b){var c=this,e=this.getView(),h=e.store.getProxy().extraParams,d=this.getComboData();if(e.useLocalFilter&&b.combo.lastQuery==undefined&&!e.checkAutoLoad()){e.store.load({callback:function(){e.expand()}})}if(e.queryMode=="remote"&&(b.combo.lastQuery==undefined)&&e.checkAutoLoad()){b.combo.lastQuery=""}if(e.ownerNextBindVar&&e.column){var a=Ext.getCmp(e.ownerNextBindFieldId),g=c.getLastSelectedRecord(a),f=(a.valueColumnDataIndex?a.valueColumnDataIndex:a.column.dataIndex);a.setValue(g.get(f));d[e.ownerNextBindParam]=a.getValue()}if(Ext.Object.toQueryString(h)!=Ext.Object.toQueryString(d)){Ext.apply(e.store.getProxy().extraParams,d);delete b.combo.lastQuery;if(b.combo.useLocalFilter){b.combo.store.load()}}},getGrid:function(a){if(!a){a=this.getView()}return a.column.up("tablepanel")},enableEditor:function(c){var b=c.up("tablepanel"),a=b.getSelectionModel(),e=a.getLastSelected(),d=b.store.indexOf(e);if(e){b.editingPlugin.startEditByPosition({row:d,column:c.fullColumnIndex});return true}return false},getAllBindFormFields:function(a){return Ext.Array.filter(Ext.ComponentQuery.query("[bind][isFormField]"),function(b){var c=true;if(a.getId()==b.getId()){c=false}if(b.column){c=false}return c})},getAllEditorColumns:function(c){var b=this;var a=Ext.Array.filter(Ext.Array.clone(Ext.ComponentQuery.query("gridcolumn")),function(d){var e=false;if(b.getGrid().getId()==d.ownerCt.grid.getId()){e=true}return e});return a},setNextBindSpCombo:function(d,a,c,f,b){b.setValue(null);if(a){b.ownerNextBindVar=c[0];b.ownerNextBindParam=f;b.ownerNextBindFieldId=d.getId();b.proxyParams[f]=a.get((b.column?d.originalValueField:d.valueField));var e=true;if(b.column){e=this.enableEditor(b.column)}if(d.nextBindComboExpand&&e){Ext.defer(function(){Ext.get(b.getId()).select(".x-form-arrow-trigger").elements[0].click()},500)}}else{if(b.column){me.enableEditor(b);Ext.defer(function(){b.column.up("tablepanel").editingPlugin.completeEdit()},100)}b.clearValue()}},nextBindFields:function(b){var c=this,d=this.getView();if(!d.nextBindFields){return}var a=c.getAllBindFormFields(d);if(d.column){Ext.each(c.getAllEditorColumns(d),function(e){if(e.config.editor){a.push(e.getEditor())}})}console.log("targetFields",a);Ext.each(d.nextBindFields,function(e){var f=e.split("|"),g=(f.length==1?f[0]:f[1]);Ext.each(a,function(j){var h=Ext.ClassManager.getNameByAlias("widget."+j.xtype);var i=Ext.ClassManager.get(h);if(j.isFormField&&j.getBind()){if(j.getBind().hasOwnProperty("value")&&f[0]==j.getBind().value.stub.path){if(i.prototype.xtypesMap.spcombo){console.log("xtype:",j,f[0]);c.setNextBindSpCombo(d,b,f,g,j)}else{j.setValue(null)}}}else{}})})},clearValue:function(){var a=this,b=this.getView();if(b.column&&b.valueColumnDataIndex){var c=a.getLastSelectedRecord();c.set(b.valueColumnDataIndex,null)}a.nextBindFields(null)},getComboData:function(){var a=this,c={},b=this.getView();c[b.defaultParam]=b[b.defaultParam];if(b.column){}Ext.each(b.relBindVars,function(d){var e=d.split("|"),g=(e.length==1?e[0]:e[1]),g=g.split("@")[0],f=d.split("@");c[g]=(f.length==2?f[1]:a.getViewModel().get(e[0]))});Ext.apply(c,b.getProxyParams());return c},createStore:function(d,c){var e=this,a=this.getView(),b=Ext.create("Ext.data.Store",{autoDestroy:true,autoLoad:false,storeId:a.generateUUID(),fields:c.fields,proxy:{type:a.proxyType,noCache:false,pageParam:false,startParam:false,limitParam:false,headers:{"Content-Type":"application/json;charset=utf-8"},paramsAsJson:true,actionMethods:{create:"POST",read:"POST",update:"POST",destroy:"POST"},url:c.url,reader:{type:"json",rootProperty:"data",transform:c.transform||false},extraParams:c.params}});d.bindStore(b);return b},init:function(){var b=this,a=this.getView();if(a.store.storeId!="ext-empty-store"){return}a.setProxyParams();if(a.useLocalFilter){a.queryMode="local"}b.createStore(a,{url:a.proxyUrl,fields:[],params:b.getComboData()})}});Ext.define("eui.form.field.ComboBoxController_today",{extend:"Ext.app.ViewController",alias:"controller.spcombotoday",onSelect:function(e,a){var d=this;if(e.column&&e.valueColumnDataIndex){var c=e.column.up("tablepanel");var b=c.getSelectionModel();var f=b.getLastSelected();f.set(e.valueColumnDataIndex,a.get(e.originalValueField))}d.nextBindFields(a)},beforeCheckParamValue:function(d){var i=this,c=this.getView(),h=c.store.getProxy().extraParams,g=this.getComboData();if(c.useLocalFilter&&d.combo.lastQuery==undefined&&!c.checkAutoLoad()){c.store.load({callback:function(){c.expand()}})}if(c.queryMode=="remote"&&(d.combo.lastQuery==undefined)&&c.checkAutoLoad()){d.combo.lastQuery=""}if(c.ownerNextBindVar&&c.column){var b=Ext.getCmp(c.ownerNextBindFieldId),a=b.column.up("tablepanel"),f=a.getSelectionModel(),e=f.getLastSelected(),j=(b.valueColumnDataIndex?b.valueColumnDataIndex:b.column.dataIndex);b.setValue(e.get(j));g[c.ownerNextBindParam]=b.getValue()}console.log("조건 확인1: ",Ext.Object.toQueryString(h));console.log("조건 확인2: ",Ext.Object.toQueryString(g));if(Ext.Object.toQueryString(h)!=Ext.Object.toQueryString(g)){Ext.apply(c.store.getProxy().extraParams,g);delete d.combo.lastQuery;if(d.combo.useLocalFilter){d.combo.store.load()}}},enableEditor:function(c){var b=c.column.up("tablepanel");var a=b.getSelectionModel();var e=a.getLastSelected();var d=b.store.indexOf(e);if(e){b.editingPlugin.startEditByPosition({row:d,column:c.column.fullColumnIndex});return true}return false},nextBindFields:function(c){var e=this,f=this.getView();if(!f.nextBindFields){return}var b=Ext.Array.filter(Ext.ComponentQuery.query("[bind]"),function(g){var h=true;if(f.getId()==g.getId()){h=false}if(g.column){h=false}return h});var a=Ext.Array.filter(Ext.ComponentQuery.query("gridcolumn"),function(g){var h=false;if(f.column&&f.column.up("tablepanel").getId()==g.ownerCt.grid.getId()&&g.getEditor()){h=true}return h});console.log("editorColumn",a);var d=Ext.Array.filter(Ext.ComponentQuery.query("hcombobox[isFormField]"),function(g){var h=true;return h});console.log("targetFields2",d);Ext.each(d,function(g){console.log("combo:",g.rendered,g.getId())});Ext.each(a,function(g){b.push(g.getEditor())});Ext.each(f.nextBindFields,function(g){var h=g.split("|"),i=(h.length==1?h[0]:h[1]);Ext.each(b,function(l){var j=Ext.ClassManager.getNameByAlias("widget."+l.xtype);var k=Ext.ClassManager.get(j);if(l.isFormField&&l.getBind()){if(l.getBind().hasOwnProperty("value")&&h[0]==l.getBind().value.stub.path){if(k.prototype.xtypesMap.spcombo){l.setValue(null);if(c){l.ownerNextBindVar=h[0];l.ownerNextBindParam=i;l.ownerNextBindFieldId=f.getId();console.log(l.proxyParams,c,l.column,f.originalValueField,f.valueField);l.proxyParams[i]=c.get((l.column?f.originalValueField:f.valueField));var m=true;if(l.column){m=e.enableEditor(l)}if(f.nextBindComboExpand&&m){Ext.defer(function(){},500)}}else{if(l.column){e.enableEditor(l);Ext.defer(function(){l.column.up("tablepanel").editingPlugin.completeEdit()},100);l.clearValue()}}}else{l.setValue(null)}}}else{}})})},clearValue:function(){var c=this,d=this.getView();if(d.column&&d.valueColumnDataIndex){var b=d.column.up("tablepanel");var a=b.getSelectionModel();var e=a.getLastSelected();e.set(d.valueColumnDataIndex,null)}c.nextBindFields(null)},getComboData:function(){var a=this,c={},b=this.getView();c[b.defaultParam]=b[b.defaultParam];if(b.column){}Ext.each(b.relBindVars,function(d){var e=d.split("|"),g=(e.length==1?e[0]:e[1]),g=g.split("@")[0],f=d.split("@");c[g]=(f.length==2?f[1]:a.getViewModel().get(e[0]))});Ext.apply(c,b.getProxyParams());return c},createStore:function(d,c){var e=this,a=this.getView(),b=Ext.create("Ext.data.Store",{autoDestroy:true,autoLoad:a.checkAutoLoad(),storeId:a.generateUUID(),fields:c.fields,proxy:{type:a.proxyType,noCache:false,pageParam:false,startParam:false,limitParam:false,headers:{"Content-Type":"application/json;charset=utf-8"},paramsAsJson:true,actionMethods:{create:"POST",read:"POST",update:"POST",destroy:"POST"},url:c.url,reader:{type:"json",rootProperty:"data",transform:c.transform||false},extraParams:c.params}});d.bindStore(b);return b},init:function(){var b=this,a=this.getView();if(a.store.storeId!="ext-empty-store"){return}a.setProxyParams();if(a.useLocalFilter){a.queryMode="local"}b.createStore(a,{url:a.proxyUrl,fields:[],params:b.getComboData()})}});Ext.define("eui.form.field.ComboBox_",{extend:"Ext.form.field.ComboBox",alias:"widget.spcombo_",requires:["Util","eui.form.field.ComboBoxController"],controller:"spcombo",hideLabel:true,minChars:1,editable:false,emptyText:"선택하세요",cellCls:"fo-table-row-td",displayField:"NM",valueField:"CD",autoLoadOnValue:true,width:"100%",config:{nextBindComboExpand:true,proxyUrl:{},defaultParam:"groupCode",useLocalFilter:true,proxyParams:null,proxyType:"ajax",valueColumnDataIndex:null,relBindVars:null},triggers:{arrow:{cls:"x-form-clear-trigger",handler:"clearValue",scope:"this"}},valueNotFoundText:"검색결과가 존재하지 않습니다.",listeners:{select:"onSelect",beforequery:"beforeCheckParamValue"},initComponent:function(){var a=this;console.log("initComponent..",a.getId());if(a.column&&a.valueColumnDataIndex){Ext.apply(a,{originalValueField:a.valueField,valueField:a.displayField})}a.callParent(arguments);a.on("afterrender",function(){Ext.each(Ext.Array.clone(Ext.ComponentQuery.query("gridcolumn")),function(c,b){if(c.hasOwnProperty("editor")){console.log(c.getEditor())}})})},setProxyParams:function(){this.proxyParams={}},clearValue:function(){this.callParent(arguments);this.getController().clearValue()},generateUUID:function(){var b=new Date().getTime();var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d=(b+Math.random()*16)%16|0;b=Math.floor(b/16);return(e=="x"?d:(d&7|8)).toString(16)});return a},checkAutoLoad:function(){if(this.value){return true}if(this.getBind()&&this.getBind()["value"]&&this.getBind().value.stub.hadValue){return true}return false}});Ext.define("eui.form.field.ComboBox_today",{extend:"Ext.form.field.ComboBox",alias:"widget.spcombotoday",requires:["Util","eui.form.field.ComboBoxController"],controller:"spcombo",hideLabel:true,minChars:1,editable:false,emptyText:"선택하세요",cellCls:"fo-table-row-td",displayField:"NM",valueField:"CD",autoLoadOnValue:true,width:"100%",lastQuery:"",config:{nextBindComboExpand:true,proxyUrl:{},defaultParam:"groupCode",useLocalFilter:false,proxyParams:null,proxyType:"ajax",valueColumnDataIndex:null,relBindVars:null},triggers:{arrow:{cls:"x-form-clear-trigger",handler:"clearValue",scope:"this"}},valueNotFoundText:"검색결과가 존재하지 않습니다.",listeners:{select:"onSelect",beforequery:"beforeCheckParamValue"},initComponent:function(){var a=this;console.log("initComponent..",a.getId());if(a.column&&a.valueColumnDataIndex){Ext.apply(a,{originalValueField:a.valueField,valueField:a.displayField})}a.callParent(arguments);a.on("afterrender",function(){Ext.each(Ext.Array.clone(Ext.ComponentQuery.query("gridcolumn")),function(c,b){})})},setProxyParams:function(){this.proxyParams={}},clearValue:function(){this.callParent(arguments);this.getController().clearValue()},generateUUID:function(){var b=new Date().getTime();var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d=(b+Math.random()*16)%16|0;b=Math.floor(b/16);return(e=="x"?d:(d&7|8)).toString(16)});return a},checkAutoLoad:function(){if(this.value){return true}if(this.getBind()&&this.getBind()["value"]&&this.getBind().value.stub.hadValue){return true}return false}});Ext.define("eui.form.field.Date",{extend:"Ext.form.field.Date",alias:"widget.euidate",submitFormat:"Ymd",format:"Y-m-d",altFormats:"Ymd",dateNum:null,width:"100%",cellCls:"fo-table-row-td",initComponent:function(){var a=this;var b=a.dateNum;a.callParent(arguments);if(!Ext.isEmpty(b)){a.setValue(a.dayCal(new Date(),b))}},dayCal:function(b,a){b.setDate(b.getDate()+a);return b}});Ext.define("eui.form.field.Display",{extend:"Ext.form.field.Display",alias:"widget.euidisplay",width:"100%",cellCls:"fo-table-row-td"});Ext.define("eui.form.field.File",{extend:"Ext.form.field.File",alias:"widget.euifile",width:"100%",cellCls:"fo-table-row-td"});Ext.define("eui.form.field.HtmlEditor",{extend:"Ext.form.field.HtmlEditor",alias:"widget.euihtmleditor",width:"100%",height:100,cellCls:"fo-table-row-td"});Ext.define("eui.form.field.Month",{extend:"Ext.form.field.Date",alias:"widget.monthfield",requires:["Ext.picker.Month"],cellCls:"fo-table-row-td",width:"100%",format:"Y.m",alternateClassName:["Ext.form.MonthField","Ext.form.Month"],selectMonth:null,createPicker:function(){var a=this,b=Ext.String.format;return Ext.create("Ext.picker.Month",{pickerField:a,ownerCt:a.ownerCt,renderTo:document.body,floating:true,hidden:true,focusOnShow:true,minDate:a.minValue,maxDate:a.maxValue,disabledDatesRE:a.disabledDatesRE,disabledDatesText:a.disabledDatesText,disabledDays:a.disabledDays,disabledDaysText:a.disabledDaysText,format:"Y.m",showToday:a.showToday,startDay:a.startDay,minText:b(a.minText,a.formatDate(a.minValue)),maxText:b(a.maxText,a.formatDate(a.maxValue)),listeners:{select:{scope:a,fn:a.onSelect},monthdblclick:{scope:a,fn:a.onOKClick},yeardblclick:{scope:a,fn:a.onOKClick},OkClick:{scope:a,fn:a.onOKClick},CancelClick:{scope:a,fn:a.onCancelClick}},keyNavConfig:{esc:function(){a.collapse()}}})},onCancelClick:function(){var a=this;a.selectMonth=null;a.collapse()},onOKClick:function(){var a=this;if(a.selectMonth){console.log("value:",a.selectMonth);a.setValue(a.selectMonth);a.fireEvent("select",a,a.selectMonth)}a.collapse()},onSelect:function(a,c){var b=this;b.selectMonth=new Date((c[0]+1)+"/1/"+c[1]);console.log("selectMonth:",b.selectMonth)}});Ext.define("eui.form.field.Number",{extend:"Ext.form.field.Number",alias:"widget.euinumber",cellCls:"fo-table-row-td",hideTrigger:true,mouseWheelEnabled:false,fieldStyle:"text-align: right",decimalPrecision:0,useThousandSeparator:true,submitLocaleSeparator:false,value:0,width:"100%",initComponent:function(){var a=this;a.enableKeyEvents=true;a.callParent(arguments);a.setInterceptor(a);a.addListener("focus",function(){if(this.readOnly||this.disabled){return}this.setRawValue(this.value);if(!Ext.isWebKit){if(!!a.selectOnFocus){this.selectText()}}})},setInterceptor:function(a){Ext.Function.interceptAfter(a,"postBlur",function(d){var c=this,b=c.hasActiveError();delete c.needsValidateOnEnable;c.unsetActiveError();if(b){c.setError("");c.setValue("")}})},toRawNumber:function(a){return String(a).replace(this.decimalSeparator,".").replace(new RegExp(Ext.util.Format.thousandSeparator,"g"),"")},getErrors:function(d){if(!this.useThousandSeparator){return this.callParent(arguments)}var c=this,f=[],e=Ext.String.format,b="",a;d=Ext.isDefined(d)?d:this.processRawValue(this.getRawValue());if(d.length<1){return f}d=c.toRawNumber(d);b=d.replace(this.decimalSeparator,"");f=Ext.form.field.Text.prototype.getErrors.apply(c,[b]);if(isNaN(d.replace(Ext.util.Format.thousandSeparator,""))){f.push(e(c.nanText,d))}a=c.parseValue(d);if(c.minValue===0&&a<0){f.push(this.negativeText)}else{if(a<c.minValue){f.push(e(c.minText,c.minValue))}}if(a>c.maxValue){f.push(e(c.maxText,c.maxValue))}return f},getSubmitValue:function(){if(!this.useThousandSeparator){return this.callParent(arguments)}var a=this,b=a.callParent();if(!a.submitLocaleSeparator){b=a.toRawNumber(b)}return b},setMinValue:function(b){if(!this.useThousandSeparator){return this.callParent(arguments)}var a=this,c;a.minValue=Ext.Number.from(b,Number.NEGATIVE_INFINITY);a.toggleSpinners();if(a.disableKeyFilter!==true){c=a.baseChars+"";if(a.allowExponential){c+=a.decimalSeparator+"e+-"}else{c+=Ext.util.Format.thousandSeparator;if(a.allowDecimals){c+=a.decimalSeparator}if(a.minValue<0){c+="-"}}c=Ext.String.escapeRegex(c);a.maskRe=new RegExp("["+c+"]");if(a.autoStripChars){a.stripCharsRe=new RegExp("[^"+c+"]","gi")}}},parseValue:function(a){if(!this.useThousandSeparator){return this.callParent(arguments)}a=parseFloat(this.toRawNumber(a));return isNaN(a)?null:a},exNumber:function(g,d){var c=Ext.util.Format,z=/<\/?[^>]+>/gi,A=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,x=/\r?\n/g,f=/[^\d\.]/g,o;if(!d){return g}g=Ext.Number.from(g,NaN);if(isNaN(g)){return""}var y=c.thousandSeparator,l=c.decimalSeparator,a=g<0,h,e,k,b,s,t,r,q,u;g=Math.abs(g);if(d.substr(d.length-2)=="/i"){if(!o){o=new RegExp("[^\\d\\"+c.decimalSeparator+"]","g")}d=d.substr(0,d.length-2);h=d.indexOf(y)!=-1;e=d.replace(o,"").split(l)}else{h=d.indexOf(",")!=-1;e=d.replace(f,"").split(".")}if(e.length>2){}else{if(e.length>1){g=Ext.Number.toFixed(g,e[1].length)}else{g=Ext.Number.toFixed(g,0)}}k=g.toString();e=k.split(".");if(h){b=e[0];s=[];t=b.length;r=Math.floor(t/3);q=b.length%3||3;for(u=0;u<t;u+=q){if(u!==0){q=3}s[s.length]=b.substr(u,q);r-=1}k=s.join(y);if(e[1]){k+=l+e[1]}}else{if(e[1]){k=e[0]+l+e[1]}}if(a){a=k.replace(/[^1-9]/g,"")!==""}return(a?"-":"")+d.replace(/[\d,?\.?]+/,k)},valueToRaw:function(c){if(!this.useThousandSeparator){return this.callParent(arguments)}var b=this;var d="000,000";for(var a=0;a<b.decimalPrecision;a++){if(a==0){d+="."}d+="#"}c=b.parseValue(Ext.util.Format.number(c.toString(),d));c=b.fixPrecision(c);c=Ext.isNumber(c)?c:parseFloat(b.toRawNumber(c));c=isNaN(c)?"":Ext.util.Format.number(c.toString(),d).replace(".",b.decimalSeparator);return c}});Ext.define("eui.form.field.PopUpPicker",{extend:"Ext.form.field.Picker",alias:"widget.euipopuppicker",triggerCls:"x-form-search-trigger",cellCls:"fo-table-row-td",callBack:"onTriggerCallback",defaultListenerScope:true,config:{simpleMode:false,displayField:"NAME",valueField:"CODE"},matchFieldWidth:false,onTriggerCallback:function(c,a,b,d){if(!Ext.isArray(a)){this.setValue(a.get(this.getValueField()))}},enableKeyEvents:true,listeners:{popupclose:{delay:100,scope:"this",fn:"collapse"},afterrender:{delay:1000,fn:function(a){a.resetOriginalValue()}}},createPicker:function(b){var a=this;if(!a.picker){a.picker=Ext.create("Ext.panel.Panel",{title:a.popupConfig.title,floating:true,defaultFocus:"textfield",listeners:{beforeshow:function(){a.suspendEvent("blur")},hide:function(){a.resumeEvent("blur")}},height:(a.simpleMode?300:a.popupConfig.height),width:a.popupConfig.width,layout:"fit",items:[{xtype:(a.popupConfig.popupWidget?a.popupConfig.popupWidget:"euipopup"),height:(a.simpleMode?290:a.popupConfig.height-10),tableColumns:2,trigger:a,valueField:a.valueField,popupConfig:a.popupConfig,__PARENT:a,__PARAMS:{popupConfig:a.popupConfig},multiReturnValue:false}]});a.relayEvents(a.picker.items.items[0],["popupclose"])}return a.picker}});Ext.define("eui.form.field.PopupTrigger",{extend:"Ext.form.field.Text",alias:"widget.euipopuptrigger",hideLabel:true,config:{tempTitle:null,title:""},cellCls:"fo-table-row-td",displayField:"ENG_VALUE",valueField:"DT_CODE",triggers:{search:{cls:"x-form-search-trigger",handler:"onTriggerClick",scope:"this"}},pConfigs:{DEFAULT:{width:600,height:400,popupClass:"eui.ux.popup.DefaultPopup",autoSearch:true,url:"api/COM050101SVC/getCode",convertparam:function(a,b){var c={};Ext.each(a.formConfig,function(d){if(d.singleCheckParam){c[d.name]=d.value=b.getValue()}});return{groupCode:a.groupCode,SQL:Ext.apply(c,a.sql)}}},NONE:{}},selectedRecord:Ext.emptyFn,callBack:"onTriggerCallback",validateConfig:function(){},setpopupConfig:function(){},checkSingleResult:function(a){},onTriggerCallback:function(c,a,b,d){c.setValues(a.get(b),a.get(d),[a])},setValues:function(c,b,a){this.codeOldValue=this.getValue(),this.codeNewValue=c,this.nameOldValue=((this.nextSibling()&&this.nextSibling().xtype=="sptext")?this.nextSibling().getValue():""),this.nameNewValue=b;this.setValue(c);this.fireEvent("select",this,c,b,a,this.codeOldValue,this.nameOldValue)},onTriggerClick:function(){var b=this;var a={trigger:this,popupConfig:b.popupConfig,multiReturnValue:this.multiReturnValue,selectedRecord:this.selectedRecord()};b.validateConfig();Ext.apply(a,this.setSingleRowCondition());if(!b.popupConfig.title&&b.getTempTitle()){b.popupConfig.title=b.getTempTitle()}Util.commonPopup(this,b.popupConfig.title,b.popupConfig.popupClass,b.popupConfig.width,b.popupConfig.height,a,null,false).show()},initComponent:function(){var a=this;Ext.apply(a,{enableKeyEvents:true});a.setpopupConfig();a.callParent(arguments);a.addListener("specialkey",this.setSpecialKey,this);a.on("blur",a.onBlurHandler,this,{scope:this})},resetValues:function(){var a=this;if(!a.readOnly){a.setValue();if(a.nextSibling()){a.nextSibling().setValue();a.resetNextEditField()}else{if(a.column){}}}},onBlurHandler:function(){var b=this;var a=b.up("grid");if(a){}else{if((b.getValue()!=this.codeNewValue)&&!Ext.isEmpty(this.codeNewValue)){b.resetValues()}}},setSingleRowCondition:function(){},setSpecialKey:function(d,c,a){var b=this;if(c.getKey()===Ext.EventObject.ENTER&&!Ext.isEmpty(this.getValue())){console.log("setSpecialKey:",b.popupConfig.groupCode,d.id);if(!this.checkSingleResult(d)){d.onTriggerClick()}}},resetNextEditField:function(){var d=this;if(d.nextEditField){var b=d.up("grid");var c=b.findPlugin("cellediting");if(b){var a=b.getSelectionModel();selectedRecord=a.getLastSelected();selectedRecord.set(d.nextEditField,"");Ext.each(b.columns,function(f){if(d.nextEditField==f.dataIndex){c.startEdit(selectedRecord,f)}})}else{var e=Util.getOwnerCt(d).down("[searchId="+d.nextEditField+"]");if(!Ext.isEmpty(e)){e.setValue("")}}}}});Ext.define("eui.form.field.PopupTrigger2",{extend:"Ext.form.field.Text",alias:"widget.sppopup2",hideLabel:true,config:{tempTitle:null},cellCls:"fo-table-row-td",displayField:"ENG_VALUE",valueField:"DT_CODE",triggers:{search:{cls:"x-form-search-trigger",handler:"onTriggerClick",scope:"this"}},singleRowCheckParamName:"SEARCH_VALUE",codeNewValue:null,multiReturnValue:false,pType:"DEFAULT",pConfigs:{DEFAULT:{width:600,height:400,popupClass:"eui.ux.popup.DefaultPopup",autoSearch:true,url:"api/COM050101SVC/getCode",convertparam:function(b,a){var c={};Ext.each(b.formConfig,function(d){if(d.singleCheckParam){c[d.name]=d.value=a.getValue()}});return{groupCode:b.groupCode,SQL:Ext.apply(c,b.sql)}}},NONE:{}},selectedRecord:Ext.emptyFn,callBack:"onTriggerCallback",validateConfig:function(){if(!this.popupOption.popupClass){Ext.Error.raise({msg:"호출할 대상 팝업의 클래스명이 설정되지 않았습니다."})}},setPopupOption:function(){var b=this,a=Ext.clone(b.pConfigs[b.pType]);Ext.apply(a,b.popupOption);b.popupOption=a},checkSingleResult:function(d){var c=this,a=c.popupOption;if(!Ext.isFunction(a.convertparam)){a.convertparam=function(f){return{}||f.params}}var e=Ext.apply(a.convertparam(a,c),c.setSingleRowCondition());if(Ext.isEmpty(this.getValue())){return false}if(Ext.isEmpty(a.url)){return false}var b=false;Util.CommonAjax({url:a.url,params:e,pSync:false,pCallback:function(g,j,h,i){if(h&&h.data.length==1){var f=Ext.create("Ext.data.Model",h.data[0]);c.onTriggerCallback(c,f,c.valueField,c.displayField);b=true}else{b=false}}});return b},onTriggerCallback:function(e,c,a,b){if(c.isModel){e.setValues(c.get(a),c.get(b),[c])}else{if(Ext.isArray(c)){var d={code:"",name:""};Ext.each(c,function(i,f){var h=i.get(a),g=i.get(b);if(f==0){d.code=h;d.name=g}else{d.code=d.code+","+h;d.name=d.name+","+g}});e.setValues(d.code,d.name,c)}}},setValues:function(e,c,b){this.codeOldValue=this.getValue(),this.codeNewValue=e,this.nameOldValue=((this.nextSibling()&&this.nextSibling().xtype=="sptextfield")?this.nextSibling().getValue():""),this.nameNewValue=c;this.setValue(e);if(this.column){var d=this.column.up("grid");var a=d.getSelectionModel();a.getLastSelected().set(this.column.dataIndex,e)}this.resetNextEditField();if(this.nextSibling()&&this.nextSibling().isFormField){this.fireEvent("popupvaluechange",this,this.codeNewValue,this.codeOldValue,this.nameNewValue,this.nameOldValue,b)}else{this.fireEvent("popupvaluechange",this,e,c,b)}},onTriggerClick:function(){var b=this;var a={trigger:this,popupOption:b.popupOption,multiReturnValue:this.multiReturnValue,selectedRecord:this.selectedRecord()};b.validateConfig();Ext.apply(a,this.setSingleRowCondition());if(!b.popupOption.title&&b.getTempTitle()){b.popupOption.title=b.getTempTitle()}Util.commonPopup(this,b.popupOption.title,b.popupOption.popupClass,b.popupOption.width,b.popupOption.height,a,null,true).show();this.fireEvent("ontriggerclick",this,event)},initComponent:function(){var a=this;Ext.apply(a,{enableKeyEvents:true});if(a.valueField){Ext.apply(a,{valueField:a.valueField})}if(a.displayField){Ext.apply(a,{displayField:a.displayField})}a.setPopupOption();a.callParent(arguments);a.addListener("specialkey",this.setSpecialKey,this);a.on("blur",a.onBlurHandler,this,{scope:this});a.on("afterrender",function(){var c=this;if("sppopuptriggerset"===this.ownerCt.xtype||"sptriggercombo"===this.ownerCt.xtype){c=this.ownerCt}var b=c.previousSibling();if(b&&b.xtype==="euilabel"){this.setTempTitle(b.text)}if(this.ownerCt.xtype==="editor"){this.setTempTitle(this.ownerCt.context.column.text)}})},resetValues:function(){var a=this;if(!a.readOnly){a.setValue();if(a.nextSibling()){a.nextSibling().setValue();a.resetNextEditField()}else{if(a.column){Ext.defer(function(){},10)}}}},onBlurHandler:function(){var b=this;var a=b.up("grid");if(a){}else{if((b.getValue()!=this.codeNewValue)&&!Ext.isEmpty(this.codeNewValue)){b.resetValues()}}},setSingleRowCondition:function(){if(this.popupOption.singleRowCheckParamName){this.singleRowCheckParamName=this.popupOption.singleRowCheckParamName}var a={};a[this.singleRowCheckParamName]=this.getValue();if(!Ext.isEmpty(this.popupOption.params)){Ext.apply(a,this.popupOption.params)}return a},setSpecialKey:function(d,c,a){var b=this;if(c.getKey()===Ext.EventObject.ENTER&&!Ext.isEmpty(this.getValue())){console.log("setSpecialKey:",b.popupOption.groupCode,d.id);if(!this.checkSingleResult(d)){d.onTriggerClick()}}},resetNextEditField:function(){var d=this;if(d.nextEditField){var b=d.up("grid");var c=b.findPlugin("cellediting");if(b){var a=b.getSelectionModel();selectedRecord=a.getLastSelected();selectedRecord.set(d.nextEditField,"");Ext.each(b.columns,function(f){if(d.nextEditField==f.dataIndex){c.startEdit(selectedRecord,f)}})}else{var e=Util.getOwnerCt(d).down("[searchId="+d.nextEditField+"]");if(!Ext.isEmpty(e)){e.setValue("")}}}}});Ext.define("eui.form.field.PopupTriggerSet",{extend:"eui.form.FieldContainer",alias:"widget.sppopupset",requires:["eui.form.field.PopupTrigger"],codeFieldName:null,textFieldName:null,setCallBackData:function(d,f,c,b,e,a){this.down("sptext").setValue(c)},bindVar:{CD:null,NM:null},initComponent:function(){var b=this;var a={width:"60%",allowBlank:b.allowBlank||true,name:b.codeFieldName,xtype:"sppopup",bind:b.bindVar.CD,listeners:{select:{fn:"setCallBackData",scope:b}}};if(b.valueField){Ext.apply(a,{valueField:b.valueField})}if(b.displayField){Ext.apply(a,{displayField:b.displayField})}if(b.popupConfig){Ext.apply(a,{popupConfig:b.popupConfig})}var c=Ext.widget("sppopup",a);b.relayEvents(c,["select"]);Ext.apply(b,{items:[c,{name:b.textFieldName,allowBlank:b.allowBlank||true,width:"40%",readOnly:true,bind:b.bindVar.NM,xtype:"euitext"}]});b.callParent(arguments)}});Ext.define("eui.form.field.PopupTriggerSet2",{extend:"Ext.form.FieldContainer",alias:"widget.sppopupset2",requires:["eui.form.field.PopupTrigger"],codeFieldName:null,textFieldName:null,setCallBackData:function(d,f,b,c,e,a){this.down("sptextfield").setValue(c);this.fireEvent("popupvaluechange",d,f,b,c,e,a)},bindVar:{CD:null,NM:null},width:"100%",cellCls:"fo-table-row-td",initComponent:function(){var b=this;var a={width:"40%",allowBlank:b.allowBlank||true,name:b.codeFieldName,xtype:"sppopup",bind:b.bindVar.CD,listeners:{popupvaluechange:{fn:"setCallBackData",scope:b}}};Ext.apply(a,{popupOption:b.popupOption});if(b.valueField){Ext.apply(a,{valueField:b.valueField})}if(b.pType){Ext.apply(a,{pType:b.pType})}if(b.displayField){Ext.apply(a,{displayField:b.displayField})}if(b.popupOption){Ext.apply(a,{popupOption:b.popupOption})}Ext.apply(b,{layout:"column",items:[a,{name:b.textFieldName,allowBlank:b.allowBlank||true,width:"60%",readOnly:true,bind:b.bindVar.NM,xtype:"euitext"}]});b.callParent(arguments)}});Ext.define("eui.form.field.Radio",{extend:"Ext.form.field.Radio",alias:"widget.euiradio",cellCls:"fo-table-row-td",initComponent:function(){var a=this;a.callParent(arguments)},getValue:function(){return this.getSubmitValue()}});Ext.define("eui.form.field.Text",{extend:"Ext.form.field.Text",alias:"widget.euitext",cellCls:"fo-table-row-td",width:"100%",fieldStyle:{display:"inherit"}});Ext.define("eui.form.field.TextArea",{extend:"Ext.form.field.TextArea",alias:"widget.euitextarea",cellCls:"fo-table-row-td",width:"100%",height:100,initComponent:function(){var a=this;a.callParent(arguments)}});Ext.define("eui.form.field.Trigger",{extend:"Ext.form.field.Text",alias:"widget.euitrigger",cellCls:"fo-table-row-td",triggers:{search:{handler:"onTriggerClick",scope:"this"}},onTriggerClick:function(){this.setValue("");this.fireEvent("ontriggerclick",this,event)},initComponent:function(){var a=this;a.callParent(arguments)}});Ext.define("eui.form.field.TriggerCombo",{extend:"Ext.form.FieldContainer",alias:"widget.sptriggercombo",requires:["eui.form.field.PopupTrigger"],codeFieldName:null,textFieldName:null,comboFieldName:null,setCallBackData:function(d,f,b,c,e,a){this.down("hcombobox").setValue(c);this.fireEvent("popupvaluechange",d,f,b,c,e,a)},width:"100%",bindVar:{CD:null,NM:null},cellCls:"fo-table-row-td",initComponent:function(){var b=this;var a={width:"40%",allowBlank:b.allowBlank||true,name:b.codeFieldName,xtype:"sppopuptrigger",bind:b.bindVar.CD,listeners:{popupvaluechange:{fn:"setCallBackData",scope:b}}};Ext.apply(a,{popupOption:b.popupOption});if(b.valueField){Ext.apply(a,{valueField:b.valueField})}if(b.pType){Ext.apply(a,{pType:b.pType})}if(b.displayField){Ext.apply(a,{displayField:b.displayField})}if(b.popupOption){Ext.apply(a,{popupOption:b.popupOption})}Ext.apply(b,{layout:"column",items:[a,{width:"60%",displayField:b.displayField,valueField:b.displayField,name:b.comboFieldName,editable:true,allowBlank:b.allowBlank||true,groupCode:((b.popupOption)?b.popupOption.groupCode:""),sql:((b.popupOption)?b.popupOption.sql:""),bind:b.bindVar.NM,xtype:"spcombo",listeners:{select:{fn:function(e,d){if(Ext.isArray(d)){d=d[0]}var c=this.down("sppopuptrigger");c.codeNewValue=d.get(this.valueField);c.setValue(d.get(this.valueField));this.fireEvent("popupvaluechange",e,null,null,null,null,[d])},scope:b}}}]});b.callParent(arguments)}});Ext.define("eui.view.Merge",{extend:"Ext.view.Table",xtype:"mergetableview",cellTpl:['<td <tpl if="colspan">colspan={colspan}</tpl> <tpl if="rowspan">rowspan={rowspan}</tpl> class="{tdCls}" role="{cellRole}" {tdAttr} {cellAttr:attributes}',' style="width:{column.cellWidth}px;<tpl if="tdStyle">{tdStyle}</tpl>"',' tabindex="-1" data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="'+Ext.baseCSSPrefix+'grid-cell-inner {innerCls}" ','style="text-align:{align};<tpl if="style">{style}</tpl>" ',"{cellInnerAttr:attributes}>{value}</div>","</td>",{priority:0}],renderCell:function(d,g,f,m,i,e){var k=this,b,h=k.selectionModel,j=k.cellValues,c=j.classes,a=g.data[d.dataIndex],n=k.cellTpl,o,l,q=k.navigationModel.getPosition();if(g.data[d.dataIndex+"hidden"]){return}j.rowspan=g.get(d.dataIndex+"rowspan");j.colspan=g.get(d.dataIndex+"colspan");j.record=g;j.column=d;j.recordIndex=f;j.rowIndex=m;j.columnIndex=j.cellIndex=i;j.align=d.align;j.innerCls=d.innerCls;j.tdCls=j.tdStyle=j.tdAttr=j.style="";j.unselectableAttr=k.enableTextSelection?"":'unselectable="on"';c[1]=d.getCellId();l=2;if(d.renderer&&d.renderer.call){b=k.ownerCt.columnManager.getHeaderIndex(d);o=d.renderer.call(d.usingDefaultRenderer?d:d.scope||k.ownerCt,a,j,g,f,b,k.dataSource,k);if(j.css){g.cssWarning=true;j.tdCls+=" "+j.css;j.css=null}if(j.tdCls){c[l++]=j.tdCls}}else{o=a}j.value=(o==null||o==="")?d.emptyCellText:o;if(d.tdCls){c[l++]=d.tdCls}if(k.markDirty&&g.dirty&&g.isModified(d.dataIndex)){c[l++]=k.dirtyCls}if(d.isFirstVisible){c[l++]=k.firstCls}if(d.isLastVisible){c[l++]=k.lastCls}if(!k.enableTextSelection){c[l++]=k.unselectableCls}if(h&&(h.isCellModel||h.isSpreadsheetModel)&&h.isCellSelected(k,f,d)){c[l++]=k.selectedCellCls}if(q&&q.record.id===g.id&&q.column===d){c[l++]=k.focusedItemCls}c.length=l;j.tdCls=c.join(" ");n.applyOut(j,e);j.column=j.record=null},renderRow:function(g,a,f){var i=this,e=a===-1,h=i.selectionModel,l=i.rowValues,d=l.itemClasses,c=l.rowClasses,b=i.itemCls,k,j=i.rowTpl;l.rowAttr={};l.record=g;l.recordId=g.internalId;l.recordIndex=i.store.indexOf(g);l.rowIndex=a;l.rowId=i.getRowId(g);l.itemCls=l.rowCls="";if(!l.columns){l.columns=i.ownerCt.getVisibleColumnManager().getColumns()}d.length=c.length=0;if(!e){d[0]=b;if(!i.ownerCt.disableSelection&&h.isRowSelected){if(h.isRowSelected(g)){d.push(i.selectedItemCls)}}if(i.stripeRows&&a%2!==0){d.push(i.altRowCls)}if(i.getRowClass){k=i.getRowClass(g,a,null,i.dataSource);if(k){c.push(k)}}}if(f){j.applyOut(l,f,i.tableValues)}else{return j.apply(l,i.tableValues)}},rowTpl:["{%",'var dataRowCls = values.recordIndex === -1 ? "" : " '+Ext.baseCSSPrefix+'grid-row";',"%}",'<tr id="{rowId}" class="{[values.itemClasses.join(" ")]} {[values.rowClasses.join(" ")]} {[dataRowCls]}"',' data-boundView="{view.id}"',' data-recordId="{record.internalId}"',' data-recordIndex="{recordIndex}"',' role="{rowRole}" {rowAttr:attributes}>','<tpl for="columns">{%',"parent.view.renderCell(values, parent.record, parent.recordIndex, parent.rowIndex, xindex - 1, out, parent)","%}","</tpl>","</tr>",{priority:0}],renderRows:function(g,e,d,b){var f=this,h=f.rowValues,a=g.length,c;h.view=f;h.columns=e;h.rowRole=f.rowAriaRole;f.cellValues.cellRole=f.cellAriaRole;for(c=0;c<a;c++,d++){h.itemClasses.length=h.rowClasses.length=0;f.renderRow(g[c],d,b)}h.view=h.columns=h.record=null},tpl:["{%","view = values.view;","if (!(columns = values.columns)) {","columns = values.columns = view.ownerCt.getVisibleColumnManager().getColumns();","}","values.fullWidth = 0;","for (i = 0, len = columns.length; i < len; i++) {","column = columns[i];","values.fullWidth += (column.cellWidth = column.lastBox ? column.lastBox.width : column.width || column.minWidth);","}","tableCls=values.tableCls=[];","%}",'<div class="'+Ext.baseCSSPrefix+'grid-item-container" role="presentation" style="width:{fullWidth}px">',"{[view.renderTHead(values, out, parent)]}",'<table id="{view.id}-table" class="{[tableCls]}" border="0" cellspacing="0" cellpadding="0" style="{tableStyle}" {ariaTableAttr}>','<tbody id="{view.id}-body" {ariaTbodyAttr}>',"{%","view.renderRows(values.rows, values.columns, values.viewStartIndex, out);","%}","</tbody>","</table>","</div>","{% ","view = columns = column = null;","%}",{definitions:"var view, tableCls, columns, i, len, column;",strict:true,priority:0}],outerRowTpl:["{%","this.nextTpl.applyOut(values, out, parent)","%}"],bodySelector:"div."+Ext.baseCSSPrefix+"grid-item-container table",nodeContainerSelector:"div."+Ext.baseCSSPrefix+"grid-item-container tbody",itemSelector:"tr."+Ext.baseCSSPrefix+"grid-row",rowSelector:"tr."+Ext.baseCSSPrefix+"grid-row",cellSelector:"td."+Ext.baseCSSPrefix+"grid-cell",sizerSelector:"."+Ext.baseCSSPrefix+"grid-cell",innerSelector:"div."+Ext.baseCSSPrefix+"grid-cell-inner",getRowByRecord:function(a){return this.retrieveNode(this.getRowId(a),false)}});Ext.define("eui.grid.Merge",{extend:"Ext.panel.Table",requires:["eui.view.Merge"],alias:["widget.euimergegrid"],viewType:"mergetableview",lockable:false,columnLines:true,sortableColumns:false,groupFields:[],rowLines:true,addSumRows:false,addTotalRow:false,lastMergeColumn:[],getTempStore:function(){var b=this,a=this.store;if(!b.tempStore){b.tempStore=Ext.create("Ext.data.Store",{fields:[]});a.each(function(c){b.tempStore.add(c.copy())})}return b.tempStore},cls:"stat-tdstyle",addTotoalRow:function(){if(!this.addTotalRow){return}var d=this.store;var a=this.getTempStore();var c=this;var b=c.groupFields[0].field;var e={};e[b]="합";var f=Ext.Array.merge(Ext.pluck(c.groupFields,"field"),c.lastMergeColumn);e[b+"colspan"]=f.length;Ext.each(f,function(g,h){if(h>0){e[g+"hidden"]=true}});Ext.each(c.sumFields,function(g){e[g]=a.sum(g)});d.add(e)},generaRow:function(d,b,c,i){var g=this;for(var f in i){var a=f.split("@");if(a[0]===a[1]){a=a.slice(1,a.length)}var h=g.lastMergeColumn;var e=d.findRecord(h,a.join("@")+"@합");if(e){e.data[c]=i[f]}}},setStore:function(){this.callParent(arguments);var b=this.store;var a=this;b.on("load",function(){b.suspendEvents();var c=a.getTempStore();a.addTotoalRow();if(a.addSumRows){Ext.each(a.groupFields,function(h,d){c.group(h.field);var e=c.sum(a.sumFields[0],true);for(var k in e){var g={};var j=Ext.Array.merge(Ext.pluck(a.groupFields,"field"),a.lastMergeColumn);var f=0;Ext.each(j,function(i,m){var l=k.split("@")[m+f];if(!l){l="합"}g[i]=l;var n=h.mergeConfig[m];if(h.mergeConfig[m]){g[n.field+n.cond]=n.value}f++});b.add(g)}Ext.each(a.sumFields,function(n,m){var l={};var i=c.sum(n,true);a.generaRow(b,h,n,i)})})}b.resumeEvents();a.callMerge(b)})},callMerge:function(b){var a=this;Ext.each(a.groupFields,function(c,k){var e=c.field;b.group(e);var h=b.count(e);for(var f in h){var g=f.split("@")[1];var d=b.findExact(e,f);var j=h[f];var i=b.getRange(d,d+j-1);i[0].data[c.field+"rowspan"]=j;Ext.each(i,function(m,l){if(l>0){m.data[c.field+"hidden"]=true}})}});b.group(null);if(a.lastMergeColumn.length>0){b.sort([{property:a.lastMergeColumn,direction:"ASC"}])}a.getView().refresh()}});Ext.define("Ext.ux.grid.PageSize",{extend:"Ext.form.field.ComboBox",alias:"plugin.pagesize",mode:"local",displayField:"text",valueField:"value",allowBlank:false,hideLabel:true,triggerAction:"all",editable:false,width:50,maskRe:/[0-9]/,init:function(a){if(this.pageSize){a.store.pageSize=this.pageSize;this.setValue(this.pageSize)}a.on("afterrender",this.onInitView,this)},store:new Ext.data.SimpleStore({fields:["text","value"],data:[["5",5],["10",10],["15",15],["20",20],["25",25],["50",50],["100",100],["200",200],["500",500]]}),onInitView:function(a){this.setValue(a.store.pageSize);a.add("-",this.beforeText,this,this.afterText);this.on("select",this.onPageSizeChanged,a);this.on("specialkey",function(c,b){if(13===b.getKey()){this.onPageSizeChanged.call(a,this)}})},onPageSizeChanged:function(a){this.store.pageSize=parseInt(a.getRawValue(),10);this.moveFirst()}});Ext.define("eui.grid.Panel",{extend:"Ext.grid.Panel",alias:"widget.euigrid",columnLines:true,localeProperties:["title"],requires:["Ext.ux.statusbar.StatusBar","Ext.ux.grid.PageSize"],mixins:["eui.mixin.Panel"],cls:"eui-form-table",config:{showRowAddBtn:false,showRowDelBtn:false,showRowRegBtn:false,showRowModBtn:false,showRowSaveBtn:false,otherButtons:null,usePagingToolbar:false,hideHeaderICon:false,showRowCountStatusBar:false},initComponent:function(){var a=this;a.setBottomToolbar();if(a.iconCls){a.setHideHeaderICon(false)}if(a.title&&!a.hideHeaderICon){Ext.apply(a,{iconCls:"x-fa fa-table"})}a.callParent(arguments)},getCellEditor:function(){var a=this.plugins;if(a instanceof Array){for(var b=0;b<a.length;b++){if(Ext.getClassName(a[b])=="Ext.grid.plugin.CellEditing"){editor=a[b];break}}}else{if(Ext.getClassName(a)=="Ext.grid.plugin.CellEditing"){editor=a}}return editor},startEditByPosition:function(c,e){var d=null;var a=this.plugins;if(a instanceof Array){for(var b=0;b<a.length;b++){if(Ext.getClassName(a[b])=="Ext.grid.plugin.CellEditing"){d=a[b];break}}}else{if(Ext.getClassName(a)=="Ext.grid.plugin.CellEditing"){d=a}}if(d){d.startEditByPosition({row:c,column:e})}},checkComplete:function(d,c){var b=c.grid.getView(),e=c.rowIdx,a=c.record,f=c.node.id;if(a.dirty){c.grid.selModel.doDeselect(a);Ext.get(f).select(".x-grid-row-checker").elements[0].click()}else{c.grid.selModel.doDeselect(a)}},checkDeselect:function(d,c){var b=c.grid.getView(),e=c.rowIdx,a=c.record,f=c.node.id;c.grid.selModel.doDeselect(a);Ext.get(f).select(".x-grid-row-checker").elements[0].click()},onRender:function(c){var b=this;b.setStatusbar();b.setPagingToolbarStore();b.callParent(arguments);focusgridrecord=function(d){b.getSelectionModel().select(d)};if(this.bind&&this.bind.store){var a=this.lookupViewModel().getStore(this.bind.store.stub.name);a.on("focusgridrecord",focusgridrecord,this)}else{if(this.store){this.store.on("focusgridrecord",focusgridrecord,this)}}},setStatusbar:function(){var d=this,c=this.down("statusbar[itemId=commonStatus]"),e=function(g){if(c){c.down("tbtext[itemId=rowcnt]").setText("Rows : "+g.getCount())}},b=function(i,h){if(!h){return}var g=Ext.JSON.decode(h.responseText,true);if(g&&!Ext.isEmpty(g.MSG)){if(c){c.setStatus({text:g.MSG})}}},f=function(i,h,j,g){if(g){b(null,g._response)}};if(!d.getUsePagingToolbar()){if(this.bind&&this.bind.store){var a=this.lookupViewModel().getStore(this.bind.store.stub.name);if(a&&a.getProxy()!=null){a.on("datachanged",e,this);a.on("load",f,this);a.getProxy().on("exception",b,this)}}else{if(this.store){this.store.on("datachanged",e,this);this.store.getProxy().on("exception",b,this);this.store.on("load",f,this)}}}},setPagingToolbarStore:function(){var a=this;if(a.getUsePagingToolbar()){if(this.bind&&this.bind.store){this.down("pagingtoolbar").setBind({store:"{"+this.bind.store.stub.name+"}"})}else{if(this.store){this.down("pagingtoolbar").bindStore(this.store)}}}},onRowAdd:function(e,g,b,h,f){if(!b){b=0}var c=e.getStore();if(Ext.isEmpty(b)){c.add(g)}else{c.insert(b,g)}var d=c.indexOf(g);console.log("index",d);var a=e.getSelectionModel();a.select(d);if(Ext.isEmpty(f)){f=e}if(Ext.isFunction(h)){Ext.callback(h,f,[e,a.getSelection()[0]])}},onRowDelete:function(b,f,c){var e=b.getSelection(),a=b.getSelection()[0],d;if(!a||!a.isModel){Ext.Msg.alert("Erorr","#{삭제할 항목을 선택하여 주십시오}");return}if(Ext.isArray(e)&&e.length>1){d=[];Ext.Array.each(e,function(g){d.push(g.getData())})}if(Ext.isEmpty(c)){c=b}Ext.Msg.show({title:Util.getLocaleValue("행삭제"),buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,message:Util.getLocaleValue("RECORD_DELETE"),fn:function(g){if(g==="yes"){if(Ext.isFunction(f)){Ext.callback(f,c,[b.store,e])}}}})},onSave:function(a){var b=this;b.store.sync()},onReload:function(){var a=this;a.store.reload()},setBottomToolbar:function(){var c=this;var b=[{xtype:"spbutton",text:"#{행추가}",iconCls:"#{행추가아이콘}",scope:c,hidden:!c.getShowRowAddBtn(),listeners:{click:function(){if(c.hasListeners["SPGridRowAdd".toLowerCase()]){c.fireEvent("SPGridRowAdd",c)}else{c.onRowAdd(c,{randomInt:Ext.Number.randomInt(1,1000000000000)},0,null)}}}},{xtype:"spbutton",iconCls:"#{행삭제아이콘}",text:"#{행삭제}",scope:c,hidden:!c.getShowRowDelBtn(),listeners:{click:function(){if(c.hasListeners["SPGridRowDel".toLowerCase()]){c.fireEvent("SPGridRowDel",c)}else{c.onRowDel(c,null,c)}}}},{xtype:"spbutton",text:"#{등록}",iconCls:"#{등록아이콘}",hidden:!c.getShowRowRegBtn(),listeners:{click:function(){c.fireEvent("SPGridRowReg",c)}}},{xtype:"spbutton",text:"#{수정}",iconCls:"#{수정아이콘}",hidden:!c.getShowRowModBtn(),listeners:{click:function(){c.fireEvent("SPGridRowMod",c)}}},{xtype:"spbutton",text:"#{저장}",iconCls:"#{저장아이콘}",hidden:!c.getShowRowSaveBtn(),listeners:{click:function(){if(c.hasListeners["SPGridRowSave".toLowerCase()]){c.fireEvent("SPGridRowSave",c)}else{c.onRowSave()}}}}];var a=this.applyButtonToolBar(b,this.otherButtons);if(Ext.isEmpty(c.dockedItems)){c.dockedItems=[]}if(c.getUsePagingToolbar()){c.dockedItems.push({xtype:"pagingtoolbar",dock:"bottom",displayInfo:true,plugins:[{ptype:"pagesize",pageSize:25}]})}else{if(c.getShowRowCountStatusBar()){c.dockedItems.push({dock:"bottom",itemId:"commonStatus",xtype:"statusbar",items:[{xtype:"tbtext",itemId:"rowcnt",text:"Rows : 0"}]})}}}});Ext.define("eui.grid.column.Check",{extend:"Ext.grid.column.Check",alias:"widget.euicheckcolumn",isRecordChecked:function(a){var b=this.property;if(b){return a[b]=="Y"}return a.get(this.dataIndex)=="Y"},setRecordCheck:function(c,d,f,b){var e=this,h=e.property,a,g=f?"Y":"N";if(h?c[h]:c.get(e.dataIndex)!=g){if(h){c[h]=g}else{c.set(e.dataIndex,g)}e.updater(b,f)}},defaultRenderer:function(e,b){var c=this,a=c.checkboxCls,d=c.tooltip,e=(e=="Y"?true:false);if(c.invert){e=!e}if(c.disabled){b.tdCls+=" "+c.disabledCls}if(e){a+=" "+c.checkboxCheckedCls;d=c.checkedTooltip||d}if(c.useAriaElements){b.tdAttr+=' aria-describedby="'+c.id+"-cell-description"+(!e?"-not":"")+'-selected"'}c.updateHeaderState();return"<span "+(d||"")+' class="'+a+'" role="'+c.checkboxAriaRole+'"'+(!c.ariaStaticRoles[c.checkboxAriaRole]?' tabIndex="0"':"")+"></span>"}});Ext.define("eui.grid.column.Column",{extend:"Ext.grid.column.Column",alias:"widget.euicolumn",initComponent:function(){var a=this;a.callParent(arguments)}});Ext.define("eui.mvvm.GridRenderer",{extend:"Ext.Mixin",mixinId:"gridrenderer",dateRenderer:function(a,d){if(!a){return a}if(Ext.Object.getSize(d)==0){return Ext.Date.format(a,eui.Config.defaultDateFormat)}var b,c=d.column.format;if(Ext.isDate(a)){if((a.getHours()==9||a.getHours()==0)&&a.getMinutes()==0&&a.getSeconds()==0&&a.getMilliseconds()==0){if(c){return Ext.Date.format(a,c)}return Ext.Date.format(a,eui.Config.defaultDateFormat)}if(c){return Ext.Date.format(a,c)}return Ext.Date.format(a,eui.Config.defaultDateTimeFormat)}else{if(Ext.Date.parse(a,"Ymd")){b=Ext.Date.parse(a,"Ymd");return Ext.Date.format(b,eui.Config.defaultDateFormat)}else{if(Ext.Date.parse(a,"YmdHis")){b=Ext.Date.parse(a,"YmdHis");return Ext.Date.format(b,eui.Config.defaultDateTimeFormat)}else{return a}}}},currencyRenderer:function(a){if(Ext.isNumber(a)){return Ext.util.Format.number(a,"#,###.###")}else{return a}},descRowRenderer:function(d,e,a,f,c,b){return b.getCount()-f}});Ext.define("eui.grid.column.Date",{extend:"Ext.grid.column.Date",alias:"widget.euidatecolumn",format:"Y-m-d",align:"center",width:100,mixins:["eui.mvvm.GridRenderer"],initComponent:function(){var a=this;if(!a.renderer){a.renderer=a.dateRenderer}a.callParent(arguments)}});Ext.define("eui.grid.column.Number",{extend:"Ext.grid.column.Number",alias:"widget.euinumbercolumn",align:"right",mixins:["eui.mvvm.GridRenderer"],config:{isCurrency:true},initComponent:function(){var a=this;if(!a.renderer&&a.isCurrency){a.renderer=a.currencyRenderer}a.callParent(arguments)}});Ext.define("eui.grid.column.RowNumberer",{extend:"Ext.grid.column.Number",alias:"widget.euirownumberer",align:"right",mixins:["eui.mvvm.GridRenderer"],text:"No",width:40,initComponent:function(){var a=this;if(!a.renderer){a.renderer=a.descRowRenderer}a.callParent(arguments)}});Ext.define("eui.mixin.BaseContainer",{extend:"Ext.Mixin",mixinConfig:{},config:{}});Ext.define("eui.mvvm.GridViewController",{extend:"Ext.Mixin",mixinId:"gridviewcontroller",mixinConfig:{},config:{},onRowAdd:function(d,e,a){console.log(arguments);return;var b=d.getStore();if(Ext.isEmpty(a)){b.add(e)}else{b.insert(a,e)}var c=b.indexOf(e);d.getView().focusRow(c);Ext.get(Ext.get(d.getView().getRow(c)).id).select(".x-grid-row-checker").elements[0].click()},onRowDel:function(d,i,j){var h=this,e=this.getMyViewController(d),f=i.prefix,a=d.up("grid"),b=d.up("grid").getSelection(),c=a.getSelection()[0];var g;if(!c||!c.isModel){Ext.Msg.alert("Erorr","삭제할 항목을 선택하여 주십시오");return}if(Ext.isArray(b)&&b.length>1){g=[];Ext.Array.each(b,function(k){g.push(k.getData())})}if(!Ext.isFunction(j)){j=function(){a.store.load();Ext.Msg.alert("확인","처리가 완료되었습니다.")}}Ext.Msg.show({title:"삭제",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,message:"삭제하시겠습니까?",fn:function(k){if(k==="yes"){a.store.remove(b);i.params={};i.params[f]={deleteData:g||[c.getData()]};i.params.__scopeGrid=a;i.pCallback=j;i.pScope=e;Util.CommonAjax(i)}}})},getMyViewController:function(a){if(Util.getOwnerCt(a).xtype==="window"){return Util.getOwnerCt(a).items.items[0].getController()}else{return Util.getOwnerCt(a).getController()}return null},onRowDataUpdate:function(c,d,g){var b=c.up("grid"),f=d.prefix,a=this.getMyViewController(c),e=b.store.getModifiedRecords();if(!Ext.isDefined(g)){g=function(){b.store.load();Ext.Msg.alert("확인","처리가 완료되었습니다.")}}d.params={};d.params[f]=Util.getDatasetParam(b.store);d.params.__scopeGrid=b;d.pCallback=g;d.pScope=a;Util.CommonAjax(d)},onRowReg:function(d,a,f){var c=d.up("grid"),e=c.store.getModifiedRecords(),b=0;Ext.each(e,function(g){if(!g.phantom){b++}});if(b===0){Ext.Msg.alert("확인","대상 레코드가 존재하지 않습니다.");return}this.onRowDataUpdate(d,a,f)},onRowMod:function(c,e,g){var b=c.up("grid"),d=b.store.getNewRecords(),f=b.store.getModifiedRecords(),a=0;if(d.length>0){Ext.Msg.alert("확인","등록이 필요합니다.");return}Ext.each(f,function(h){if(!h.phantom){a++}});if(a===0){Ext.Msg.alert("확인","대상 레코드가 존재하지 않습니다.");return}this.onRowDataUpdate(c,e,g)},onRowSave:function(c,d,f){var b=c.up("grid"),e=b.store.getModifiedRecords(),a=0;if(e.length===0){Ext.Msg.alert("확인","대상 레코드가 존재하지 않습니다.");return}this.onRowDataUpdate(c,d,f)}});Ext.define("eui.mvvm.HViewModel",{extend:"Ext.app.ViewModel"});Ext.define("eui.mvvm.ViewController",{extend:"Ext.app.ViewController",mixins:["eui.mixin.FormField","eui.mvvm.GridViewController","eui.mvvm.GridRenderer"],requires:["eui.Util"],init:function(){var b=this.vm=this.getViewModel(),a=this.view=this.getView()},baseFormSave:function(c,d,e){var a=d.alertTitle||"저장",b=d.alertMsg||"처리하시겠습니까?";d.pCallback=function(i,h,g,f){Ext.Msg.alert("처리완료","처리가 완료되었습니다.");if(Ext.isFunction(e)){e(i,h,g,f)}};HMsg.show({title:a,buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,message:b,fn:function(f){if(f==="yes"){d.pScope=c;Util.CommonAjax(d)}}})},transaction:function(a,d,i,h,e,j,f,b,g){var c={url:Ext.util.Format.format("/{0}/{1}/",Util.getContextPath(),Util.getBaseUrl()),async:true,method:"POST",success:function(l,m){Ext.getBody().unmask();if(!Ext.isEmpty(l.responseText)){var n=Ext.decode(l.responseText),k=n[0].result;this.processCallback(k,e,b)}},failure:function(k,l){Ext.Msg.alert("Status","server-side failure with status code "+k.status);Ext.getBody().unmask();this.processCallback(null,e,b)},jsonData:{action:d,method:i,tid:Ext.id(),type:"rpc",data:[]},scope:this,timeout:g||30000,disableCaching:false};c=this.buildJsonData(c,h,j,e);if(f){Ext.getBody().mask("Please waiting...").dom.style.zIndex="99999";if(!Ext.Ajax.hasListener("requestexception")){Ext.Ajax.on("requestexception",function(m,k,l){Ext.getBody().unmask()})}}Ext.Ajax.request(c)}});Ext.define("eui.panel.Panel",{extend:"Ext.panel.Panel",alias:"widget.euipanel",cls:"eui-form-table",config:{},initComponent:function(){var a=this;if(a.iconCls){a.setHideHeaderICon(false)}if(a.title&&!a.hideHeaderICon){Ext.apply(a,{iconCls:"x-fa fa-pencil-square"})}a.callParent(arguments)}});Ext.define("eui.panel.BasePanel",{extend:"eui.panel.Panel",alias:"widget.euibasepanel",scrollable:"y",layout:{type:"vbox",align:"stretch"}});Ext.define("eui.panel.Header",{extend:"Ext.Component",xtype:"euiheader",height:30,margin:"10 10 0 5",config:{title:null,iconCls:"x-fa fa-pencil-square"},tpl:['<div class="eui-form-table">','<div  class="eui-form-table x-panel-header x-header x-docked x-unselectable x-panel-header-default x-horizontal x-panel-header-horizontal x-panel-header-default-horizontal x-top x-panel-header-top x-panel-header-default-top x-docked-top x-panel-header-docked-top x-panel-header-default-docked-top x-box-layout-ct" role="presentation" style="width: 771px; right: auto; left: 0px; top: 0px;">','<span data-ref="tabGuardBeforeEl" aria-hidden="true" class="x-tab-guard x-tab-guard-" style="width:0px;height:0px;">',"</span>",'<div data-ref="innerCt" role="presentation" class="x-box-inner" style="width: 761px; height: 16px;"><div data-ref="targetEl" class="x-box-target" role="presentation" style="width: 761px;"><div class="x-title x-panel-header-title x-panel-header-title-default x-box-item x-title-default x-title-rotate-none x-title-align-left" role="presentation" unselectable="on" style="right: auto; left: 0px; top: 0px; margin: 0px; width: 761px;"><div data-ref="iconWrapEl" role="presentation" class="x-title-icon-wrap x-title-icon-wrap-default x-title-icon-left x-title-item"><div data-ref="iconEl" role="presentation" unselectable="on" class="x-title-icon x-title-icon-default {iconCls} " style=""></div></div><div data-ref="textEl" class="x-title-text x-title-text-default x-title-item" unselectable="on" role="presentation">{title}</div></div></div></div><span data-ref="tabGuardAfterEl" aria-hidden="true" class="x-tab-guard x-tab-guard-" style="width:0px;height:0px;"></span></div>',"</div>"],initComponent:function(){Ext.apply(this,{data:{iconCls:this.iconCls,title:this.title}});this.callParent(arguments)}});Ext.define("eui.panel.Nav",{extend:"Ext.Component",xtype:"euiheadernav",config:{text:null},tpl:['<div class="eui-form-table">',"<div>{text}</div>","</div>"],initComponent:function(){Ext.apply(this,{data:{text:this.text}});this.callParent(arguments)}});Ext.define("eui.tab.Panel",{extend:"Ext.tab.Panel",alias:"widget.euitabpanel",ui:"euitabpanel",initComponent:function(){var a=this;if(a.title){Ext.apply(a,{iconCls:"x-fa fa-bars"})}a.callParent(arguments)},listeners:{tabchange:function(c,a,b){if(JSON.stringify(c.tabLoadParameters)!=JSON.stringify(a.tabLoadParameters)){a.fireEvent("euitabload",c.tabLoadParameters);a.tabLoadParameters=c.tabLoadParameters}},euitabload:function(a,b){var c=this.getLayout().getActiveItem();c.fireEvent("euitabload",a,b);this.tabLoadParameters=c.tabLoadParameters=a}}});Ext.define("eui.toolbar.Command",{extend:"Ext.toolbar.Toolbar",xtype:"commandtoolbar",ui:"plain",config:{ownerGrid:null,showText:true,showRowAddBtn:false,showRowDelBtn:false,showRegBtn:false,showReloadBtn:false,showModBtn:false,showSaveBtn:false,showCloseBtn:false,showGridCount:false,showExcelDownBtn:false},initComponent:function(){var c=this,a=this.up("grid,form");Ext.apply(c,{items:[{xtype:"component",itemId:"status",tpl:"({count}개)",margin:"0 10 0 20",hidden:!c.getShowGridCount()},{xtype:"euibutton",text:"#{행추가}",iconCls:"#{행추가아이콘}",scope:c,showText:c.getShowText(),hidden:!c.getShowRowAddBtn(),listeners:{click:function(){if(a.hasListeners["rowaddbtnclick".toLowerCase()]){a.fireEvent("rowaddbtnclick",a)}else{a.onRowAdd(a,{randomInt:Ext.Number.randomInt(1,1000000000000)},0,null)}}}},{xtype:"euibutton",iconCls:"#{행삭제아이콘}",text:"#{행삭제}",scope:c,hidden:!c.getShowRowDelBtn(),listeners:{click:function(){if(a.hasListeners["rowdeletebtnclick".toLowerCase()]){a.fireEvent("rowdeletebtnclick",a)}else{a.onRowDelete(a,null,a)}}}},{xtype:"euibutton",text:"#{등록}",iconCls:"#{등록아이콘}",hidden:!c.getShowRegBtn(),listeners:{click:function(){a.fireEvent("regbtnclick",a)}}},{xtype:"euibutton",text:"#{수정}",iconCls:"#{수정아이콘}",hidden:!c.getShowModBtn(),listeners:{click:function(){a.fireEvent("modbtnclick",a)}}},{xtype:"euibutton",text:"#{저장}",formBind:true,iconCls:"#{저장아이콘}",hidden:!c.getShowSaveBtn(),listeners:{click:function(){if(a.hasListeners["savebtnclick".toLowerCase()]){a.fireEvent("savebtnclick",a)}else{a.onSave(a)}}}},{xtype:"euibutton",text:"#{조회}",iconCls:"#{조회아이콘}",hidden:!c.getShowReloadBtn(),listeners:{click:function(){if(a.hasListeners["reloadbtnclick".toLowerCase()]){a.fireEvent("reloadbtnclick",a)}else{a.onReload()}}}},{text:"#{엑셀다운로드}",iconCls:"#{엑셀다운로드아이콘}",hidden:!c.getShowExcelDownBtn(),xtype:"exporterbutton",listeners:{click:function(){this.onClick2()}}},{xtype:"euibutton",text:"#{닫기}",iconCls:"x-fa fa-sign-out",hidden:!c.getShowCloseBtn(),listeners:{click:function(){var d=Util.getOwnerCt(this);if(Util.getOwnerCt(this).xtype==="window"){d.close()}else{Ext.Error.raise({msg:"닫기 버튼은 팝업에서만 사용가능합니다."})}}}}]});c.callParent(arguments);var b=a.store;if(a.bind&&a.bind.store){b=a.bind.store.owner.get(a.bind.store.stub.path)}b.on("datachanged",function(){a.down("#status").update({count:b.getTotalCount()})})}});Ext.define("eui.toolbar.EuiCommand",{extend:"Ext.toolbar.Toolbar",xtype:"euicommand",ui:"plain",defaultBindProperty:"store",config:{printBtnText:null,rowAddBtnText:null,rowDelBtnText:null,regBtnText:null,reloadBtnText:null,modBtnText:null,saveBtnText:null,closeBtnText:null,gridCountText:null,excelDownBtnText:null,showText:true,hideTextPrintBtn:true,hideTextReloadBtn:true,showPrintBtn:false,showRowAddBtn:false,showRowDelBtn:false,showRegBtn:false,showReloadBtn:false,showModBtn:false,showSaveBtn:false,showCloseBtn:false,showGridCount:false,showExcelDownBtn:false,btnInfo:{PRINT:"showPrintBtn",ADD:"showRowAddBtn",DEL:"showRowDelBtn",REG:"showRegBtn",LOAD:"showReloadBtn",MOD:"showModBtn",SAVE:"showSaveBtn",CLOSE:"showCloseBtn",EXLDWN:"showExcelDownBtn"}},setStore:function(a){this.store=a},setTextHide:function(){if(this.getHideTextPrintBtn()){this.down("#PRINT").setText(null)}if(this.getHideTextReloadBtn()){this.down("#LOAD").setText(null)}},getStoreOwner:function(){var a=this;if(a.store){Ext.each(Ext.ComponentQuery.query("grid,treepanel"),function(b){if(b.getStore().getId()===a.store.getId()){a=b}})}else{a=this.up("grid,treepanel")}return a},buttonsAdd:function(){var a=this;a.add([{xtype:"euibutton",text:a.reloadBtnText||"#{조회}",itemId:"LOAD",iconCls:"#{조회아이콘}",hidden:!a.getShowReloadBtn(),listeners:{click:function(){var b=a.getStoreOwner();if(a.hasListeners["reloadbtnclick".toLowerCase()]){a.fireEvent("reloadbtnclick",b)}else{b.onReload()}}}},{xtype:"euibutton",text:a.printBtnText||"#{인쇄}",itemId:"PRINT",iconCls:"#{인쇄아이콘}",hidden:!a.getShowPrintBtn(),listeners:{click:function(){var b=a.getStoreOwner();if(a.hasListeners["printbtnclick".toLowerCase()]){a.fireEvent("printbtnclick",b,a)}}}},{text:a.excelDownBtnText||"#{엑셀다운로드}",itemId:"EXLDWN",iconCls:"#{엑셀다운로드아이콘}",hidden:!a.getShowExcelDownBtn(),xtype:"exporterbutton",listeners:{click:function(){var b=a.getStoreOwner();this.setComponent(b);this.onClick2()}}},{xtype:"euibutton",text:a.rowAddBtnText||"#{행추가}",iconCls:"#{행추가아이콘}",scope:a,itemId:"ADD",showText:a.getShowText(),hidden:!a.getShowRowAddBtn(),listeners:{click:function(){var b=a.getStoreOwner();if(a.hasListeners["rowaddbtnclick".toLowerCase()]){a.fireEvent("rowaddbtnclick",b)}else{b.onRowAdd(b,{randomInt:Ext.Number.randomInt(1,1000000000000)},0,null)}}}},{xtype:"euibutton",iconCls:"#{행삭제아이콘}",text:a.rowDelBtnText||"#{행삭제}",itemId:"DEL",scope:a,hidden:!a.getShowRowDelBtn(),listeners:{click:function(){var b=a.getStoreOwner();if(a.hasListeners["rowdeletebtnclick".toLowerCase()]){a.fireEvent("rowdeletebtnclick",b)}else{b.onRowDelete(b,null,b)}}}},{xtype:"euibutton",text:a.regBtnText||"#{등록}",itemId:"REG",iconCls:"#{등록아이콘}",hidden:!a.getShowRegBtn(),listeners:{click:function(){a.fireEvent("regbtnclick",a)}}},{xtype:"euibutton",text:a.modBtnText||"#{수정}",itemId:"MOD",iconCls:"#{수정아이콘}",hidden:!a.getShowModBtn(),listeners:{click:function(){var b=a.getStoreOwner();a.fireEvent("modbtnclick",b)}}},{xtype:"euibutton",text:a.saveBtnText||"#{저장}",formBind:true,itemId:"SAVE",iconCls:"#{저장아이콘}",hidden:!a.getShowSaveBtn(),listeners:{click:function(){var b=a.getStoreOwner();if(a.hasListeners["savebtnclick".toLowerCase()]){a.fireEvent("savebtnclick",b)}}}},{xtype:"euibutton",text:a.closeBtnText||"#{닫기}",itemId:"CLOSE",iconCls:"x-fa fa-sign-out",hidden:!a.getShowCloseBtn(),listeners:{click:function(){var b=Util.getOwnerCt(this);if(Util.getOwnerCt(this).xtype==="window"){b.close()}else{Ext.Error.raise({msg:"닫기 버튼은 팝업에서만 사용가능합니다."})}}}}]);a.setTextHide()},setAllButtonShow:function(a){},setButtonStatus:function(b){var a=this;Ext.each(b,function(c){var d=a.initialConfig[a.getBtnInfo()[c.button]];if(d===undefined){a.down("#"+c.button).setHidden(false)}else{if(Ext.isBoolean(d)){a.down("#"+c.button).setHidden(!d)}}})},beforeRender:function(){var a=this;this.callParent(arguments);if(Config.commandButtonControllerUrl){Util.CommonAjax({method:"POST",url:Config.commandButtonControllerUrl,params:a.params,pCallback:function(c,d,b){if(b.success){a.setAllButtonShow(false);a.buttonsAdd();a.setButtonStatus(b.data)}}})}else{a.buttonsAdd()}}});Ext.define("eui.tree.Panel",{extend:"Ext.tree.Panel",alias:"widget.euitreepanel",cls:"eui-form-table",rootVisible:false,useArrows:true,config:{},initComponent:function(){var a=this;if(a.iconCls){a.setHideHeaderICon(false)}if(a.title&&!a.hideHeaderICon){Ext.apply(a,{iconCls:"x-fa fa-pencil-square"})}a.callParent(arguments)},getCellEditor:function(){var a=this.plugins;if(a instanceof Array){for(var b=0;b<a.length;b++){if(Ext.getClassName(a[b])=="Ext.grid.plugin.CellEditing"){editor=a[b];break}}}else{if(Ext.getClassName(a)=="Ext.grid.plugin.CellEditing"){editor=a}}return editor}});Ext.define("eui.ux.file.FileDownload",{extend:"Ext.Component",alias:"widget.FileDownloader",autoEl:{tag:"iframe",cls:"x-hidden",src:Ext.SSL_SECURE_URL},stateful:false,load:function(a){var b=this.getEl();b.dom.src=a.url+(a.params?"?"+a.params:"");b.dom.onload=function(){if(b.dom.contentDocument.body.childNodes[0].wholeText=="404"){Ext.Msg.show({title:"Attachment missing",msg:"The document you are after can not be found on the server.",buttons:Ext.Msg.OK,icon:Ext.MessageBox.ERROR})}}}});Ext.define("eui.ux.file.FileForm",{extend:"eui.form.Panel",xtype:"fileform",frame:true,tableColumns:2,height:50,hiddenHeader:true,autoScroll:true,removeFieldField:function(a){if(this.addCnt<2){return}this.addCnt=this.addCnt-1;this.remove(a.up("fieldcontainer").previousSibling());this.remove(a.up("fieldcontainer"))},addFileField:function(){var a=this;if(!a.addCnt){a.addCnt=0}a.addCnt=a.addCnt+1;a.add({xtype:"filefield",name:"file",hideLabel:true,fieldLabel:"Attachments"},{xtype:"fieldcontainer",width:43,items:[{xtype:"button",text:"+",listeners:{scope:a,click:"addFileField"}},{xtype:"button",text:"-",listeners:{scope:a,click:"removeFieldField"}}]})},listeners:{scope:"this",render:"addFileField"},defaults:{xtype:"textfield",anchor:"100%",labelWidth:60}});Ext.define("eui.ux.file.FileGrid",{extend:"Ext.grid.Panel",xtype:"filegrid",initComponent:function(){var a=this;Ext.apply(a,{store:{autoLoad:false,proxy:{type:"rest",url:Config.fileuploadListUrl,extraParams:a.fileParams,reader:{type:"json",rootProperty:"data"}},sorters:[{property:"ADD_DATE",direction:"ASC"}],fields:[]}});a.callParent(arguments)},columns:[{text:"Filename",flex:1,dataIndex:"FILE_NAME"},{text:"Size",align:"right",width:70,dataIndex:"FILE_SIZE"},{text:"Add User",align:"center",width:70,dataIndex:"ADD_USER_NAME"},{xtype:"datecolumn",format:"Y.m.d G:i a",width:150,text:"Add Date",align:"center",dataIndex:"ADD_DATE"},{xtype:"actioncolumn",text:"Down",width:40,items:[{icon:"resources/images/customui/icon/COM.png",handler:function(b,h,c,d,f,a,g){Util.fileClick(a.get("S_FUNC_CODE"),a.get("FILE_MGT_CODE"),a.get("FILE_NAME"))}}]},{xtype:"actioncolumn",text:"Del",width:40,items:[{icon:"resources/images/customui/icon/COM.png",handler:function(b,i,d,f,g,a,h){var c=this.up("grid").store;Ext.Msg.confirm("File Delete","Are you sure you want to delete this file?",function(j,e){if(j==="yes"){Util.CommonAjax({url:Config.filedeleteUrl,pSync:false,params:a.getData(),pCallback:function(k,l,m){if(m.TYPE===1){c.load()}}})}},this)}}]}]});Ext.define("Ext.ux.upload.uploader.AbstractUploader",{mixins:{observable:"Ext.util.Observable"},maxFileSize:50000000,url:"",timeout:60*1000,contentType:"application/binary",filenameHeader:"X-File-Name",sizeHeader:"X-File-Size",typeHeader:"X-File-Type",params:{},extraHeaders:{},filenameEncoder:null,filenameEncoderHeader:"X-Filename-Encoder",constructor:function(a){this.mixins.observable.constructor.call(this);this.initConfig(a)},initHeaders:function(c){var d=this.extraHeaders||{},a=c.getFilename();var b=this.initFilenameEncoder();if(b){a=b.encode(a);d[this.filenameEncoderHeader]=b.getType()}d[this.filenameHeader]=a;d[this.sizeHeader]=c.getSize();d[this.typeHeader]=c.getType();return d},uploadItem:function(a){},abortUpload:function(){},initFilenameEncoder:function(){if(Ext.isString(this.filenameEncoder)){this.filenameEncoder=Ext.create(this.filenameEncoder)}if(Ext.isObject(this.filenameEncoder)){return this.filenameEncoder}return null}});Ext.define("Ext.ux.upload.uploader.AbstractXhrUploader",{extend:"Ext.ux.upload.uploader.AbstractUploader",onUploadSuccess:function(c,d,e){var f={success:true,message:"",response:c};if(c.responseText){var b=Ext.decode(c.responseText);if(b){Ext.apply(f,{success:true,message:"OK---",data:b.data});var a=f.success?"uploadsuccess":"uploadfailure";e.fileData=b.data;this.fireEvent(a,e,f);return}}this.fireEvent("uploadsuccess",e,f)},onUploadFailure:function(a,b,c){var d={success:false,message:"http error",response:a};this.fireEvent("uploadfailure",c,d)},onUploadProgress:function(b,a){this.fireEvent("uploadprogress",a,b)}});Ext.define("Ext.ux.upload.data.Connection",{extend:"Ext.data.Connection",progressCallback:null,request:function(a){var b=a.progress;if(b){this.progressCallback=b}this.callParent(arguments)},getXhrInstance:function(){var a=this.callParent(arguments);if(this.progressCallback){a.upload.onprogress=this.progressCallback}return a}});Ext.define("Ext.ux.upload.uploader.FormDataUploader",{extend:"Ext.ux.upload.uploader.AbstractXhrUploader",requires:["Ext.ux.upload.data.Connection"],method:"POST",xhr:null,initConnection:function(){if(this.params){}var b=new XMLHttpRequest(),c=this.method,a=this.url;b.open(c,a,true);this.abortXhr=function(){this.suspendEvents();b.abort();this.resumeEvents()};return b},uploadItem:function(i){var b=i.getFileApiObject();i.setUploading();var a=new FormData();a.append("file",b);var d=this.params;if(this.params){for(var e in d){var f=d[e];a.append(e,f)}}var h=this.initConnection();h.onreadystatechange=function(){console.log("readyStatechange:  "+h.readyState)};var g=Ext.Function.bind(this.onLoadEnd,this,[i],true);var c=Ext.Function.bind(this.onUploadProgress,this,[i],true);h.addEventListener("loadend",g,true);h.upload.addEventListener("progress",c,true);h.send(a)},abortUpload:function(){this.abortXhr()},abortXhr:function(){},onLoadEnd:function(c,b){var a=c.target;if(a.status!=200){return this.onUploadFailure(a,null,b)}return this.onUploadSuccess(a,null,b)}});Ext.define("Ext.ux.upload.Store",{extend:"Ext.data.Store",fields:[{name:"filename",type:"string"},{name:"size",type:"integer"},{name:"type",type:"string"},{name:"status",type:"string"},{name:"message",type:"string"}],proxy:{type:"memory",reader:{type:"array",idProperty:"filename"}}});Ext.define("Ext.ux.upload.ItemGridPanel",{extend:"Ext.grid.Panel",requires:["Ext.selection.CheckboxModel","Ext.ux.upload.Store"],layout:"fit",border:0,viewConfig:{scrollOffset:40},config:{queue:null,textFilename:"Filename",textSize:"Size",textType:"Type",textStatus:"Status",textProgress:"%"},initComponent:function(){if(this.queue){this.queue.on("queuechange",this.onQueueChange,this);this.queue.on("itemchangestatus",this.onQueueItemChangeStatus,this);this.queue.on("itemprogressupdate",this.onQueueItemProgressUpdate,this)}Ext.apply(this,{store:Ext.create("Ext.ux.upload.Store"),selModel:Ext.create("Ext.selection.CheckboxModel",{checkOnly:true}),columns:[{dataIndex:"filename",header:this.textFilename,flex:1},{dataIndex:"size",header:this.textSize,width:100,renderer:function(a){return Ext.util.Format.fileSize(a)}},{dataIndex:"type",header:this.textType,width:150},{dataIndex:"progress",header:this.textProgress,width:50,align:"right",renderer:function(a){if(!a){a=0}return a+"%"}},{dataIndex:"message",width:1,hidden:true}]});this.callParent(arguments)},onQueueChange:function(a){this.loadQueueItems(a.getItems())},onQueueItemChangeStatus:function(a,c,b){this.updateStatus(c)},onQueueItemProgressUpdate:function(a,b){this.updateStatus(b)},loadQueueItems:function(a){var c=[];var b;for(b=0;b<a.length;b++){c.push([a[b].getFilename(),a[b].getSize(),a[b].getType(),a[b].getStatus(),a[b].getProgressPercent()])}this.loadStoreData(c)},loadStoreData:function(b,a){this.store.loadData(b,a)},getSelectedRecords:function(){return this.getSelectionModel().getSelection()},updateStatus:function(c){var b=this.getRecordByFilename(c.getFilename());if(!b){return}var a=c.getStatus();if(a!=b.get("status")){this.scrollIntoView(b);b.set("status",c.getStatus());if(c.isUploadError()){b.set("tooltip",c.getUploadErrorMessage())}}b.set("progress",c.getProgressPercent());b.commit()},getRecordByFilename:function(a){var b=this.store.findExact("filename",a);if(-1==b){return null}return this.store.getAt(b)},getIndexByRecord:function(a){return this.store.findExact("filename",a.get("filename"))},statusRenderer:function(g,b,a,h,d,c){var e="ux-mu-icon-upload-"+g;var f=a.get("tooltip");if(f){g=f}else{"upload_status_"+g}g='<span class="ux-mu-status-value '+e+'" data-qtip="'+g+'" />';return g},scrollIntoView:function(a){var c=this.getIndexByRecord(a);if(-1==c){return}this.getView().focusRow(c);return;var b=Ext.get(this.getView().getRow(c));if(!b){return}var d=this.getEl();if(b.getBottom()>d.getBottom()){b.dom.scrollIntoView(d)}}});Ext.define("Ext.ux.upload.Manager",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.ux.upload.uploader.AbstractUploader"],uploader:null,uploaderOptions:null,synchronous:true,filenameEncoder:null,DEFAULT_UPLOADER_CLASS:"Ext.ux.upload.uploader.ExtJsUploader",constructor:function(c){this.mixins.observable.constructor.call(this);this.initConfig(c);if(!(this.uploader instanceof Ext.ux.upload.uploader.AbstractUploader)){var a=this.DEFAULT_UPLOADER_CLASS;if(Ext.isString(this.uploader)){a=this.uploader}var b=this.uploaderOptions||{};Ext.applyIf(b,{success:this.onUploadSuccess,failure:this.onUploadFailure,progress:this.onUploadProgress,filenameEncoder:this.filenameEncoder});this.uploader=Ext.create(a,b)}this.mon(this.uploader,"uploadsuccess",this.onUploadSuccess,this);this.mon(this.uploader,"uploadfailure",this.onUploadFailure,this);this.mon(this.uploader,"uploadprogress",this.onUploadProgress,this);Ext.apply(this,{syncQueue:null,currentQueue:null,uploadActive:false,errorCount:0})},uploadQueue:function(a){if(this.uploadActive){return}this.startUpload(a);if(this.synchronous){this.uploadQueueSync(a);return}this.uploadQueueAsync(a)},uploadQueueSync:function(a){this.uploadNextItemSync()},uploadNextItemSync:function(){if(!this.uploadActive){return}var a=this.currentQueue.getFirstReadyItem();if(!a){return}this.uploader.uploadItem(a)},uploadQueueAsync:function(a){var c;var b=a.getCount();for(c=0;c<b;c++){this.uploader.uploadItem(a.getAt(c))}},startUpload:function(a){a.reset();this.uploadActive=true;this.currentQueue=a;this.fireEvent("beforeupload",this,a)},finishUpload:function(){this.fireEvent("uploadcomplete",this,this.currentQueue,this.errorCount)},resetUpload:function(){this.currentQueue=null;this.uploadActive=false;this.errorCount=0},abortUpload:function(){this.uploader.abortUpload();this.currentQueue.recoverAfterAbort();this.resetUpload();this.fireEvent("abortupload",this,this.currentQueue)},afterItemUpload:function(a,b){if(this.synchronous){this.uploadNextItemSync()}if(!this.currentQueue.existUploadingItems()){this.finishUpload()}},onUploadSuccess:function(a,b){console.log("onUploadSuccess:::",arguments);a.setUploaded();this.fireEvent("itemuploadsuccess",this,a,b);this.afterItemUpload(a,b)},onUploadFailure:function(a,b){console.log("onUploadFailure:::",arguments);a.setUploadError(b.message);this.fireEvent("itemuploadfailure",this,a,b);this.errorCount++;this.afterItemUpload(a,b)},onUploadProgress:function(b,a){b.setProgress(a.loaded)}});Ext.define("Ext.ux.upload.StatusBar",{extend:"Ext.toolbar.Toolbar",config:{selectionMessageText:"Selected {0} file(s), {1}",uploadMessageText:"Upload progress {0}% ({1} of {2} file(s))",textComponentId:"mu-status-text"},initComponent:function(){Ext.apply(this,{items:[{xtype:"tbtext",itemId:this.textComponentId,text:"&nbsp;"}]});this.callParent(arguments)},setText:function(a){this.getComponent(this.textComponentId).setText(a)},setSelectionMessage:function(b,a){this.setText(Ext.String.format(this.selectionMessageText,b,Ext.util.Format.fileSize(a)))},setUploadMessage:function(c,a,b){this.setText(Ext.String.format(this.uploadMessageText,c,a,b))}});Ext.define("Ext.ux.upload.BrowseButton",{extend:"Ext.form.field.File",buttonOnly:true,buttonText:"Browse11",initComponent:function(){Ext.apply(this,{buttonConfig:{iconCls:this.iconCls,text:this.buttonText}});this.on("afterrender",function(){this.setMultipleInputAttribute()},this);this.on("change",function(d,c,a){var b=this.fileInputEl.dom.files;if(b.length){this.fireEvent("fileselected",this,b)}},this);this.callParent(arguments)},reset:function(){this.callParent(arguments);this.setMultipleInputAttribute()},setMultipleInputAttribute:function(a){a=a||this.fileInputEl;a.dom.setAttribute("multiple","1")}});Ext.define("Ext.ux.upload.Item",{mixins:{observable:"Ext.util.Observable"},STATUS_READY:"ready",STATUS_UPLOADING:"uploading",STATUS_UPLOADED:"uploaded",STATUS_UPLOAD_ERROR:"uploaderror",progress:null,status:null,fileApiObject:null,uploadErrorMessage:"",constructor:function(a){this.mixins.observable.constructor.call(this);this.initConfig(a);Ext.apply(this,{status:this.STATUS_READY,progress:0})},reset:function(){this.uploadErrorMessage="";this.setStatus(this.STATUS_READY);this.setProgress(0)},getFileApiObject:function(){return this.fileApiObject},getId:function(){return this.getFilename()},getName:function(){return this.getProperty("name")},getFilename:function(){return this.getName()},getSize:function(){return this.getProperty("size")},getType:function(){return this.getProperty("type")},getProperty:function(a){if(this.fileApiObject){return this.fileApiObject[a]}return null},getProgress:function(){return this.progress},getProgressPercent:function(){var a=this.getProgress();if(!a){return 0}var b=Ext.util.Format.number((a/this.getSize())*100,"0");if(b>100){b=100}return b},setProgress:function(a){this.progress=a;this.fireEvent("progressupdate",this)},getStatus:function(){return this.status},setStatus:function(a){this.status=a;this.fireEvent("changestatus",this,a)},hasStatus:function(b){var a=this.getStatus();if(Ext.isArray(b)&&Ext.Array.contains(b,a)){return true}if(a===b){return true}return false},isReady:function(){return(this.status==this.STATUS_READY)},isUploaded:function(){return(this.status==this.STATUS_UPLOADED)},setUploaded:function(){this.setProgress(this.getSize());this.setStatus(this.STATUS_UPLOADED)},isUploadError:function(){return(this.status==this.STATUS_UPLOAD_ERROR)},getUploadErrorMessage:function(){return this.uploadErrorMessage},setUploadError:function(a){this.uploadErrorMessage=a;this.setStatus(this.STATUS_UPLOAD_ERROR)},setUploading:function(){this.setStatus(this.STATUS_UPLOADING)}});Ext.define("Ext.ux.upload.Queue",{extend:"Ext.util.MixedCollection",requires:["Ext.ux.upload.Item"],constructor:function(a){this.callParent(arguments);this.on("clear",function(){this.fireEvent("queuechange",this)},this)},addFiles:function(c){var d;var a=[];var b=c.length;if(!b){return}for(d=0;d<b;d++){a.push(this.createItem(c[d]))}this.addAll(a);this.fireEvent("multiadd",this,a);this.fireEvent("queuechange",this)},reset:function(){this.clearUploadedItems();this.each(function(a){a.reset()},this)},getItems:function(){return this.getRange()},getItemsByStatus:function(b){var a=[];this.each(function(e,d,c){if(e.hasStatus(b)){a.push(e)}});return a},getUploadedItems:function(){return this.getItemsByStatus("uploaded")},getUploadingItems:function(){return this.getItemsByStatus(["ready","uploading"])},existUploadingItems:function(){return(this.getUploadingItems().length>0)},getFirstReadyItem:function(){var a=this.getRange();var b=this.getCount();var c;for(c=0;c<b;c++){if(a[c].isReady()){return a[c]}}return null},clearItems:function(){this.clear()},clearUploadedItems:function(){this.removeItems(this.getUploadedItems())},removeItems:function(a){var b=a.length;var c;if(!b){return}for(c=0;c<b;c++){this.remove(a[c])}this.fireEvent("queuechange",this)},removeItemsByKey:function(c){var b;var a=c.length;if(!a){return}for(b=0;b<a;b++){this.removeItemByKey(c[b])}this.fireEvent("multiremove",this,c);this.fireEvent("queuechange",this)},removeItemByKey:function(a){this.removeAtKey(a)},recoverAfterAbort:function(){this.each(function(a){if(!a.isUploaded()&&!a.isReady()){a.reset()}})},createItem:function(a){var b=Ext.create("Ext.ux.upload.Item",{fileApiObject:a});b.on("changestatus",this.onItemChangeStatus,this);b.on("progressupdate",this.onItemProgressUpdate,this);return b},getKey:function(a){return a.getId()},onItemChangeStatus:function(b,a){this.fireEvent("itemchangestatus",this,b,a)},onItemProgressUpdate:function(a){this.fireEvent("itemprogressupdate",this,a)},isLast:function(b){var a=this.last();if(a&&b.getId()==a.getId()){return true}return false},getTotalBytes:function(){var a=0;this.each(function(d,b,c){a+=d.getSize()},this);return a}});Ext.define("Ext.ux.upload.Panel",{extend:"Ext.panel.Panel",xtype:"uploadpanel",requires:["Ext.ux.upload.ItemGridPanel","Ext.ux.upload.Manager","Ext.ux.upload.StatusBar","Ext.ux.upload.BrowseButton","Ext.ux.upload.Queue"],config:{uploader:null,uploaderOptions:null,synchronous:true,uploadUrl:"",uploadParams:{},uploadExtraHeaders:{},uploadTimeout:60000,filenameEncoder:null,textOk:"OK",textUpload:"Upload",textBrowse:"Browse",textAbort:"Abort",textRemoveSelected:"Remove selected",textRemoveAll:"Remove all",textFilename:"Filename",textSize:"Size",textType:"Type",textStatus:"Status",textProgress:"%",selectionMessageText:"Selected {0} file(s), {1}",uploadMessageText:"Upload progress {0}% ({1} of {2} souborů)",buttonText:"Browse"},queue:null,grid:null,uploadManager:null,statusBar:null,browseButton:null,initComponent:function(){console.log("init.com..");this.queue=this.initQueue();this.grid=Ext.create("Ext.ux.upload.ItemGridPanel",{queue:this.queue,textFilename:this.textFilename,textSize:this.textSize,textType:this.textType,textStatus:this.textStatus,textProgress:this.textProgress});this.uploadManager=this.createUploadManager();this.uploadManager.on("uploadcomplete",this.onUploadComplete,this);this.uploadManager.on("itemuploadsuccess",this.onItemUploadSuccess,this);this.uploadManager.on("itemuploadfailure",this.onItemUploadFailure,this);this.statusBar=Ext.create("Ext.ux.upload.StatusBar",{dock:"bottom",selectionMessageText:this.selectionMessageText,uploadMessageText:this.uploadMessageText});Ext.apply(this,{title:this.dialogTitle,autoScroll:true,layout:"fit",uploading:false,items:[this.grid],dockedItems:[this.getTopToolbarConfig(),this.statusBar]});this.on("afterrender",function(){this.stateInit()},this);this.callParent(arguments)},createUploadManager:function(){var b=this.getUploaderOptions()||{};Ext.applyIf(b,{url:this.uploadUrl,params:this.uploadParams,extraHeaders:this.uploadExtraHeaders,timeout:this.uploadTimeout});var a=Ext.create("Ext.ux.upload.Manager",{uploader:this.uploader,uploaderOptions:b,synchronous:this.getSynchronous(),filenameEncoder:this.getFilenameEncoder()});return a},getTopToolbarConfig:function(){this.browseButton=Ext.create("Ext.ux.upload.BrowseButton",{itemId:"button_browse",buttonText:this.buttonText});this.browseButton.on("fileselected",this.onFileSelection,this);return{xtype:"toolbar",itemId:"topToolbar",dock:"top",items:[this.browseButton,"-",{itemId:"button_upload",text:this.textUpload,scope:this,handler:this.onInitUpload},"-",{itemId:"button_abort",text:this.textAbort,scope:this,handler:this.onAbortUpload,disabled:true},"->",{itemId:"button_remove_selected",text:this.textRemoveSelected,scope:this,handler:this.onMultipleRemove},"-",{itemId:"button_remove_all",text:this.textRemoveAll,scope:this,handler:this.onRemoveAll}]}},initQueue:function(){var a=Ext.create("Ext.ux.upload.Queue");a.on("queuechange",this.onQueueChange,this);return a},onInitUpload:function(){if(!this.queue.getCount()){return}this.stateUpload();this.startUpload()},onAbortUpload:function(){this.uploadManager.abortUpload();this.finishUpload();this.switchState()},onUploadComplete:function(b,a,c){this.finishUpload();if(c){this.stateQueue()}else{this.stateInit()}this.fireEvent("uploadcomplete",this,b,a.getUploadedItems(),c);b.resetUpload()},onFileSelection:function(a,b){this.queue.clearUploadedItems();this.queue.addFiles(b);this.browseButton.reset()},onQueueChange:function(a){this.updateStatusBar();this.switchState()},onMultipleRemove:function(){var a=this.grid.getSelectedRecords();if(!a.length){return}var d=[];var c;var b=a.length;for(c=0;c<b;c++){d.push(a[c].get("filename"))}this.queue.removeItemsByKey(d)},onRemoveAll:function(){this.queue.clearItems()},onItemUploadSuccess:function(a,b,c){},onItemUploadFailure:function(a,b,c){},startUpload:function(){this.uploading=true;this.uploadManager.uploadQueue(this.queue)},finishUpload:function(){this.uploading=false},isUploadActive:function(){return this.uploading},updateStatusBar:function(){if(!this.statusBar){return}var a=this.queue.getCount();this.statusBar.setSelectionMessage(this.queue.getCount(),this.queue.getTotalBytes())},getButton:function(b){var a=this.getDockedComponent("topToolbar");if(a){return a.getComponent(b)}return null},switchButtons:function(a){var b;for(b in a){this.switchButton(b,a[b])}},switchButton:function(c,a){var b=this.getButton(c);if(b){if(a){b.enable()}else{b.disable()}}},switchState:function(){if(this.uploading){this.stateUpload()}else{if(this.queue.getCount()){this.stateQueue()}else{this.stateInit()}}},stateInit:function(){this.switchButtons({button_browse:1,button_upload:0,button_abort:0,button_remove_all:1,button_remove_selected:1})},stateQueue:function(){this.switchButtons({button_browse:1,button_upload:1,button_abort:0,button_remove_all:1,button_remove_selected:1})},stateUpload:function(){this.switchButtons({button_browse:0,button_upload:0,button_abort:1,button_remove_all:1,button_remove_selected:1})}});Ext.define("eui.ux.file.FileManagerController",{extend:"Ext.app.ViewController",alias:"controller.filemanager"});Ext.define("eui.ux.file.FileManager",{extend:"Ext.panel.Panel",xtype:"filemanager",modal:true,requires:["Ext.ux.upload.uploader.FormDataUploader","Ext.ux.upload.Panel","eui.ux.file.FileGrid","eui.ux.file.FileForm","eui.ux.file.FileManagerController"],defaultListenerScope:true,controller:"filemanager",layout:"fit",title:"파일매니저",fileAutoLoad:true,draggable:false,resizable:false,config:{fileParams:{}},initComponent:function(){var a=this;Ext.apply(a,{items:[{xtype:"filegrid",listeners:{render:function(){if(a.fileAutoLoad){this.store.load()}}},fileParams:a.getFileParams()}]});a.callParent(arguments)},listeners:{fileuploadcomplete:function(){console.log("fileuploadcomplete",arguments)}},onRender:function(d){var c=this,b=this.down("filegrid"),a=this.down("form");b.bbar=[];this.callParent(arguments)},addHiddenFieldParams:function(d){this.setFileParams(d);var a=this.down("fileform");for(var c in d){var b=d[c];a.add({xtype:"iddenfield",name:c,value:b})}}});Ext.define("eui.ux.grid.CsvUploader",{extend:"Ext.panel.Panel",alias:"widget.csvuploader",layout:{type:"vbox",align:"stretch"},margin:5,onSearch:function(a,e){var d=this,c=d.down("grid");var b=Ext.create("Ext.data.Store",{fields:[],data:a});c.bindStore(b);c.store.load({params:{},callback:function(g,f,m){if(Ext.isEmpty(g)||g.length===0){return}var l=Object.keys(g[0].getData());var i=[];var k=[];var h=c.store.getAt(0);var j=function(o,n){i.push({minWidth:100,text:e[n],dataIndex:o})};Ext.each(k,j);Ext.each(k,function(n){Ext.Array.remove(l,n)});Ext.each(l,j);c.reconfigure(this.store,i)}})},onSave:function(b){var c=this,a=c.down("grid");var d=c.getGridData(a),e={data:d};if(c.__PARAMS.params){Ext.apply(e,c.__PARAMS.params)}Util.CommonAjax({url:c.__PARAMS.url,params:e,pCallback:function(g,h,f){if(f.success){c.ownerCt.fireEvent("complete",c.ownerCt,d)}else{c.ownerCt.fireEvent("fail",c.ownerCt,d);Ext.Msg.alert("저장실패",f.message)}}})},getGridData:function(b,d){var c=b.getStore().getData().items,a=[];Ext.Array.each(c,function(e){a.push(Ext.applyIf({__rowStatus:"I"},e.getData(),d))});return a},toJson:function(){var c=this;var b=Ext.getCmp("uploadExcel").getEl().down("input[type=file]").dom.files[0];var a=new FileReader();a.readAsText(b,"EUC-KR");a.onload=function(d){myCsv=d.target.result;var m=myCsv.split("\n");var n=[];var e=m[0].split("|");for(var h=1;h<m.length;h++){var g={};if(m[h]){var l=m[h].split("|");for(var f=0;f<e.length;f++){var k=e[f].trim();if(typeof(c.__PARAMS.DATAINDEX)=="undefined"){g["field"+f]=""+l[f]}else{if(c.__PARAMS.DATAINDEX[f]==null){g["field"+f]=""+l[f]}else{g[c.__PARAMS.DATAINDEX[f]]=""+l[f]}}}n.push(g)}}c.onSearch(n,e)}},initComponent:function(){var a=this;Ext.apply(a,{defaults:{margin:5},items:[{title:"Excel Upload",xtype:"euiform",tableColumns:1,items:[{xtype:"euidisplay",value:'제어판 -> 국가 및 언어 -> 숫자탭의 "목록 구분 기호"를 "|"로 꼭 변경하세요'},{fieldLabel:"파일",xtype:"filefield",cellCls:"fo-table-row-td",colspan:3,regex:(/.(csv)$/i),regexText:"Only CSV files allowed for upload",id:"uploadExcel"}],buttons:[{xtype:"button",text:"Upload",handler:function(){a.toJson()}},{xtype:"button",text:"Save",handler:function(){a.onSave()}}]},{xtype:"grid",flex:1,height:400,usePagingToolbar:false,bind:{store:"{excelStore}"},listeners:{itemdblclick:{fn:a.parentCallBack,scope:a}},forceFit:true,columns:{defaults:{width:120},items:[{text:"-",dataIndex:"temp"}]}}]});this.callParent(arguments);this.on("afterrender",function(){var b=this})}});Ext.define("eui.ux.popup.DefaultPopup",{extend:"eui.container.PopupContainer",alias:"widget.popup-default",requires:[],viewModel:{stores:{commonpopupStore:{autoLoad:true,remoteSort:true,fields:[],proxy:{type:"rest",url:"api/COM050101SVC/getPopup",reader:{type:"json",rootProperty:"data"}}}}},layout:{type:"vbox",align:"stretch"},autoScroll:true,setCallbackData:function(){console.log(this);var a=Ext.create("Ext.data.Model",{CD:"AAAA",CD_NM:"코드명"});this.parentCallBack(a,"CD","CD_NM");this.up("window").close()},beforeRender:function(){var c=this,d=this.__PARAMS.popupConfig.formConfig,b=d.length,a=c.items.items[0].tableColumns,e=(b*2)%a==0?0:((a+1)-(b*2)%a);if(this.__PARAMS.popupConfig.title){c.items.items[0].title=this.__PARAMS.popupConfig.title}else{c.items.items[0].setHiddenHeader(true)}Ext.each(d,function(g,f){c.items.items[0].add({xtype:"euilabel",text:g.label},Ext.apply(g,{colspan:(f===(b-1)?e:0)}))});this.callParent(arguments)},onSearch:function(c){var d=Util.getOwnerCt(this).down("sppopupcontainer"),b=d.down("spgrid"),a=d.__PARAMS.popupConfig;if(c=="S"){}else{}b.store.getProxy().extraParams={groupCode:a.groupCode};if(!a.hiddenColumns){a.hiddenColumns=[]}b.store.load({callback:function(f,e,l){if(Ext.isEmpty(f)||f.length===0){return}var k=Object.keys(f[0].getData());var h=[];var j=[];var g=b.store.getAt(0);var i=function(o,m){if(o!=="id"){if(!Ext.isArray(a.hiddenColumns)){a.hiddenColumns=[a.hiddenColumns]}var n=Ext.Array.filter(a.hiddenColumns,function(s){return s.indexOf(o)!=-1});var r=Util.getLocaleValue(o),q=100;if(!g.get(o)){return}if(r.length<g.get(o).length){r=g.get(o)}if(r===0){q=200}else{q=r.length*10;if(q<100){q=100}}h.push({minWidth:q,text:"#{"+o+"}",dataIndex:o})}};Ext.each(a&&a.formConfig||[],function(m){j.push(m.name)});Ext.each(j,i);Ext.each(j,function(m){Ext.Array.remove(k,m)});Ext.each(k,i);b.reconfigure(this.store,h)}})},onLoad:function(){if(!this.__PARAMS.popupConfig.autoSearch){return}this.onSearch("S")},parentCallBack:function(b,a){this.callParent([a])},initComponent:function(){var a=this;Ext.apply(a,{items:[{tableColumns:4,hiddenCloseBtn:false,hiddenHeader:true,itemId:"popup",xtype:"euiform",hiddenSearchBtn:false,listeners:{scome:a,baseformsearch:a.onSearch}},{xtype:"euigrid",flex:1,usePagingToolbar:true,bind:{store:"{commonpopupStore}"},listeners:{itemdblclick:{fn:a.parentCallBack,scope:a},afterrender:{scope:a,fn:"onLoad",delay:500}},forceFit:true,columns:{defaults:{width:120},items:[{text:"-",dataIndex:"temp"}]}}]});this.callParent(arguments);this.on("afterrender",function(){var b=this})}});Ext.define("eui.ux.table.TableCellMerge",{extend:"Ext.panel.Panel",xtype:"tablecellmerge",listeners:{afterrender:function(){var b=this.table_merge_id;var a=REDIPS.table;a.onmousedown(b,true);a.color.cell="#9BB3DA"}},layout:"fit",initComponent:function(){var a=this.id+"-merge-table";this.table_merge_id=a;Ext.apply(this,{tbar:[{xtype:"button",text:"합치기",iconCls:"x-fa fa-plus-square",handler:function(){REDIPS.table.merge("h",false);REDIPS.table.merge("v")}},{xtype:"button",text:"가로분할",handler:function(){REDIPS.table.split("h")}},{xtype:"button",text:"세로분할",handler:function(){REDIPS.table.split("v")}},{xtype:"button",text:"로우추가",handler:function(){REDIPS.table.row(a,"insert")}},{xtype:"button",text:"로우삭제",handler:function(){REDIPS.table.row(a,"delete")}},{xtype:"button",text:"컬럼추가",handler:function(){REDIPS.table.column(a,"insert")}},{xtype:"button",text:"컬럼삭제",handler:function(){REDIPS.table.column(a,"delete")}}],html:'<table width="100%" class="table-cell-merge-table" id='+a+'><tbody><tr height="47"><td></td><td></td><td></td></tr><tr height="47"><td></td><td></td><td></td></tr><tr height="47"><td></td><td></td><td></td></tr></tbody></table>'});this.callParent(arguments)}});Ext.define("eui.window.Notification",{extend:"Ext.window.Window",alias:"widget.uxNotification",cls:"ux-notification-window",autoClose:true,autoHeight:true,plain:false,draggable:false,shadow:false,focus:Ext.emptyFn,manager:null,useXAxis:false,position:"br",spacing:6,paddingX:30,paddingY:10,slideInAnimation:"easeIn",slideBackAnimation:"bounceOut",slideInDuration:1500,slideBackDuration:1000,hideDuration:500,autoCloseDelay:7000,stickOnClick:true,stickWhileHover:true,isHiding:false,isFading:false,destroyAfterHide:false,closeOnMouseOut:false,xPos:0,yPos:0,statics:{defaultManager:{el:null}},initComponent:function(){var a=this;if(Ext.isDefined(a.corner)){a.position=a.corner}if(Ext.isDefined(a.slideDownAnimation)){a.slideBackAnimation=a.slideDownAnimation}if(Ext.isDefined(a.autoDestroyDelay)){a.autoCloseDelay=a.autoDestroyDelay}if(Ext.isDefined(a.autoHideDelay)){a.autoCloseDelay=a.autoHideDelay}if(Ext.isDefined(a.autoHide)){a.autoClose=a.autoHide}if(Ext.isDefined(a.slideInDelay)){a.slideInDuration=a.slideInDelay}if(Ext.isDefined(a.slideDownDelay)){a.slideBackDuration=a.slideDownDelay}if(Ext.isDefined(a.fadeDelay)){a.hideDuration=a.fadeDelay}a.position=a.position.replace(/c/,"");a.updateAlignment(a.position);a.setManager(a.manager);a.callParent(arguments)},onRender:function(){var a=this;a.callParent(arguments);a.el.hover(function(){a.mouseIsOver=true},function(){a.mouseIsOver=false;if(a.closeOnMouseOut){a.closeOnMouseOut=false;a.close()}},a)},updateAlignment:function(a){var b=this;switch(a){case"br":b.paddingFactorX=-1;b.paddingFactorY=-1;b.siblingAlignment="br-br";if(b.useXAxis){b.managerAlignment="bl-br"}else{b.managerAlignment="tr-br"}break;case"bl":b.paddingFactorX=1;b.paddingFactorY=-1;b.siblingAlignment="bl-bl";if(b.useXAxis){b.managerAlignment="br-bl"}else{b.managerAlignment="tl-bl"}break;case"tr":b.paddingFactorX=-1;b.paddingFactorY=1;b.siblingAlignment="tr-tr";if(b.useXAxis){b.managerAlignment="tl-tr"}else{b.managerAlignment="br-tr"}break;case"tl":b.paddingFactorX=1;b.paddingFactorY=1;b.siblingAlignment="tl-tl";if(b.useXAxis){b.managerAlignment="tr-tl"}else{b.managerAlignment="bl-tl"}break;case"b":b.paddingFactorX=0;b.paddingFactorY=-1;b.siblingAlignment="b-b";b.useXAxis=0;b.managerAlignment="t-b";break;case"t":b.paddingFactorX=0;b.paddingFactorY=1;b.siblingAlignment="t-t";b.useXAxis=0;b.managerAlignment="b-t";break;case"l":b.paddingFactorX=1;b.paddingFactorY=0;b.siblingAlignment="l-l";b.useXAxis=1;b.managerAlignment="r-l";break;case"r":b.paddingFactorX=-1;b.paddingFactorY=0;b.siblingAlignment="r-r";b.useXAxis=1;b.managerAlignment="l-r";break}},getXposAlignedToManager:function(){var a=this;var b=0;if(a.manager&&a.manager.el&&a.manager.el.dom){if(!a.useXAxis){return a.el.getLeft()}else{if(a.position=="br"||a.position=="tr"||a.position=="r"){b+=a.manager.el.getAnchorXY("r")[0];b-=(a.el.getWidth()+a.paddingX)}else{b+=a.manager.el.getAnchorXY("l")[0];b+=a.paddingX}}}return b},getYposAlignedToManager:function(){var b=this;var a=0;if(b.manager&&b.manager.el&&b.manager.el.dom){if(b.useXAxis){return b.el.getTop()}else{if(b.position=="br"||b.position=="bl"||b.position=="b"){a+=b.manager.el.getAnchorXY("b")[1];a-=(b.el.getHeight()+b.paddingY)}else{a+=b.manager.el.getAnchorXY("t")[1];a+=b.paddingY}}}return a},getXposAlignedToSibling:function(a){var b=this;if(b.useXAxis){if(b.position=="tl"||b.position=="bl"||b.position=="l"){return(a.xPos+a.el.getWidth()+a.spacing)}else{return(a.xPos-b.el.getWidth()-b.spacing)}}else{return b.el.getLeft()}},getYposAlignedToSibling:function(a){var b=this;if(b.useXAxis){return b.el.getTop()}else{if(b.position=="tr"||b.position=="tl"||b.position=="t"){return(a.yPos+a.el.getHeight()+a.spacing)}else{return(a.yPos-b.el.getHeight()-a.spacing)}}},getNotifications:function(b){var a=this;if(!a.manager.notifications[b]){a.manager.notifications[b]=[]}return a.manager.notifications[b]},setManager:function(a){var b=this;b.manager=a;if(typeof b.manager=="string"){b.manager=Ext.getCmp(b.manager)}if(!b.manager){b.manager=b.statics().defaultManager;if(!b.manager.el){b.manager.el=Ext.getBody()}}if(typeof b.manager.notifications=="undefined"){b.manager.notifications={}}},beforeShow:function(){var a=this;if(a.stickOnClick){if(a.body&&a.body.dom){Ext.fly(a.body.dom).on("click",function(){a.cancelAutoClose();a.addCls("notification-fixed")},a)}}if(a.autoClose){a.task=new Ext.util.DelayedTask(a.doAutoClose,a);a.task.delay(a.autoCloseDelay)}a.el.setX(-10000);a.el.setOpacity(1)},afterShow:function(){var b=this;b.callParent(arguments);var a=b.getNotifications(b.managerAlignment);if(a.length){b.el.alignTo(a[a.length-1].el,b.siblingAlignment,[0,0]);b.xPos=b.getXposAlignedToSibling(a[a.length-1]);b.yPos=b.getYposAlignedToSibling(a[a.length-1])}else{b.el.alignTo(b.manager.el,b.managerAlignment,[(b.paddingX*b.paddingFactorX),(b.paddingY*b.paddingFactorY)],false);b.xPos=b.getXposAlignedToManager();b.yPos=b.getYposAlignedToManager()}Ext.Array.include(a,b);b.el.animate({from:{x:b.el.getX(),y:b.el.getY()},to:{x:b.xPos,y:b.yPos,opacity:1},easing:b.slideInAnimation,duration:b.slideInDuration,dynamic:true})},slideBack:function(){var c=this;var b=c.getNotifications(c.managerAlignment);var a=Ext.Array.indexOf(b,c);if(!c.isHiding&&c.el&&c.manager&&c.manager.el&&c.manager.el.dom&&c.manager.el.isVisible()){if(a){c.xPos=c.getXposAlignedToSibling(b[a-1]);c.yPos=c.getYposAlignedToSibling(b[a-1])}else{c.xPos=c.getXposAlignedToManager();c.yPos=c.getYposAlignedToManager()}c.stopAnimation();c.el.animate({to:{x:c.xPos,y:c.yPos},easing:c.slideBackAnimation,duration:c.slideBackDuration,dynamic:true})}},cancelAutoClose:function(){var a=this;if(a.autoClose){a.task.cancel()}},doAutoClose:function(){var a=this;if(!(a.stickWhileHover&&a.mouseIsOver)){a.close()}else{a.closeOnMouseOut=true}},removeFromManager:function(){var c=this;if(c.manager){var b=c.getNotifications(c.managerAlignment);var a=Ext.Array.indexOf(b,c);if(a!=-1){Ext.Array.erase(b,a,1);for(;a<b.length;a++){b[a].slideBack()}}}},hide:function(){var a=this;if(a.isHiding){if(!a.isFading){a.callParent(arguments);a.isHiding=false}}else{a.isHiding=true;a.isFading=true;a.cancelAutoClose();if(a.el){a.el.fadeOut({opacity:0,easing:"easeIn",duration:a.hideDuration,remove:a.destroyAfterHide,listeners:{afteranimate:function(){a.isFading=false;a.removeCls("notification-fixed");a.removeFromManager();a.hide(a.animateTarget,a.doClose,a)}}})}}return a},destroy:function(){var a=this;if(!a.hidden){a.destroyAfterHide=true;a.hide(a.animateTarget,a.doClose,a)}else{a.callParent(arguments)}}});Ext.define("Ext.ux.exporter.Formatter",{format:Ext.emptyFn,constructor:function(a){a=a||{};Ext.applyIf(a,{})}});Ext.define("Ext.ux.exporter.csvFormatter.CsvFormatter",{extend:"Ext.ux.exporter.Formatter",mimeType:"text/csv",charset:"UTF-8",separator:",",extension:"csv",format:function(a,b){this.columns=b.columns||(a.fields?a.fields.items:a.model.prototype.fields.items);this.parserDiv=document.createElement("div");return this.getHeaders()+"\n"+this.getRows(a)},getHeaders:function(a){var b=[],c;Ext.each(this.columns,function(d){var e;if(d.getXType()!="rownumberer"){if(d.text!=undefined){e=d.text}else{if(d.name){e=d.name.replace(/_/g," ");e=Ext.String.capitalize(e)}}b.push(e)}},this);return b.join(this.separator)},getRows:function(a){var b=[];a.each(function(c,d){b.push(this.getCell(c,d))},this);return b.join("\n")},getCell:function(a,c){var b=[];Ext.each(this.columns,function(g){var f=g.name||g.dataIndex||g.stateId;if(f&&g.getXType()!="rownumberer"){if(Ext.isFunction(g.renderer)){var h=g.renderer(a.get(f),{},a);this.parserDiv.innerHTML=h;var e=[];var d=this.parserDiv.getElementsByTagName("div");if(d&&d.length>0){Ext.each(d,function(j){var k=[];var i=j.getElementsByTagName("img");Ext.each(i,function(l){k.push(l.getAttribute("title"))});k.push(j.innerText||j.textContent);e.push(k.join(":"))})}else{e.push(this.parserDiv.innerText||this.parserDiv.textContent)}h=e.join("\n")}else{var h=a.get(f)}b.push('"'+h+'"')}},this);return b.join(this.separator)}});Ext.define("Ext.ux.exporter.excelFormatter.Cell",{constructor:function(a){Ext.applyIf(a,{type:"String"});Ext.apply(this,a);Ext.ux.exporter.excelFormatter.Cell.superclass.constructor.apply(this,arguments)},render:function(){return this.tpl.apply(this)},tpl:new Ext.XTemplate('<ss:Cell ss:StyleID="{style}">','<ss:Data ss:Type="{type}">{value}</ss:Data>',"</ss:Cell>")});Ext.define("Ext.ux.exporter.excelFormatter.ExcelFormatter",{extend:"Ext.ux.exporter.Formatter",uses:["Ext.ux.exporter.excelFormatter.Cell","Ext.ux.exporter.excelFormatter.Style","Ext.ux.exporter.excelFormatter.Worksheet","Ext.ux.exporter.excelFormatter.Workbook"],mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",charset:"UTF-8",extension:"xls",format:function(b,c){var a=new Ext.ux.exporter.excelFormatter.Workbook(c);a.addWorksheet(b,c||{});return a.render()}});Ext.define("Ext.ux.exporter.excelFormatter.Style",{constructor:function(a){a=a||{};Ext.apply(this,a,{parentStyle:"",attributes:[]});Ext.ux.exporter.excelFormatter.Style.superclass.constructor.apply(this,arguments);if(this.id==undefined){throw new Error("An ID must be provided to Style")}this.preparePropertyStrings()},preparePropertyStrings:function(){Ext.each(this.attributes,function(a,b){this.attributes[b].propertiesString=this.buildPropertyString(a);this.attributes[b].children=a.children||[];Ext.each(a.children,function(d,c){this.attributes[b].children[c].propertiesString=this.buildPropertyString(d)},this)},this)},buildPropertyString:function(b){var a="";Ext.each(b.properties||[],function(c){a+=Ext.String.format('ss:{0}="{1}" ',c.name,c.value)},this);return a},render:function(){return this.tpl.apply(this)},tpl:new Ext.XTemplate('<tpl if="parentStyle.length == 0">','<ss:Style ss:ID="{id}">',"</tpl>",'<tpl if="parentStyle.length != 0">','<ss:Style ss:ID="{id}" ss:Parent="{parentStyle}">',"</tpl>",'<tpl for="attributes">','<tpl if="children.length == 0">',"<ss:{name} {propertiesString} />","</tpl>",'<tpl if="children.length != 0">',"<ss:{name} {propertiesString}>",'<tpl for="children">',"<ss:{name} {propertiesString} />","</tpl>","</ss:{name}>","</tpl>","</tpl>","</ss:Style>")});Ext.define("Ext.ux.exporter.excelFormatter.Workbook",{constructor:function(a){a=a||{};Ext.apply(this,a,{title:"Workbook",worksheets:[],compiledWorksheets:[],cellBorderColor:"#e4e4e4",styles:[],compiledStyles:[],hasDefaultStyle:true,hasStripeStyles:true,windowHeight:9000,windowWidth:50000,protectStructure:false,protectWindows:false});if(this.hasDefaultStyle){this.addDefaultStyle()}if(this.hasStripeStyles){this.addStripedStyles()}this.addTitleStyle();this.addHeaderStyle()},render:function(){this.compileStyles();this.joinedCompiledStyles=this.compiledStyles.join("");this.compileWorksheets();this.joinedWorksheets=this.compiledWorksheets.join("");return this.tpl.apply(this)},addWorksheet:function(a,b){var c=new Ext.ux.exporter.excelFormatter.Worksheet(a,b);this.worksheets.push(c);return c},addStyle:function(a){var b=new Ext.ux.exporter.excelFormatter.Style(a||{});this.styles.push(b);return b},compileStyles:function(){this.compiledStyles=[];Ext.each(this.styles,function(a){this.compiledStyles.push(a.render())},this);return this.compiledStyles},compileWorksheets:function(){this.compiledWorksheets=[];Ext.each(this.worksheets,function(a){this.compiledWorksheets.push(a.render())},this);return this.compiledWorksheets},tpl:new Ext.XTemplate('<?xml version="1.0" encoding="utf-8"?>','<ss:Workbook xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:o="urn:schemas-microsoft-com:office:office">',"<o:DocumentProperties>","<o:Title>{title}</o:Title>","</o:DocumentProperties>","<x:ExcelWorkbook>","<x:WindowHeight>{windowHeight}</x:WindowHeight>","<x:WindowWidth>{windowWidth}</x:WindowWidth>","<x:ProtectStructure>{protectStructure}</x:ProtectStructure>","<x:ProtectWindows>{protectWindows}</x:ProtectWindows>","</x:ExcelWorkbook>","<ss:Styles>","{joinedCompiledStyles}","</ss:Styles>","{joinedWorksheets}","</ss:Workbook>"),addDefaultStyle:function(){var a=[{name:"Color",value:this.cellBorderColor},{name:"Weight",value:"1"},{name:"LineStyle",value:"Continuous"}];this.addStyle({id:"Default",attributes:[{name:"Alignment",properties:[{name:"Vertical",value:"Top"},{name:"WrapText",value:"1"}]},{name:"Font",properties:[{name:"FontName",value:"arial"},{name:"Size",value:"10"}]},{name:"Interior"},{name:"NumberFormat"},{name:"Protection"},{name:"Borders",children:[{name:"Border",properties:[{name:"Position",value:"Top"}].concat(a)},{name:"Border",properties:[{name:"Position",value:"Bottom"}].concat(a)},{name:"Border",properties:[{name:"Position",value:"Left"}].concat(a)},{name:"Border",properties:[{name:"Position",value:"Right"}].concat(a)}]}]})},addTitleStyle:function(){this.addStyle({id:"title",attributes:[{name:"Borders"},{name:"Font"},{name:"NumberFormat",properties:[{name:"Format",value:"@"}]},{name:"Alignment",properties:[{name:"WrapText",value:"1"},{name:"Horizontal",value:"Center"},{name:"Vertical",value:"Center"}]}]})},addHeaderStyle:function(){this.addStyle({id:"headercell",attributes:[{name:"Font",properties:[{name:"Bold",value:"1"},{name:"Size",value:"10"}]},{name:"Interior",properties:[{name:"Pattern",value:"Solid"},{name:"Color",value:"#A3C9F1"}]},{name:"Alignment",properties:[{name:"WrapText",value:"1"},{name:"Horizontal",value:"Center"}]}]})},addStripedStyles:function(){this.addStyle({id:"even",attributes:[{name:"Interior",properties:[{name:"Pattern",value:"Solid"},{name:"Color",value:"#CCFFFF"}]}]});this.addStyle({id:"odd",attributes:[{name:"Interior",properties:[{name:"Pattern",value:"Solid"},{name:"Color",value:"#CCCCFF"}]}]});Ext.each(["even","odd"],function(a){this.addChildNumberFormatStyle(a,a+"date","[ENG][$-409]dd-mmm-yyyy;@");this.addChildNumberFormatStyle(a,a+"int","0");this.addChildNumberFormatStyle(a,a+"float","0.00")},this)},addChildNumberFormatStyle:function(a,c,b){this.addStyle({id:c,parentStyle:"even",attributes:[{name:"NumberFormat",properties:[{name:"Format",value:b}]}]})}});Ext.define("Ext.ux.exporter.excelFormatter.Worksheet",{constructor:function(a,b){b=b||{};this.store=a;Ext.applyIf(b,{hasTitle:true,hasHeadings:true,stripeRows:true,parserDiv:document.createElement("div"),title:"Workbook",columns:a.fields==undefined?{}:a.fields.items});Ext.apply(this,b);Ext.ux.exporter.excelFormatter.Worksheet.superclass.constructor.apply(this,arguments)},dateFormatString:"Y-m-d",worksheetTpl:new Ext.XTemplate('<ss:Worksheet ss:Name="{title}">',"<ss:Names>",'<ss:NamedRange ss:Name="Print_Titles" ss:RefersTo="=\'{title}\'!R1:R2" />',"</ss:Names>",'<ss:Table x:FullRows="1" x:FullColumns="1" ss:ExpandedColumnCount="{colCount}" ss:ExpandedRowCount="{rowCount}">',"{columns}",'<ss:Row ss:AutoFitHeight="1">',"{header}","</ss:Row>","{rows}","</ss:Table>","<x:WorksheetOptions>","<x:PageSetup>",'<x:Layout x:CenterHorizontal="1" x:Orientation="Landscape" />','<x:Footer x:Data="Page &amp;P of &amp;N" x:Margin="0.5" />','<x:PageMargins x:Top="0.5" x:Right="0.5" x:Left="0.5" x:Bottom="0.8" />',"</x:PageSetup>","<x:FitToPage />","<x:Print>","<x:PrintErrors>Blank</x:PrintErrors>","<x:FitWidth>1</x:FitWidth>","<x:FitHeight>32767</x:FitHeight>","<x:ValidPrinterInfo />","<x:VerticalResolution>600</x:VerticalResolution>","</x:Print>","<x:Selected />","<x:DoNotDisplayGridlines />","<x:ProtectObjects>False</x:ProtectObjects>","<x:ProtectScenarios>False</x:ProtectScenarios>","</x:WorksheetOptions>","</ss:Worksheet>"),render:function(a){return this.worksheetTpl.apply({header:this.buildHeader(),columns:this.buildColumns().join(""),rows:this.buildRows().join(""),colCount:this.columns.length,rowCount:this.store.getCount()+2,title:this.title})},buildColumns:function(){var a=[];Ext.each(this.columns,function(b){a.push(this.buildColumn())},this);return a},buildColumn:function(a){return Ext.String.format('<ss:Column ss:AutoFitWidth="1" ss:Width="{0}" />',a||164)},buildRows:function(){var a=[];this.store.each(function(b,c){a.push(this.buildRow(b,c))},this);return a},buildHeader:function(){var a=[];Ext.each(this.columns,function(b){var c;if(b.text!=undefined){c=b.text}else{if(b.name){c=b.name.replace(/_/g," ");c=Ext.String.capitalize(c)}}a.push(Ext.String.format('<ss:Cell ss:StyleID="headercell"><ss:Data ss:Type="String">{0}</ss:Data><ss:NamedCell ss:Name="Print_Titles" /></ss:Cell>',c))},this);return a.join("")},buildRow:function(a,c){var d,b=[];if(this.stripeRows===true){d=c%2==0?"even":"odd"}Ext.each(this.columns,function(h){var g=h.name||h.dataIndex;if(g){if(Ext.isFunction(h.renderer)&&h.xtype!=="hcheckcolumn"){var j=h.renderer(a.get(g),{},a),i="String";var f=[];this.parserDiv.innerHTML=j;var e=this.parserDiv.getElementsByTagName("div");if(e&&e.length>0){Ext.each(e,function(l){var m=[];var k=l.getElementsByTagName("img");Ext.each(k,function(n){m.push(n.getAttribute("title"))});m.push(l.innerText||l.textContent);f.push(m.join(":"))})}else{f.push(this.parserDiv.innerText||this.parserDiv.textContent)}j=f.join(" ")}else{var j=a.get(g),i="String"}b.push(this.buildCell(j,i,d).render())}},this);return Ext.String.format("<ss:Row>{0}</ss:Row>",b.join(""))},buildCell:function(c,b,a){if(b=="DateTime"&&Ext.isFunction(c.format)){c=c.format(this.dateFormatString)}c=c.replace(/</g,"&lt;");return new Ext.ux.exporter.excelFormatter.Cell({value:c,type:b,style:a})},typeMappings:{"int":"Number",gridcolumn:"String","float":"Number",date:"DateTime"}});Ext.define("Ext.ux.exporter.Exporter",{uses:["Ext.ux.exporter.ExporterButton","Ext.ux.exporter.csvFormatter.CsvFormatter","Ext.ux.exporter.excelFormatter.ExcelFormatter","Ext.ux.exporter.FileSaver"],statics:{exportAny:function(b,e,a){var d="export";if(!b.is){d=d+"Store"}else{if(b.is("gridpanel")){d=d+"Grid"}else{if(b.is("treepanel")){d=d+"Tree"}else{d=d+"Store";b=b.getStore()}}}var c=this.getFormatterByName(e);return this[d](b,c,a)},exportGrid:function(e,d,b){b=b||{};d=this.getFormatterByName(d);var a=e.getStore()||b.store;if(e.store_){a=e.store_}var c=Ext.Array.filter(e.getColumns(),function(f){if(f.hidden||Ext.isEmpty(f.dataIndex)){return false}return true});Ext.applyIf(b,{title:e.title,columns:c});return{data:d.format(a,b),mimeType:d.mimeType,charset:d.charset,ext:d.extension}},exportStore:function(a,c,b){b=b||{};c=this.getFormatterByName(c);Ext.applyIf(b,{columns:a.fields?a.fields.items:a.model.prototype.fields.items});return{data:c.format(a,b),mimeType:c.mimeType,charset:c.charset,ext:c.extension}},exportTree:function(a,d,c){c=c||{};d=this.getFormatterByName(d);var b=a.getStore()||c.store;Ext.applyIf(c,{title:a.title});return{data:d.format(b,c),mimeType:d.mimeType,charset:d.charset,ext:d.extension}},getFormatterByName:function(a){a=a?a:"excel";a=!Ext.isString(a)?a:Ext.create("Ext.ux.exporter."+a+"Formatter."+Ext.String.capitalize(a)+"Formatter");return a}}});Ext.define("Ext.ux.exporter.FileSaver",{statics:{saveAs:function(i,d,g,c,k,f,h,m){window.URL=window.URL||window.webkitURL;try{var b=new Blob([i],{type:d+";charset="+g+","});blobURL=window.URL.createObjectURL(b);if(window.navigator.msSaveOrOpenBlob){window.navigator.msSaveOrOpenBlob(b,c);if(h){h.call(m)}return}else{var l=document.createElement("a");if(typeof l.download==="undefined"){window.location=downloadUrl}else{l.href=blobURL;l.download=c;document.body.appendChild(l);l.click()}if(h){h.call(m)}this.cleanBlobURL(blobURL);return}}catch(j){Ext.log("Browser doesn't support Blob: "+j.message)}if(f){this.downloadUsingServer(i,d,g,c,h,m)}else{this.openUsingDataURI(i,d,g);if(h){h.call(m)}}},downloadUsingServer:function(e,f,g,b,a,c){var d=Ext.getDom("formDummy");if(!d){d=document.createElement("form");d.id="formDummy";d.name="formDummy";d.className="x-hidden";document.body.appendChild(d)}Ext.Ajax.request({url:"/ExportFileAction",method:"POST",form:d,isUpload:true,params:{userAction:"download",data:e,mimeType:f,charset:g,filename:b},callback:function(){if(a){a.call(c)}}})},openUsingDataURI:function(a,b,c){if(Ext.isIE9m){w=window.open();doc=w.document;doc.open(b,"replace");doc.charset=c;doc.write(a);doc.close();doc.execCommand("SaveAs",null,filename)}else{window.open("data:"+b+";charset="+c+","+encodeURIComponent(a),"_blank")}},cleanBlobURL:function(a){setTimeout(function(){window.URL.revokeObjectURL(a)},10000)}}});Ext.define("Ext.ux.exporter.ExporterButton",{extend:"Ext.Button",requires:["Ext.ux.exporter.Exporter","Ext.ux.exporter.FileSaver"],alias:"widget.exporterbutton",config:{iconCls:null,showText:true},localeProperties:["text","iconCls"],text:"Download",format:"excel",preventDefault:false,saveDelay:300,remote:false,title:"export",constructor:function(a){var b=this;Ext.ux.exporter.ExporterButton.superclass.constructor.call(b,a);b.on("afterrender",function(){if(b.component){b.component=!Ext.isString(b.component)?b.component:Ext.ComponentQuery.query(b.component)[0]}try{b.setComponent(b.store||b.component||b.up("gridpanel")||b.up("treepanel")||b.targetGrid,a)}catch(c){}})},onClick2:function(c){var g=this,d="",j=g.format,i=g.title,a=g.remote,b=new Date(),h=g.el.dom,f,k;g.fireEvent("start",g);f=Ext.ux.exporter.Exporter.exportAny(g.component,j,{title:i});filename=i+"_"+Ext.Date.format(b,"Y-m-d h:i:s")+"."+f.ext;Ext.ux.exporter.FileSaver.saveAs(f.data,f.mimeType,f.charset,filename,h,a,g.onComplete,g)},setComponent:function(c,b){var e=this;e.component=c;var a=c.getStore(),d=a.getCount();e.store=!c.is?c:c.getStore()},onComplete:function(){this.fireEvent("complete",this)}});Ext.define("Ext.ux.upload.Dialog",{extend:"Ext.panel.Panel",xtype:"uploaddialog",width:700,height:500,border:0,config:{dialogTitle:"",synchronous:true,uploadUrl:"",uploadParams:{},uploadExtraHeaders:{},uploadTimeout:60000,textClose:"Close"},initComponent:function(){if(!Ext.isObject(this.panel)){this.panel=Ext.create("Ext.ux.upload.Panel",{synchronous:this.synchronous,scope:this.scope,uploadUrl:this.uploadUrl,uploadParams:this.uploadParams,uploadExtraHeaders:this.uploadExtraHeaders,uploadTimeout:this.uploadTimeout})}this.relayEvents(this.panel,["uploadcomplete"]);Ext.apply(this,{layout:"fit",items:[this.panel]});this.callParent(arguments)}});Ext.define("Ext.ux.upload.LegacyDialog",{extend:"Ext.window.Window",requires:["Ext.ux.upload.ItemGridPanel","Ext.ux.upload.Manager","Ext.ux.upload.StatusBar","Ext.ux.upload.BrowseButton","Ext.ux.upload.Queue"],width:700,height:500,config:{dialogTitle:"",synchronous:true,uploadUrl:"",uploadParams:{},uploadExtraHeaders:{},uploadTimeout:60000,textOk:"OK",textClose:"Close",textUpload:"1111Upload",textBrowse:"Browse",textAbort:"Abort",textRemoveSelected:"Remove selected",textRemoveAll:"Remove all",textFilename:"Filename",textSize:"Size",textType:"Type",textStatus:"Status",textProgress:"%",selectionMessageText:"Selected {0} file(s), {1}",uploadMessageText:"Upload progress {0}% ({1} of {2} souborů)",buttonText:"00Browse..."},queue:null,grid:null,uploadManager:null,statusBar:null,browseButton:null,initComponent:function(){this.queue=this.initQueue();this.grid=Ext.create("Ext.ux.upload.ItemGridPanel",{queue:this.queue,textFilename:this.textFilename,textSize:this.textSize,textType:this.textType,textStatus:this.textStatus,textProgress:this.textProgress});this.uploadManager=Ext.create("Ext.ux.upload.Manager",{url:this.uploadUrl,synchronous:this.synchronous,params:this.uploadParams,extraHeaders:this.uploadExtraHeaders,uploadTimeout:this.uploadTimeout});this.uploadManager.on("uploadcomplete",this.onUploadComplete,this);this.uploadManager.on("itemuploadsuccess",this.onItemUploadSuccess,this);this.uploadManager.on("itemuploadfailure",this.onItemUploadFailure,this);this.statusBar=Ext.create("Ext.ux.upload.StatusBar",{dock:"bottom",selectionMessageText:this.selectionMessageText,uploadMessageText:this.uploadMessageText});Ext.apply(this,{title:this.dialogTitle,autoScroll:true,layout:"fit",uploading:false,items:[this.grid],dockedItems:[this.getTopToolbarConfig(),{xtype:"toolbar",dock:"bottom",ui:"footer",defaults:{minWidth:this.minButtonWidth},items:["->",{text:this.textClose,cls:"x-btn-text-icon",scope:this,handler:function(){this.close()}}]},this.statusBar]});this.on("afterrender",function(){this.stateInit()},this);this.callParent(arguments)},getTopToolbarConfig:function(){this.browseButton=Ext.create("Ext.ux.upload.BrowseButton",{id:"button_browse",buttonText:this.buttonText});this.browseButton.on("fileselected",this.onFileSelection,this);return{xtype:"toolbar",dock:"top",items:[this.browseButton,"-",{id:"button_upload",text:this.textUpload,iconCls:"ux-mu-icon-action-upload",scope:this,handler:this.onInitUpload},"-",{id:"button_abort",text:this.textAbort,iconCls:"ux-mu-icon-action-abort",scope:this,handler:this.onAbortUpload,disabled:true},"->",{id:"button_remove_selected",text:this.textRemoveSelected,iconCls:"ux-mu-icon-action-remove",scope:this,handler:this.onMultipleRemove},"-",{id:"button_remove_all",text:this.textRemoveAll,iconCls:"ux-mu-icon-action-remove",scope:this,handler:this.onRemoveAll}]}},initQueue:function(){var a=Ext.create("Ext.ux.upload.Queue");a.on("queuechange",this.onQueueChange,this);return a},onInitUpload:function(){if(!this.queue.getCount()){return}this.stateUpload();this.startUpload()},onAbortUpload:function(){this.uploadManager.abortUpload();this.finishUpload();this.switchState()},onUploadComplete:function(b,a,c){this.finishUpload();this.stateInit();this.fireEvent("uploadcomplete",this,b,a.getUploadedItems(),c)},onFileSelection:function(a,b){this.queue.clearUploadedItems();this.queue.addFiles(b);this.browseButton.reset()},onQueueChange:function(a){this.updateStatusBar();this.switchState()},onMultipleRemove:function(){var a=this.grid.getSelectedRecords();if(!a.length){return}var d=[];var c;var b=a.length;for(c=0;c<b;c++){d.push(a[c].get("filename"))}this.queue.removeItemsByKey(d)},onRemoveAll:function(){this.queue.clearItems()},onItemUploadSuccess:function(a,b){},onItemUploadFailure:function(a,b){},startUpload:function(){this.uploading=true;this.uploadManager.uploadQueue(this.queue)},finishUpload:function(){this.uploading=false},isUploadActive:function(){return this.uploading},updateStatusBar:function(){if(!this.statusBar){return}var a=this.queue.getCount();this.statusBar.setSelectionMessage(this.queue.getCount(),this.queue.getTotalBytes())},getButton:function(a){return Ext.ComponentMgr.get(a)},switchButtons:function(a){var b;for(b in a){this.switchButton(b,a[b])}},switchButton:function(c,a){var b=this.getButton(c);if(b){if(a){b.enable()}else{b.disable()}}},switchState:function(){if(this.uploading){this.stateUpload()}else{if(this.queue.getCount()){this.stateQueue()}else{this.stateInit()}}},stateInit:function(){this.switchButtons({button_browse:1,button_upload:0,button_abort:0,button_remove_all:1,button_remove_selected:1})},stateQueue:function(){this.switchButtons({button_browse:1,button_upload:1,button_abort:0,button_remove_all:1,button_remove_selected:1})},stateUpload:function(){this.switchButtons({button_browse:0,button_upload:0,button_abort:1,button_remove_all:1,button_remove_selected:1})}});Ext.define("Ext.ux.upload.header.AbstractFilenameEncoder",{config:{},type:"generic",encode:function(a){},getType:function(){return this.type}});Ext.define("Ext.ux.upload.header.Base64FilenameEncoder",{extend:"Ext.ux.upload.header.AbstractFilenameEncoder",config:{},type:"base64",encode:function(a){return window.btoa(unescape(encodeURIComponent(a)))}});Ext.define("Ext.ux.upload.uploader.DummyUploader",{extend:"Ext.ux.upload.uploader.AbstractUploader",delay:1000,uploadItem:function(b){b.setUploading();var a=new Ext.util.DelayedTask(function(){this.fireEvent("uploadsuccess",b,{success:true,message:"OK",response:null})},this);a.delay(this.delay)},abortUpload:function(){}});Ext.define("Ext.ux.upload.uploader.ExtJsUploader",{extend:"Ext.ux.upload.uploader.AbstractXhrUploader",requires:["Ext.ux.upload.data.Connection"],config:{method:"PUT",connection:null},conn:null,initConnection:function(){var b,a=this.url;console.log("ExtJsUploader.. initConnection..");if(this.connection instanceof Ext.data.Connection){b=this.connection}else{if(this.params){a=Ext.urlAppend(a,Ext.urlEncode(this.params))}b=Ext.create("Ext.ux.upload.data.Connection",{disableCaching:true,method:this.method,url:a,timeout:this.timeout,defaultHeaders:{"Content-Type":this.contentType,"X-Requested-With":"XMLHttpRequest"}})}return b},initHeaders:function(a){var b=this.callParent(arguments);b["Content-Type"]=a.getType();return b},uploadItem:function(b){var a=b.getFileApiObject();if(!a){return}b.setUploading();this.conn=this.initConnection();this.conn.request({scope:this,headers:this.initHeaders(b),rawData:a,success:Ext.Function.bind(this.onUploadSuccess,this,[b],true),failure:Ext.Function.bind(this.onUploadFailure,this,[b],true),progress:Ext.Function.bind(this.onUploadProgress,this,[b],true)})},abortUpload:function(){if(this.conn){this.suspendEvents();this.conn.abort();this.resumeEvents()}}});Ext.define("Ext.ux.upload.uploader.LegacyExtJsUploader",{extend:"Ext.ux.upload.uploader.AbstractUploader",requires:["Ext.ux.upload.data.Connection"],conn:null,initConnection:function(){console.log("LegacyExtJsUploader.. initConnection..");var a=this.url;if(this.params){a=Ext.urlAppend(a,Ext.urlEncode(this.params))}var b=Ext.create("Ext.ux.upload.data.Connection",{disableCaching:true,method:this.method,url:a,timeout:this.timeout,defaultHeaders:{"Content-Type":this.contentType,"X-Requested-With":"XMLHttpRequest"}});return b},uploadItem:function(b){var a=b.getFileApiObject();if(!a){return}b.setUploading();this.conn=this.initConnection();this.conn.request({scope:this,headers:this.initHeaders(b),xmlData:a,success:Ext.Function.bind(this.onUploadSuccess,this,[b],true),failure:Ext.Function.bind(this.onUploadFailure,this,[b],true),progress:Ext.Function.bind(this.onUploadProgress,this,[b],true)})},abortUpload:function(){if(this.conn){this.conn.abort()}},onUploadSuccess:function(b,c,d){var e={success:false,message:"general error",response:b};if(b.responseText){var a=Ext.decode(b.responseText);if(a&&a.success){Ext.apply(e,{success:a.success,message:a.message});this.fireEvent("uploadsuccess",d,e);return}Ext.apply(e,{message:a.message})}this.fireEvent("uploadfailure",d,e)},onUploadFailure:function(a,b,c){var d={success:false,message:"http error",response:a};this.fireEvent("uploadfailure",c,d)},onUploadProgress:function(b,a){this.fireEvent("uploadprogress",a,b)}});